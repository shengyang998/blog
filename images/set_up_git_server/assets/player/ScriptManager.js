var kShowSizeDidChangeEvent="ScriptManager:ShowSizeDidChangeEvent";var kScriptDidDownloadEvent="ScriptManager:ScriptDidDownloadEvent";var kScriptDidNotDownloadEvent="ScriptManager:ScriptDidNotDownloadEvent";var kSlideDidDownloadEvent="SlideManager:SlideDidDownloadEvent";var kSlideDidNotDownloadEvent="SlideManager:SlideDidNotDownloadEvent";var ScriptManager=Class.create({initialize:function(a){this.script=null;this.showUrl=a;this.slideManager=null;document.observe(kSlideDidDownloadEvent,this.handleSlideDidDownloadEvent.bind(this));document.observe(kSlideDidNotDownloadEvent,this.handleSlideDidDownloadEvent.bind(this))},handleSlideDidDownloadEvent:function(a){var i=true;for(var e in this.slideManager.slides){if(this.slideManager.slides.hasOwnProperty(e)){if(!this.slideManager.slides[e].downloaded){i=false;break}}}if(i){this.script.events=[];this.script.originalEvents=[];this.script.slideIndexFromSceneIndexLookup={};this.script.sceneIndexFromSlideIndexLookup={};this.script.slides={};this.script.originalSlides={};var s,t,n,r,o=0,l=0,m=0;for(var e in this.slideManager.slides){if(this.slideManager.slides.hasOwnProperty(e)){n=this.slideManager.slides[e].script;r=this.slideManager.slides[e].originalScript;s=n.events;t=r.events;this.script.slides[e]=n;this.script.originalSlides[e]=r;this.script.sceneIndexFromSlideIndexLookup[o]=l;for(var d=0,y=s.length;d<y;d++){this.script.events.push(s[d]);this.script.originalevents.push(t[d]);this.script.slideindexfromsceneindexlookup[m]=o;m+=1}o+=1;l=m}}this.script.numscenes=this.script.events.length;this.script.lastsceneindex=this.script.numscenes-1;this.script.lastslideindex=this.script.slidelist.length-1;this.script.originalslidewidth=this.script.slidewidth;this.script.originalslideheight=this.script.slideheight;if(isie||isedge){this.adjustscriptforie()}else{this.adjustscript()}if(this.delegate.setviewscale){this.applyscalefactor();this.delegate.setviewscale(this.scalefactor)}if(this.delegate.isusingpreloadedfont&&this.delegate.isusingpreloadedfont()){var c="document.createElement("style");c.type="text/css";c.appendChild(document.createTextNode(this.delegate.getFontFamilyDefinitionsCssString()));document.getElementsByTagName("head")[0].appendChild(c)}else{this.getFontFamilyDefinitionsCssString()}document.fire(kScriptDidDownloadEvent,{script:this.script,delegate:this.delegate});document.fire(kShowSizeDidChangeEvent,{width:this.script.slideWidth,height:this.script.slideHeight})}},getFontFamilyDefinitionsCssString:function(){if(typeof" gsft="=="undefined"){GSFT={}}GSFT.FontFamilyDefinitionsJsonp=GSFT.FontFamilyDefinitionsJsonp||{};GSFT.FontFamilyDefinitionsJsonp.urlPrefix="https://www.icloud.com";GSFT.FontFamilyDefinitionsJsonp.cssStringDictReady=function(a){var" i="" ;var="" e="gShowController.scriptManager.script.fonts;var" s="document.createElement("style");s.type="text/css";for(var" t="0,n=e.length;t<n;t++){var" r="e[t];if(a[r]){i=i+a[r]}}s.appendChild(document.createTextNode(i));document.getElementsByTagName("head")[0].appendChild(s)};(function(){var" a="document.createElement("script");a.src=GSFT.FontFamilyDefinitionsJsonp.urlPrefix+"/applications/iw/current/fonts/font_family_definitions_jsonp.json";document.getElementsByTagName("head")[0].appendChild(a)})()},adjustScript:function(){for(var" o="s.effects[t];this.adjustEffects(r,o);this.adjustEmphasisBuilds(r,o);if(isChrome){this.adjustEffectsForChrome(r,o)}if(browserPrefix==="moz"){this.adjustEffectsForFirefox(r,o)}}for(var" m="e.hyperlinks[t];var" d="s.hyperlinks[t];for(var" y="" in="" m.events){var="" p="d.events[y];for(var" h="0,n=c.effects.length;h<n;h++){var" f="c.effects[h];var" v="p.effects[h];this.adjustEffects(f,v);this.adjustEmphasisBuilds(f,v);if(isChrome){this.adjustEffectsForChrome(r,o)}if(browserPrefix==="moz"){this.adjustEffectsForFirefox(r,o)}}}}}},adjustEffects:function(a,i){switch(a.name){case"apple:doorway":var" n="s.layers[1];s.layers[1]=s.layers[2];s.layers[2]=n;if(isChrome){e.layers[1].layers[0].initialState.masksToBounds=true;e.layers[1].layers[1].initialState.masksToBounds=true;s.layers[1].layers[0].initialState.masksToBounds=true;s.layers[1].layers[1].initialState.masksToBounds=true;e.layers[1].layers[0].layers[0].initialState.masksToBounds=true;e.layers[1].layers[1].layers[0].initialState.masksToBounds=true;s.layers[1].layers[0].layers[0].initialState.masksToBounds=true;s.layers[1].layers[1].layers[0].initialState.masksToBounds=true}break;case"com.apple.iWork.Keynote.BLTBlinds":if(a.type==="transition"){var" l="Math.ceil(n.duration/n.animations[o].duration);for(var">0){var l=e.layers[0];e.layers[0]=e.layers[1];e.layers[1]=l;e.layers[1].initialState.hidden=true;var m=s.layers[0];s.layers[0]=s.layers[1];s.layers[1]=m;s.layers[1].initialState.hidden=true;var t=e.layers[1].animations[0].beginTime;var n=e.layers[1].animations[0].duration;var d=e.layers[1].animations[0].animations[0].beginTime;var y=e.layers[1].animations[0].animations[0].duration;var c;if(t==d){for(var p=0,h=e.layers[1].animations[0].animations.length;p<h;p++){if(e.layers[1].animations[0].animations[p].property==="transform.translation.z"){e.layers[1].animations[0].animations.splice(p,1);s.layers[1].animations[0].animations.splice(p,1)}}c={animations:[],begintime:t,duration:n,fillmode:"forwards",from:{scalar:false},property:"hidden",timingfunction:"linear",to:{scalar:false}};e.layers[1].animations[0].animations.push(c);s.layers[1].animations[0].animations.push(c)}else{for(var p="0,h=e.layers[1].animations[0].animations[0].animations.length;p<h;p++){if(e.layers[1].animations[0].animations[0].animations[p].property==="transform.translation.z"){e.layers[1].animations[0].animations[0].animations.splice(p,1);s.layers[1].animations[0].animations[0].animations.splice(p,1)}}c={animations:[],beginTime:e.layers[1].animations[0].animations[0].animations[0].beginTime+.03,duration:e.layers[1].animations[0].animations[0].animations[0].duration,fillMode:"forwards",from:{scalar:false},property:"hidden",timingFunction:"linear",to:{scalar:false}};e.layers[1].animations[0].animations[0].animations.push(c);s.layers[1].animations[0].animations[0].animations.push(c)}}break;default:break}},adjustEffectsForFirefox:function(a,i){switch(a.name){case"apple:scale":var" e="i.baseLayer.layers[0];var" s="a.baseLayer.layers[0];if(e.layers[0].animations.length">0){var t=e.layers[0];e.layers[0]=e.layers[1];e.layers[1]=t;e.layers[1].initialState.hidden=true;var n=s.layers[0];s.layers[0]=s.layers[1];s.layers[1]=n;s.layers[1].initialState.hidden=true;var r=e.layers[1].animations[0].beginTime;var o=e.layers[1].animations[0].duration;var l=e.layers[1].animations[0].animations[0].beginTime;var m=e.layers[1].animations[0].animations[0].duration;var d;if(r==l){for(var y=0,c=e.layers[1].animations[0].animations.length;y<c;y++){if(e.layers[1].animations[0].animations[y].property==="transform.translation.z"){e.layers[1].animations[0].animations.splice(y,1);s.layers[1].animations[0].animations.splice(y,1)}}d={animations:[],begintime:r,duration:o,fillmode:"forwards",from:{scalar:false},property:"hidden",timingfunction:"linear",to:{scalar:false}};e.layers[1].animations[0].animations.push(d);s.layers[1].animations[0].animations.push(d)}else{for(var y="0,c=e.layers[1].animations[0].animations[0].animations.length;y<c;y++){if(e.layers[1].animations[0].animations[0].animations[y].property==="transform.translation.z"){e.layers[1].animations[0].animations[0].animations.splice(y,1);s.layers[1].animations[0].animations[0].animations.splice(y,1)}}d={animations:[],beginTime:e.layers[1].animations[0].animations[0].animations[0].beginTime+.03,duration:e.layers[1].animations[0].animations[0].animations[0].duration,fillMode:"forwards",from:{scalar:false},property:"hidden",timingFunction:"linear",to:{scalar:false}};e.layers[1].animations[0].animations[0].animations.push(d);s.layers[1].animations[0].animations[0].animations.push(d)}}break;case"com.apple.iWork.Keynote.KLNSwap":var" e="i.baseLayer.layers[0];var" s="a.baseLayer.layers[0];var" m,p,h,f,v;if(e.layers[1].animations[0].animations.length="">1){for(var y=0,c=e.layers[1].animations[0].animations.length;y<c;y++){f=e.layers[1].animations[0].animations[y];v=s.layers[1].animations[0].animations[y];if(f.property==="opacity"){break}}m=e.layers[1].animations[0].duration}else{for(var y="0,c=e.layers[1].animations[0].animations[0].animations.length;y<c;y++){f=e.layers[1].animations[0].animations[0].animations[y];v=s.layers[1].animations[0].animations[0].animations[y];if(f.property==="opacity"){break}}m=e.layers[1].animations[0].animations[0].duration}p=m*.4;h=m*.4;f.to.scalar=0;f.beginTime=p;f.duration=h;v.to.scalar=0;v.beginTime=p;v.duration=h;break;default:break}},adjustScriptForIE:function(){for(var" a="0,i=this.script.events.length;a<i;a++){var" e="this.script.events[a];var" s="this.script.originalEvents[a];for(var" t="0,n=e.effects.length;t<n;t++){var" r="e.effects[t];var" o="s.effects[t];this.adjustEffectsForIE(r,o);this.adjustEmphasisBuilds(r,o)}for(var" m="e.hyperlinks[t];var" d="s.hyperlinks[t];for(var" in="" m.events){var="" c="m.events[y];var" p="d.events[y];for(var" h="0,n=c.effects.length;h<n;h++){var" f="c.effects[h];var" v="p.effects[h];this.adjustEffectsForIE(f,v);this.adjustEmphasisBuilds(f,v)}}}}},adjustEffectsForIE:function(a,i){switch(a.name){case"apple:bounce":case"apple:slide":case"apple:pivot":case"apple:scale":var">0){var t=e.layers[0];e.layers[0]=e.layers[1];e.layers[1]=t;e.layers[1].initialState.hidden=true;var n=s.layers[0];s.layers[0]=s.layers[1];s.layers[1]=n;s.layers[1].initialState.hidden=true;var r=e.layers[1].animations[0].beginTime;var o=e.layers[1].animations[0].duration;var l=e.layers[1].animations[0].animations[0].beginTime;var m=e.layers[1].animations[0].animations[0].duration;var d;if(r==l){for(var y=0,c=e.layers[1].animations[0].animations.length;y<c;y++){if(e.layers[1].animations[0].animations[y].property==="transform.translation.z"){e.layers[1].animations[0].animations.splice(y,1);s.layers[1].animations[0].animations.splice(y,1)}}d={animations:[],begintime:r,duration:o,fillmode:"forwards",from:{scalar:false},property:"hidden",timingfunction:"linear",to:{scalar:false}};e.layers[1].animations[0].animations.push(d);s.layers[1].animations[0].animations.push(d)}else{for(var y="0,c=e.layers[1].animations[0].animations[0].animations.length;y<c;y++){if(e.layers[1].animations[0].animations[0].animations[y].property==="transform.translation.z"){e.layers[1].animations[0].animations[0].animations.splice(y,1);s.layers[1].animations[0].animations[0].animations.splice(y,1)}}d={animations:[],beginTime:e.layers[1].animations[0].animations[0].animations[0].beginTime+.03,duration:e.layers[1].animations[0].animations[0].animations[0].duration,fillMode:"forwards",from:{scalar:false},property:"hidden",timingFunction:"linear",to:{scalar:false}};e.layers[1].animations[0].animations[0].animations.push(d);s.layers[1].animations[0].animations[0].animations.push(d)}}break;case"apple:doorway":var" e="i.baseLayer.layers[0];var" s="a.baseLayer.layers[0];var" r="e.layers[0].animations[0].beginTime;var" o="e.layers[0].animations[0].duration;var" l="e.layers[0].animations[0].animations[0].beginTime;var" m="e.layers[0].animations[0].animations[0].duration;e.layers[0].layers=[];e.layers[0].animations=[];s.layers[0].layers=[];s.layers[0].animations=[];if(r==l){e.layers[1].animations[0].animations[0].beginTime=l;e.layers[1].animations[0].animations[0].duration=m;s.layers[1].animations[0].animations[0].beginTime=l;s.layers[1].animations[0].animations[0].duration=m}else{e.layers[1].animations[0].animations[0].animations[0].duration=m;s.layers[1].animations[0].animations[0].animations[0].duration=m}e.layers.splice(2,1);s.layers.splice(2,1);break;case"com.apple.iWork.Keynote.BLTBlinds":case"apple:3D-cube":case"com.apple.iWork.Keynote.BLTReflection":case"apple:revolve":case"com.apple.iWork.Keynote.BLTRevolvingDoor":var" p;p="{animations:[],beginTime:0,duration:i.duration,fillMode:"both",from:{scalar:1},property:"opacity",timingFunction:"easeInEaseOut",to:{scalar:0}};e.layers[0].layers=[];e.layers[0].animations=[];e.layers[1].layers=[];e.layers[1].animations=[];e.layers[1].animations.push(p);s.layers[0].layers=[];s.layers[0].animations=[];s.layers[1].layers=[];s.layers[1].animations=[];s.layers[1].animations.push(p);if(a.name==="com.apple.iWork.Keynote.BLTBlinds"){e.layers[0].initialState.hidden=false;e.layers[1].initialState.hidden=false;s.layers[0].initialState.hidden=false;s.layers[1].initialState.hidden=false;e.layers.splice(2,e.layers.length-2);s.layers.splice(2,s.layers.length-2)}break;case"com.apple.iWork.Keynote.KLNSwap":var" m,h,f,v,p;if(e.layers[1].animations[0].animations.length="">1){for(var y=0,c=e.layers[1].animations[0].animations.length;y<c;y++){v=e.layers[1].animations[0].animations[y];p=s.layers[1].animations[0].animations[y];if(v.property==="opacity"){break}}m=e.layers[1].animations[0].duration}else{for(var y="0,c=e.layers[1].animations[0].animations[0].animations.length;y<c;y++){v=e.layers[1].animations[0].animations[0].animations[y];p=s.layers[1].animations[0].animations[0].animations[y];if(v.property==="opacity"){break}}m=e.layers[1].animations[0].animations[0].duration}h=m*.4;f=m*.4;v.to.scalar=0;v.beginTime=h;v.duration=f;p.to.scalar=0;p.beginTime=h;p.duration=f;break;case"apple:FlipThrough":var" e="i.baseLayer.layers[0];var" s="a.baseLayer.layers[0];if(e.layers[0].animations.length">0){var t=JSON.parse(JSON.stringify(e.layers[1]));e.layers.splice(0,0,t);var n=JSON.parse(JSON.stringify(s.layers[1]));s.layers.splice(0,0,n);var r=e.layers[1].animations[0].beginTime;var o=e.layers[1].animations[0].duration;var l=e.layers[1].animations[0].animations[0].beginTime;var m=e.layers[1].animations[0].animations[0].duration;var d;if(r==l){for(var y=0,c=e.layers[1].animations[0].animations.length;y<c;y++){if(e.layers[1].animations[0].animations[y].property==="transform.translation.z"){e.layers[1].animations[0].animations.splice(y,1);s.layers[1].animations[0].animations.splice(y,1)}}d={animations:[],begintime:r+o 2,duration:o="" 2,fillmode:"forwards",from:{scalar:true},property:"hidden",timingfunction:"linear",to:{scalar:true}};e.layers[2].animations[0].animations.push(d);s.layers[2].animations[0].animations.push(d)}else{for(var="" y="0,c=e.layers[1].animations[0].animations[0].animations.length;y<c;y++){if(e.layers[1].animations[0].animations[0].animations[y].property==="transform.translation.z"){e.layers[1].animations[0].animations[0].animations.splice(y,1);s.layers[1].animations[0].animations[0].animations.splice(y,1)}}d={animations:[],beginTime:e.layers[2].animations[0].animations[0].animations[0].beginTime+e.layers[2].animations[0].animations[0].animations[0].duration/2,duration:e.layers[2].animations[0].animations[0].animations[0].duration/2,fillMode:"forwards",from:{scalar:true},property:"hidden",timingFunction:"linear",to:{scalar:true}};e.layers[2].animations[0].animations[0].animations.push(d);s.layers[2].animations[0].animations[0].animations.push(d)}}break;default:break}},handleSlideDidNotDownloadEvent:function(a){this.scriptDidNotDownload.bind(this)},reapplyScaleFactor:function(){if(this.delegate.setViewScale){this.applyScaleFactor();this.delegate.setViewScale(this.scaleFactor)}},applyScaleFactorForAnimation:function(a,i,e){var" s="a.property;if(a.path){for(var" t="0,n=a.path.length;t<n;t++){var" r="a.path[t].points;var" o="i.path[t].points;r[0][0]=o[0][0]*e;r[0][1]=o[0][1]*e}}switch(s){case"anchorPointZ":case"zPosition":case"transform.translation.x":case"transform.translation.y":if(a.from){a.from.scalar=i.from.scalar*e}if(a.to){a.to.scalar=i.to.scalar*e}if(a.values){for(var" l="o.contentsRect;r.affineTransform[4]=o.affineTransform[4]*e;r.affineTransform[5]=o.affineTransform[5]*e;r.width=o.width*e;r.height=o.height*e;r.position.pointX=o.position.pointX*e;r.position.pointY=o.position.pointY*e;switch(s){case"com.apple.iWork.Keynote.BLTBlinds":case"com.apple.iWork.Keynote.BLTMosaicFlip":this.adjustForCropAnimation(r,l,n.particleCount.x,n.particleCount.y);break;case"com.apple.iWork.Keynote.BLTReflection":var" m="a.texture;if(m!=null){var" d="this.script.slides[t].assets[m];if(d.assetRequest.state==="incoming-reflection"||d.assetRequest.state==="outgoing-reflection"){r.height=r.height/2;r.position.pointY=r.position.pointY-r.height/2}}break;default:break}if(a.animations){for(var" n="0,r=a.layers.length;n<r;n++){this.applyScaleFactorForBaseLayer(a.layers[n],i.layers[n],e)}},applyScaleFactor:function(){var" a="this.script.originalSlideWidth;var" i="this.script.originalSlideHeight;var" e="window.innerWidth;var" c="this.script.slideIndexFromSceneIndexLookup[l];var" p="this.script.slideList[c];this.applyScaleFactorForBaseLayer(d.baseLayer,y.baseLayer,o);for(var" h="0,f=d.effects.length;h<f;h++){var" v="d.effects[h];var" u="y.effects[h];var" g="{};if(v.name==="com.apple.iWork.Keynote.BLTMosaicFlip"||v.name==="com.apple.iWork.Keynote.BLTBlinds"){var" w="0,F=v.baseLayer.layers[0].layers.length;w<F;w++){var" k="T.initialState.contentsRect;var">S){S=L}if(D>b){b=D}}g.particleCount={x:S+1,y:b+1}}this.applyScaleFactorForLayer(v.baseLayer,u.baseLayer,o,v.name,p,g)}for(var h=0,E=d.hyperlinks.length;h<e;h++){var m="d.hyperlinks[h];var" x="y.hyperlinks[h];var" b="M.targetRectangle;var" n="x.targetRectangle;B.y=N.y*o;B.x=N.x*o;B.width=N.width*o;B.height=N.height*o;for(var" j="" in="" m.events){var="" c="M.events[j];var" i="x.events[j];for(var" w="0,f=C.effects.length;W<f;W++){var" z="C.effects[W];var" g="{};if(z.name==="com.apple.iWork.Keynote.BLTMosaicFlip"||z.name==="com.apple.iWork.Keynote.BLTBlinds"){var" s="0,b=0;for(var" t="z.baseLayer.layers[0].layers[w];var" k="T.initialState.contentsRect;var" l="Math.round(k.x/k.width);var" d="Math.round(k.y/k.height);if(L">S){S=L}if(D>b){b=D}}g.particleCount={x:S+1,y:b+1}}this.applyScaleFactorForLayer(z.baseLayer,J.baseLayer,o,z.name,p,g)}}}}for(var K in this.script.slides){if(this.script.slides.hasOwnProperty(K)){var O=this.script.slides[K];var X=this.script.originalSlides[K];for(var R in O.assets){if(O.assets.hasOwnProperty(R)){var P=O.assets[R];var Y=X.assets[R];P.width=Y.width*o;P.height=Y.height*o}}}}},adjustForCropAnimation:function(a,i,e,s){var t=this.script.slideWidth;var n=this.script.slideHeight;var r=Math.floor(t/e);var o=Math.floor(n/s);var l=Math.round(i.x/i.width);var m=Math.round(i.y/i.height);if(i.width!=1||i.height!=1){if(l!=e-1){a.width=r}else{a.width=t-r*(e-1)}if(m!=s-1){a.height=o}else{a.height=n-o*(s-1)}a.position.pointX=r*l+a.width/2;a.position.pointY=o*m+a.height/2;a.contentsRect.x=r*l/t;a.contentsRect.y=o*m/n;a.contentsRect.width=a.width/t;a.contentsRect.height=a.height/n}},downloadScript:function(a){this.delegate=a;if(this.delegate.getKPFJsonStringForShow){this.script=JSON.parse(this.delegate.getKPFJsonStringForShow());if(this.script==null){debugMessageAlways(kDebugScriptMangaer_DownloadScript,"An error occured on the server. KPF header json is null.");return}this.slideManager=new SlideManager({header:this.script});this.slideManager.getSlides(this.script.slideList,this.delegate);return}this.downloadTimeout=setTimeout(this.scriptDidNotDownload.bind(this),kMaxScriptDownloadWaitTime);this.downloadAlreadyFailed=false;var i=this.showUrl+"header.json";if(window.location.protocol==="file:"){i=i+"p";window.local_header=function(a){this.scriptDidDownload(a,true)}.bind(this);var e=document.createElement("script");e.setAttribute("src",i);document.head.appendChild(e)}else{new Ajax.Request(i,{method:"get",onSuccess:this.scriptDidDownload.bind(this),onFailure:this.scriptDidNotDownload.bind(this)})}},scriptDidDownload:function(a,i){clearTimeout(this.downloadTimeout);if(i){this.script=a}else{this.script=JSON.parse(a.responseText)}this.slideManager=new SlideManager({header:this.script});this.slideManager.downloadSlides(this.script.slideList)},scriptDidNotDownload:function(a){this.downloadAlreadyFailed=true;if(a){clearTimeout(this.downloadTimeout)}document.fire(kScriptDidNotDownloadEvent,{})},sceneIndexFromSlideIndex:function(a){if(this.script==null||a<0||a>=this.script.slideList.length){return-1}return this.script.sceneIndexFromSlideIndexLookup[a]},slideIndexFromSceneIndex:function(a){if(this.script==null||a<0||a>=this.script.events.length){return-1}return this.script.slideIndexFromSceneIndexLookup[a]}});</0||a></0||a></e;h++){var></c;y++){if(e.layers[1].animations[0].animations[y].property==="transform.translation.z"){e.layers[1].animations[0].animations.splice(y,1);s.layers[1].animations[0].animations.splice(y,1)}}d={animations:[],begintime:r+o></c;y++){v=e.layers[1].animations[0].animations[y];p=s.layers[1].animations[0].animations[y];if(v.property==="opacity"){break}}m=e.layers[1].animations[0].duration}else{for(var></c;y++){if(e.layers[1].animations[0].animations[y].property==="transform.translation.z"){e.layers[1].animations[0].animations.splice(y,1);s.layers[1].animations[0].animations.splice(y,1)}}d={animations:[],begintime:r,duration:o,fillmode:"forwards",from:{scalar:false},property:"hidden",timingfunction:"linear",to:{scalar:false}};e.layers[1].animations[0].animations.push(d);s.layers[1].animations[0].animations.push(d)}else{for(var></c;y++){f=e.layers[1].animations[0].animations[y];v=s.layers[1].animations[0].animations[y];if(f.property==="opacity"){break}}m=e.layers[1].animations[0].duration}else{for(var></c;y++){if(e.layers[1].animations[0].animations[y].property==="transform.translation.z"){e.layers[1].animations[0].animations.splice(y,1);s.layers[1].animations[0].animations.splice(y,1)}}d={animations:[],begintime:r,duration:o,fillmode:"forwards",from:{scalar:false},property:"hidden",timingfunction:"linear",to:{scalar:false}};e.layers[1].animations[0].animations.push(d);s.layers[1].animations[0].animations.push(d)}else{for(var></h;p++){if(e.layers[1].animations[0].animations[p].property==="transform.translation.z"){e.layers[1].animations[0].animations.splice(p,1);s.layers[1].animations[0].animations.splice(p,1)}}c={animations:[],begintime:t,duration:n,fillmode:"forwards",from:{scalar:false},property:"hidden",timingfunction:"linear",to:{scalar:false}};e.layers[1].animations[0].animations.push(c);s.layers[1].animations[0].animations.push(c)}else{for(var></y;d++){this.script.events.push(s[d]);this.script.originalevents.push(t[d]);this.script.slideindexfromsceneindexlookup[m]=o;m+=1}o+=1;l=m}}this.script.numscenes=this.script.events.length;this.script.lastsceneindex=this.script.numscenes-1;this.script.lastslideindex=this.script.slidelist.length-1;this.script.originalslidewidth=this.script.slidewidth;this.script.originalslideheight=this.script.slideheight;if(isie||isedge){this.adjustscriptforie()}else{this.adjustscript()}if(this.delegate.setviewscale){this.applyscalefactor();this.delegate.setviewscale(this.scalefactor)}if(this.delegate.isusingpreloadedfont&&this.delegate.isusingpreloadedfont()){var>