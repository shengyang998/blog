<!DOCTYPE html><html><head><meta charset="utf-8"><title>PAT 1141 Python C++ 解题 | Tech. Design. Life.</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="题源：https://www.patest.cn/contests/pat-a-practise/1141注意，对于最后两个测试点，使用 Python 语言会超时，从前三个测试点来看，同样的逻辑下 Python 的速度大概是 C++ 的 14%，嗯，太慢了……"><meta name="keywords" content="PAT"><meta property="og:type" content="article"><meta property="og:title" content="PAT 1141 Python C++ 解题"><meta property="og:url" content="http://blog.superyoung.win/2018/03/20/pat/advanced_level/1141/index.html"><meta property="og:site_name" content="Tech. Design. Life."><meta property="og:description" content="题源：https://www.patest.cn/contests/pat-a-practise/1141注意，对于最后两个测试点，使用 Python 语言会超时，从前三个测试点来看，同样的逻辑下 Python 的速度大概是 C++ 的 14%，嗯，太慢了……"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2018-04-04T11:21:50.499Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="PAT 1141 Python C++ 解题"><meta name="twitter:description" content="题源：https://www.patest.cn/contests/pat-a-practise/1141注意，对于最后两个测试点，使用 Python 语言会超时，从前三个测试点来看，同样的逻辑下 Python 的速度大概是 C++ 的 14%，嗯，太慢了……"><link rel="alternate" href="/atom.xml" title="Tech. Design. Life." type="application/atom+xml"><link rel="icon" href="/favicon.png"><link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/css/style.css"></head></html><body><div id="container"><div id="wrap"><header id="header"><div id="banner"></div><div id="header-outer" class="outer"><div id="header-title" class="inner"><h1 id="logo-wrap"><a href="/" id="logo">Tech. Design. Life.</a></h1></div><div id="header-inner" class="inner"><nav id="main-nav"><a id="main-nav-toggle" class="nav-icon"></a> <a class="main-nav-link" href="/">首页</a> <a class="main-nav-link" href="/archives">归档</a></nav><nav id="sub-nav"><a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a> <a id="nav-search-btn" class="nav-icon" title="搜索"></a></nav><div id="search-form-wrap"><form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.superyoung.win"></form></div></div></div></header><div class="outer"><section id="main"><article id="post-pat/advanced_level/1141" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2018/03/20/pat/advanced_level/1141/" class="article-date"><time datetime="2018-03-20T15:02:54.036Z" itemprop="datePublished">2018-03-20</time></a></div><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">PAT 1141 Python C++ 解题</h1></header><div class="article-entry" itemprop="articleBody"><p>题源：<a href="https://www.patest.cn/contests/pat-a-practise/1141" target="_blank" rel="noopener">https://www.patest.cn/contests/pat-a-practise/1141</a></p><p>注意，对于最后两个测试点，使用 Python 语言会超时，从前三个测试点来看，同样的逻辑下 Python 的速度大概是 C++ 的 14%，嗯，太慢了……<br><a id="more"></a></p><p>OK，照例，</p><h2 id="先看题目："><a href="#先看题目：" class="headerlink" title="先看题目："></a>先看题目：</h2><blockquote><p>After each PAT, the PAT Center will announce the ranking of institutions based on their students’ performances. Now you are asked to generate the ranklist.<br><strong>Input Specification</strong>:<br>Each input file contains one test case. For each case, the first line gives a positive integer N (&lt;=10^5), which is the number of testees. Then N lines follow, each gives the information of a testee in the following format:<br><strong>ID Score School</strong><br>where “ID” is a string of 6 characters with the first one representing the test level: “B” stands for the basic level, “A” the advanced level and “T” the top level; “Score” is an integer in [0, 100]; and “School” is the institution code which is a string of no more than 6 English letters (case insensitive). Note: it is guaranteed that “ID” is unique for each testee.<br><strong>Output Specification</strong>:<br>For each case, first print in a line the total number of institutions. Then output the ranklist of institutions in nondecreasing order of their ranks in the following format:<br><strong>Rank School TWS Ns</strong><br>where “Rank” is the rank (start from 1) of the institution; “School” is the institution code (all in lower case); “TWS” is the total weighted score which is defined to be the integer part of <code>&quot;ScoreB/1.5 + ScoreA + ScoreT*1.5&quot;</code>, where “ScoreX” is the total score of the testees belong to this institution on level X; and “Ns” is the total number of testees who belong to this institution.<br>The institutions are ranked according to their TWS. If there is a tie, the institutions are supposed to have the same rank, and they shall be printed in ascending order of Ns. If there is still a tie, they shall be printed in alphabetical order of their codes.</p></blockquote><h3 id="限制"><a href="#限制" class="headerlink" title="限制"></a>限制</h3><ul><li>时间限制：500ms</li><li>内存限制：65537kB</li></ul><h3 id="输入输出要求"><a href="#输入输出要求" class="headerlink" title="输入输出要求"></a>输入输出要求</h3><p>题目大概意思就是说，对于每次 PAT 考试，我们会对每个学校进行排名。</p><ul><li>输入格式是<code>N</code>，<code>ID Score School</code></li><li>输出格式是<code>N</code>，<code>Rank School TWS Ns</code><br>其中：</li><li>N 是队伍总数（N&lt;=100000）</li><li>M 是学校总数</li><li>ID 是一个定长 6 个字符的字符串，第一位取值范围：’T’, ‘A’, ‘B’</li><li>Score 是该 ID 队伍的成绩</li><li>School 就是学校名称了是一个不定长的字符串</li><li>Rank 是排名，注意题目要求：非递减——就是可以连续相同的 rank，数学上可以叫驻点</li><li>TWS 是学校的总成绩，计算公式：<code>ScoreB/1.5 + ScoreA + ScoreT*1.5</code>，这里的 Score[TAB] 对应上面 ID 的第一位 [TAB]</li><li>Ns 是学校参赛队伍数量</li></ul><h3 id="排序规则："><a href="#排序规则：" class="headerlink" title="排序规则："></a>排序规则：</h3><p>首先按照 TWS 递减排序。<br>如果 TWS 相同，按照 Ns 递增排序。<br>如果 Ns 相同，按照学校名称的字母表顺序排序</p><p>啊哈，看到这道题有什么思路吗？</p><ul><li>看到这道题应该有的大致思路：<ol><li>使用字典（哈希表）来保存<code>学校名</code>和<code>学校</code></li><li>读取数据到字典(Complexity: O(N));</li><li>对字典，按照要求，进行排序(Complexity: O(2NlogN) or worst: O(2N^2));</li><li>输出，这里要注意排名（rank）的显示要求——非递减;</li></ol></li></ul><ol><li>想说其实这道题思路并不难，但是这道题的确花了我不少时间，因为最后两个测试点（5 points）总是超时。就算使用 Cpp unoredered_map 的处理时间也接近了 490ms，好悬。10^5 的数据量不敢小觑。</li><li>一开始选择数据结构的时候，我使用了标准库的 map 结构，大概可以当做一个红黑树。所以不管什么插入删除操作大概都是 O(logN) 的复杂度，这个复杂度太高了。后来改用 unorderd_map 结构，也即是哈希表，嗯，插入的时间复杂度接近 O(1) 了，很好。这里要感谢一下 Cpp 标准库，从 map 迁移到 unordered_map 只改了两处类型签名而已，非常方便。</li><li>为了让代码结构清晰，我设立了两个类，一个是 School 一个是 Result。</li><li>Result 中只有一个成员变量，其类型是： unordered_map<string ,="" school*=""></string></li><li>在 School 中，存放了学校的名称、总成绩、队伍数。值得提一下的是：为了避免冗余的强制类型转换 (double) -&gt; (long) 我使用一个惰性计算的技巧，即增加一个成员变量 long sc，在调用 get_score() 的时候才计算出 sc 的值，而如果 sc 已经被计算过了，那就直接返回 sc 的值。也算是一点点优化吧。</li><li>其他的比如说 cin 缓慢的问题（cin 会判断输入类型是否匹配，会比 scanf 慢），就没时间改了，如果有兴趣自己改改吧，也不难。</li></ol><p>照例（好吧，这是我第一次有机会写 PAT 的解题过程，没有前例^_^）<br>Cpp 代码如下：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unordered_map&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="comment">//#define DEBUG</span></div><div class="line"><span class="keyword">namespace</span> My &#123;</div><div class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></div><div class="line">	<span class="keyword">long</span> cntlog = <span class="number">0</span>;</div><div class="line">	<span class="keyword">template</span> &lt;<span class="keyword">class</span> Tp&gt;</div><div class="line">	<span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">log</span><span class="params">(Tp x, <span class="built_in">string</span> lv = <span class="string">"INFO"</span>)</span> </span>&#123;</div><div class="line">		My::cntlog++;</div><div class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"--&gt; "</span> &lt;&lt; lv &lt;&lt; <span class="string">" "</span> &lt;&lt; x &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</div><div class="line">	&#125;</div><div class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">class</span> School &#123; <span class="comment">// Class for saving status of each institution</span></div><div class="line">	<span class="built_in">string</span> name;</div><div class="line">	<span class="keyword">int</span> counter;</div><div class="line">	<span class="keyword">double</span> score;</div><div class="line">	<span class="keyword">long</span> sc; <span class="comment">// save time, for the convertion from double to long is somehow expensive</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">	School(<span class="built_in">string</span> &amp;name, <span class="keyword">double</span> score, <span class="keyword">char</span> level) &#123;</div><div class="line">		<span class="keyword">this</span>-&gt;name = name;</div><div class="line">		<span class="keyword">this</span>-&gt;counter = <span class="number">0</span>;</div><div class="line">		<span class="keyword">this</span>-&gt;score = <span class="number">0</span>;</div><div class="line">		<span class="keyword">this</span>-&gt;sc = <span class="number">-1</span>;</div><div class="line">		<span class="keyword">this</span>-&gt;append(score, level);</div><div class="line">	&#125;</div><div class="line">	<span class="function">School* <span class="title">append</span><span class="params">(<span class="keyword">double</span> score, <span class="keyword">char</span> level)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>-&gt;counter++;</div><div class="line">		<span class="keyword">double</span> lv = <span class="number">1.0</span>;</div><div class="line">		<span class="keyword">if</span> (level == <span class="string">'B'</span>)</div><div class="line">			lv = <span class="number">2.0</span> / <span class="number">3.0</span>;</div><div class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (level == <span class="string">'T'</span>)</div><div class="line">			lv = <span class="number">1.5</span>;</div><div class="line">		<span class="keyword">this</span>-&gt;score += score * lv;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">get_counter</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>-&gt;counter;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">get_score</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span>(<span class="keyword">this</span>-&gt;sc == <span class="number">-1</span>)&#123;</div><div class="line">			<span class="keyword">this</span>-&gt;sc = <span class="keyword">long</span>(<span class="keyword">this</span>-&gt;score);	<span class="comment">// In the test case as the `Sample Input`, this line will be hit 5 times</span></div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>-&gt;sc;					<span class="comment">// and this line will be hit 49 times. So this `lazy initial tech` should save some time.</span></div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="built_in">string</span> <span class="title">get_name</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>-&gt;name;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">class</span> Result &#123; <span class="comment">// Class for saving the result, containing an unordered map of &lt;school name, School&gt;</span></div><div class="line">	<span class="built_in">unordered_map</span> &lt;<span class="built_in">string</span>, School*&gt; d;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">append</span><span class="params">(<span class="built_in">string</span> school_name, <span class="keyword">int</span> score, <span class="keyword">char</span> level)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (d.find(school_name) == d.end())</div><div class="line">			d.insert(pair &lt;<span class="built_in">string</span>, School*&gt; (school_name, <span class="keyword">new</span> School(school_name, score, level)));</div><div class="line">		<span class="keyword">else</span></div><div class="line">			d[school_name]-&gt;append(score, level);</div><div class="line">	&#125;</div><div class="line">	<span class="built_in">vector</span>&lt;pair&lt;<span class="built_in">string</span>, School*&gt;&gt;&amp; sort() &#123; <span class="comment">// sort function. use a lambda to costumize, and return a sorted vector</span></div><div class="line">		<span class="keyword">auto</span> cmp = [&amp;](<span class="keyword">const</span> pair &lt;<span class="built_in">string</span>, School*&gt; &amp;lhs, <span class="keyword">const</span> pair &lt;<span class="built_in">string</span>, School*&gt; &amp;rhs) -&gt; <span class="keyword">bool</span> &#123;</div><div class="line">			<span class="keyword">if</span> (lhs.second-&gt;get_score() == rhs.second-&gt;get_score()) &#123;</div><div class="line">				<span class="keyword">if</span> (lhs.second-&gt;get_counter() == rhs.second-&gt;get_counter())</div><div class="line">					<span class="keyword">return</span> lhs.second-&gt;get_name() &lt; rhs.second-&gt;get_name();</div><div class="line">				<span class="keyword">else</span></div><div class="line">					<span class="keyword">return</span> lhs.second-&gt;get_counter() &lt; rhs.second-&gt;get_counter();</div><div class="line">			&#125; <span class="keyword">else</span>&#123;</div><div class="line">				<span class="keyword">return</span> lhs.second-&gt;get_score() &gt; rhs.second-&gt;get_score();</div><div class="line">			&#125;</div><div class="line">		&#125;;</div><div class="line">		<span class="built_in">vector</span>&lt;pair&lt;<span class="built_in">string</span>, School*&gt;&gt; *vec = <span class="keyword">new</span> <span class="built_in">vector</span>&lt;pair&lt;<span class="built_in">string</span>, School*&gt;&gt;(<span class="keyword">this</span>-&gt;d.begin(), <span class="keyword">this</span>-&gt;d.end());</div><div class="line">		<span class="built_in">std</span>::sort(vec-&gt;begin(), vec-&gt;end(), cmp);</div><div class="line">		<span class="keyword">return</span> *vec;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> N;</div><div class="line">	<span class="built_in">cin</span> &gt;&gt; N;</div><div class="line">	Result* res = <span class="keyword">new</span> Result();</div><div class="line">	<span class="keyword">while</span> (N--) &#123;</div><div class="line">		<span class="keyword">char</span> level[<span class="number">7</span>];</div><div class="line">		<span class="keyword">int</span> score;</div><div class="line">		<span class="built_in">string</span> name;</div><div class="line">		<span class="built_in">cin</span> &gt;&gt; level &gt;&gt; score &gt;&gt; name;</div><div class="line">		<span class="keyword">char</span> lv = level[<span class="number">0</span>];</div><div class="line">		transform(name.begin(), name.end(), name.begin(), ::<span class="built_in">tolower</span>); 	<span class="comment">// transform the school name to lower case</span></div><div class="line">		res-&gt;append(name, score, lv);									<span class="comment">// append to the result (as an unordered map)</span></div><div class="line">	&#125;</div><div class="line">	<span class="built_in">vector</span>&lt;pair&lt;<span class="built_in">string</span>, School*&gt;&gt; r = res-&gt;sort();						<span class="comment">// sort the result and return a vector</span></div><div class="line">	<span class="keyword">unsigned</span> <span class="keyword">long</span> n = r.size();</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; n &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	<span class="keyword">unsigned</span> <span class="keyword">long</span> cnt = <span class="number">1</span>, i = <span class="number">0</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> iter = r.begin(); iter != r.end(); iter++) &#123;</div><div class="line">		i++;</div><div class="line">		<span class="keyword">if</span> (iter != r.begin() and iter-&gt;second-&gt;get_score() != (iter - <span class="number">1</span>)-&gt;second-&gt;get_score()) &#123; <span class="comment">// calculate the rank of each institution (Complexity: O(1), so the outter for loop is O(N))</span></div><div class="line">			cnt = i;</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">cout</span> &lt;&lt; cnt &lt;&lt; <span class="string">" "</span> &lt;&lt; iter-&gt;second-&gt;get_name() &lt;&lt; <span class="string">" "</span> &lt;&lt; iter-&gt;second-&gt;get_score() &lt;&lt; <span class="string">" "</span> &lt;&lt; iter-&gt;second-&gt;get_counter() &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>Python 代码如下：(代码短，容易理解。逻辑和 C++ 代码一样，只是最后两个测试点超时)<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">School</span>:</span></div><div class="line">	name = <span class="string">''</span></div><div class="line">	score = <span class="number">0</span></div><div class="line">	counter = <span class="number">0</span></div><div class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, school_name, score, level)</span>:</span></div><div class="line">		self.name = school_name</div><div class="line">		self.append(score, level)</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">def</span> <span class="title">append</span><span class="params">(self, score, level)</span>:</span></div><div class="line">		self.counter += <span class="number">1</span></div><div class="line">		lv = <span class="number">1</span></div><div class="line">		<span class="keyword">if</span> level == <span class="string">'B'</span>:</div><div class="line">			lv = <span class="number">2</span>/<span class="number">3</span></div><div class="line">		<span class="keyword">elif</span> level == <span class="string">'T'</span>:</div><div class="line">			lv = <span class="number">1.5</span></div><div class="line">		self.score += score * lv</div><div class="line">		<span class="keyword">return</span> self</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">def</span> <span class="title">set_score_to_int</span><span class="params">(self)</span>:</span></div><div class="line">		self.score = int(self.score)</div><div class="line">		<span class="keyword">return</span> self</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">	s = int(input())</div><div class="line">	d = &#123;&#125;</div><div class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(s):</div><div class="line">		t = input().split(<span class="string">' '</span>)</div><div class="line">		level = t[<span class="number">0</span>][<span class="number">0</span>]</div><div class="line">		score = int(t[<span class="number">1</span>])</div><div class="line">		school_name = t[<span class="number">2</span>].lower()</div><div class="line">		<span class="keyword">if</span> school_name <span class="keyword">in</span> d.keys():</div><div class="line">			d[school_name].append(score, level)</div><div class="line">		<span class="keyword">else</span>:</div><div class="line">			d[school_name] = School(school_name, score, level)</div><div class="line">	d = sorted(d.items(), key=<span class="keyword">lambda</span> x: [-x[<span class="number">1</span>].score, x[<span class="number">1</span>].counter, x[<span class="number">0</span>]])	<span class="comment"># Could cost most of the time</span></div><div class="line">	print(len(d))</div><div class="line">	cnt = <span class="number">1</span></div><div class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(len(d)):</div><div class="line">		<span class="keyword">if</span> i &gt; <span class="number">0</span> <span class="keyword">and</span> int(d[i][<span class="number">1</span>].score) != int(d[i<span class="number">-1</span>][<span class="number">1</span>].score):</div><div class="line">			cnt = i+<span class="number">1</span></div><div class="line">		print(<span class="string">"&#123;0&#125; &#123;1&#125; &#123;2&#125; &#123;3&#125;"</span>.format(cnt, d[i][<span class="number">1</span>].name, int(d[i][<span class="number">1</span>].score), d[i][<span class="number">1</span>].counter))</div></pre></td></tr></table></figure><p></p></div><footer class="article-footer"><a data-url="http://blog.superyoung.win/2018/03/20/pat/advanced_level/1141/" data-id="cjezuenz10000vifymput4a9k" class="article-share-link">Share</a> <a href="http://blog.superyoung.win/2018/03/20/pat/advanced_level/1141/#disqus_thread" class="article-comment-link">留言</a><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PAT/">PAT</a></li></ul></footer></div><nav id="article-nav"><a href="/2018/04/03/notes/why_number_should_start_at_zero/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">Newer</strong><div class="article-nav-title">为什么 Python 的 Range 要设计成左开右闭区间？为什么数组下标要从零开始？</div></a><a href="/2018/01/25/notes/install_tensorflow_from_source_for_macos/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Older</strong><div class="article-nav-title">Instruction of Installing TensorFlow From Source</div></a></nav></article><section id="comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></section></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">标签云</h3><div class="widget tagcloud"><a href="/tags/ARC/" style="font-size:10px">ARC</a> <a href="/tags/Bit-plane/" style="font-size:10px">Bit-plane</a> <a href="/tags/Block/" style="font-size:10px">Block</a> <a href="/tags/Class/" style="font-size:10px">Class</a> <a href="/tags/Coming-soon/" style="font-size:13.33px">Coming soon...</a> <a href="/tags/Command/" style="font-size:10px">Command</a> <a href="/tags/Computation/" style="font-size:10px">Computation</a> <a href="/tags/Coordinate/" style="font-size:10px">Coordinate</a> <a href="/tags/DATE/" style="font-size:10px">DATE</a> <a href="/tags/DATETIME/" style="font-size:10px">DATETIME</a> <a href="/tags/DataFrame/" style="font-size:10px">DataFrame</a> <a href="/tags/DataSource/" style="font-size:10px">DataSource</a> <a href="/tags/Debug/" style="font-size:10px">Debug</a> <a href="/tags/Delegate/" style="font-size:10px">Delegate</a> <a href="/tags/Difference/" style="font-size:11.67px">Difference</a> <a href="/tags/Digital/" style="font-size:10px">Digital</a> <a href="/tags/Driver/" style="font-size:10px">Driver</a> <a href="/tags/Emacs/" style="font-size:10px">Emacs</a> <a href="/tags/Enum/" style="font-size:10px">Enum</a> <a href="/tags/Experience/" style="font-size:10px">Experience</a> <a href="/tags/G/" style="font-size:10px">G++</a> <a href="/tags/GCC/" style="font-size:10px">GCC</a> <a href="/tags/GDB/" style="font-size:10px">GDB</a> <a href="/tags/GNU/" style="font-size:10px">GNU</a> <a href="/tags/Git/" style="font-size:10px">Git</a> <a href="/tags/GitHub/" style="font-size:10px">GitHub</a> <a href="/tags/Grubbs/" style="font-size:10px">Grubbs</a> <a href="/tags/Guide/" style="font-size:11.67px">Guide</a> <a href="/tags/High-Sierra/" style="font-size:10px">High Sierra</a> <a href="/tags/Image/" style="font-size:10px">Image</a> <a href="/tags/Installation/" style="font-size:10px">Installation</a> <a href="/tags/LLDB/" style="font-size:10px">LLDB</a> <a href="/tags/Language/" style="font-size:11.67px">Language</a> <a href="/tags/Linux/" style="font-size:11.67px">Linux</a> <a href="/tags/Matlab/" style="font-size:11.67px">Matlab</a> <a href="/tags/MySQL/" style="font-size:10px">MySQL</a> <a href="/tags/OS-X/" style="font-size:11.67px">OS X</a> <a href="/tags/ObjC/" style="font-size:10px">ObjC</a> <a href="/tags/Objective-C/" style="font-size:15px">Objective C</a> <a href="/tags/PAT/" style="font-size:10px">PAT</a> <a href="/tags/Pages/" style="font-size:10px">Pages</a> <a href="/tags/Pandas/" style="font-size:10px">Pandas</a> <a href="/tags/Parallel/" style="font-size:10px">Parallel</a> <a href="/tags/Path/" style="font-size:10px">Path</a> <a href="/tags/Photoshop/" style="font-size:10px">Photoshop</a> <a href="/tags/Processing/" style="font-size:10px">Processing</a> <a href="/tags/Programming/" style="font-size:20px">Programming</a> <a href="/tags/Python/" style="font-size:13.33px">Python</a> <a href="/tags/Redirect/" style="font-size:10px">Redirect</a> <a href="/tags/Rules/" style="font-size:10px">Rules</a> <a href="/tags/RxSwift/" style="font-size:11.67px">RxSwift</a> <a href="/tags/SVN/" style="font-size:10px">SVN</a> <a href="/tags/Science/" style="font-size:10px">Science</a> <a href="/tags/Sequence/" style="font-size:10px">Sequence</a> <a href="/tags/Series/" style="font-size:10px">Series</a> <a href="/tags/Server/" style="font-size:13.33px">Server</a> <a href="/tags/Shell/" style="font-size:11.67px">Shell</a> <a href="/tags/Sierra/" style="font-size:10px">Sierra</a> <a href="/tags/Spotlight/" style="font-size:10px">Spotlight</a> <a href="/tags/Struct/" style="font-size:10px">Struct</a> <a href="/tags/Swift/" style="font-size:16.67px">Swift</a> <a href="/tags/System/" style="font-size:10px">System</a> <a href="/tags/TIMESTAMP/" style="font-size:10px">TIMESTAMP</a> <a href="/tags/TenserFlow/" style="font-size:10px">TenserFlow</a> <a href="/tags/Tutorial/" style="font-size:11.67px">Tutorial</a> <a href="/tags/UIAlertController/" style="font-size:10px">UIAlertController</a> <a href="/tags/UITableView/" style="font-size:10px">UITableView</a> <a href="/tags/Unit/" style="font-size:10px">Unit</a> <a href="/tags/Wavelet/" style="font-size:10px">Wavelet</a> <a href="/tags/Working/" style="font-size:10px">Working</a> <a href="/tags/autoclosure/" style="font-size:10px">autoclosure</a> <a href="/tags/blog/" style="font-size:10px">blog</a> <a href="/tags/filter/" style="font-size:10px">filter</a> <a href="/tags/hexo/" style="font-size:10px">hexo</a> <a href="/tags/iOS/" style="font-size:18.33px">iOS</a> <a href="/tags/instance/" style="font-size:10px">instance</a> <a href="/tags/keyboard/" style="font-size:10px">keyboard</a> <a href="/tags/language/" style="font-size:10px">language</a> <a href="/tags/lazy-evaluation/" style="font-size:10px">lazy evaluation</a> <a href="/tags/log/" style="font-size:10px">log</a> <a href="/tags/macOS/" style="font-size:11.67px">macOS</a> <a href="/tags/map/" style="font-size:10px">map</a> <a href="/tags/parfor/" style="font-size:10px">parfor</a> <a href="/tags/reduce/" style="font-size:10px">reduce</a> <a href="/tags/type/" style="font-size:11.67px">type</a> <a href="/tags/which/" style="font-size:10px">which</a> <a href="/tags/优化算法/" style="font-size:10px">优化算法</a> <a href="/tags/优化问题/" style="font-size:10px">优化问题</a> <a href="/tags/修图/" style="font-size:10px">修图</a> <a href="/tags/入门/" style="font-size:10px">入门</a> <a href="/tags/响应式/" style="font-size:11.67px">响应式</a> <a href="/tags/噪声/" style="font-size:10px">噪声</a> <a href="/tags/坐标系统/" style="font-size:10px">坐标系统</a> <a href="/tags/小波/" style="font-size:10px">小波</a> <a href="/tags/开发/" style="font-size:11.67px">开发</a> <a href="/tags/异常值/" style="font-size:10px">异常值</a> <a href="/tags/教程/" style="font-size:11.67px">教程</a> <a href="/tags/服务器/" style="font-size:11.67px">服务器</a> <a href="/tags/机器学习/" style="font-size:10px">机器学习</a> <a href="/tags/模拟退火算法/" style="font-size:10px">模拟退火算法</a> <a href="/tags/神经网络/" style="font-size:10px">神经网络</a> <a href="/tags/缺失值/" style="font-size:10px">缺失值</a> <a href="/tags/遗传算法/" style="font-size:10px">遗传算法</a> <a href="/tags/配置/" style="font-size:11.67px">配置</a> <a href="/tags/降噪/" style="font-size:10px">降噪</a></div></div><div class="widget-wrap"><h3 class="widget-title">最新文章</h3><div class="widget"><ul><li><a href="/2018/04/03/notes/why_number_should_start_at_zero/">为什么 Python 的 Range 要设计成左开右闭区间？为什么数组下标要从零开始？</a></li><li><a href="/2018/03/20/pat/advanced_level/1141/">PAT 1141 Python C++ 解题</a></li><li><a href="/2018/01/25/notes/install_tensorflow_from_source_for_macos/">Instruction of Installing TensorFlow From Source</a></li><li><a href="/2017/10/28/learning_emacs/start_server/">Setting Up Emacs Server to Speed Up Your Emacs</a></li><li><a href="/2017/10/07/learning_python/compile_executable_with_cython/">用 Cython 把 Python 文件编译成可执行文件</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">归档</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li></ul></div></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">&copy; 2018 Yu Shengyang<br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></div></div></footer><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?c2f3493bffeb398373d9cda4fd1c6636";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>!function(e,t,a,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=t.createElement(a),s=t.getElementsByTagName(a)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-91049921-1","auto"),ga("send","pageview")</script></div><nav id="mobile-nav"><a href="/" class="mobile-nav-link">首页</a> <a href="/archives" class="mobile-nav-link">归档</a></nav><script>var disqus_shortname="blog-ysy",disqus_url="http://blog.superyoung.win/2018/03/20/pat/advanced_level/1141/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script src="/js/script.js"></script></div></body>