<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Tech. Design. Life.</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.superyoung.win/"/>
  <updated>2017-02-04T10:05:23.000Z</updated>
  <id>http://blog.superyoung.win/</id>
  
  <author>
    <name>Yu Shengyang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>OO vs FP</title>
    <link href="http://blog.superyoung.win/2017/02/04/learning_programming_principles/oovsfp/"/>
    <id>http://blog.superyoung.win/2017/02/04/learning_programming_principles/oovsfp/</id>
    <published>2017-02-04T08:44:50.000Z</published>
    <updated>2017-02-04T10:05:23.000Z</updated>
    
    <content type="html"><![CDATA[<p>OO or FP? Whatâ€™s relationship between them?</p><p>A friend of mine posted the following on facebook. He meant it as a troll; and it worked, because it irked me.</p><p><img src="/images/Programming/oovsfp.jpg" alt="oovsfp"><br><a id="more"></a></p><p><em>This is a post that translated from <a href="http://blog.cleancoder.com/uncle-bob/2014/11/24/FPvsOO.html" target="_blank" rel="external">The Clean Coder Blog</a></em></p><p>There are many programmers who have said similar things over the years. They consider Object Orientation and Functional Programming to be mutually exclusive forms of programming. From their ivory towers in the clouds some FP super-beings occasionally look down on the poor naive OO programmers and cluck their tongues.</p><p>That clucking is echoed by the OO super-beings in their ivory towers, who look askance at the waste and parentheses pollution of functional languages.</p><p>These views are based on a deep ignorance of what OO and FP really are.</p><p>Let me make a few points:</p><ul><li><p>OO is not about state. é¢å‘å¯¹è±¡ä¸æ˜¯å…³äºçŠ¶æ€çš„</p><p>Objects are not data structures. Objects may use data structures; but the manner in which those data structures are used or contained is hidden. This is why data fields are private. From the outside looking in you cannot see any state. All you can see are functions. Therefore Objects are about functions not about state.</p><p>å¯¹è±¡ä¸æ˜¯æ•°æ®ç»“æ„ï¼Œå¯¹è±¡å¯èƒ½ä½¿ç”¨æ•°æ®ç»“æ„ï¼Œä½†æ˜¯æ•°æ®ç»“æ„è¢«ä½¿ç”¨çš„æ–¹å¼æ˜¯è¢«éšè—çš„ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ•°æ®åŸŸå¾€å¾€æ˜¯<code>private</code>çš„ã€‚ä»å¯¹è±¡çš„å¤–é¢å¾€é‡Œé¢çœ‹ï¼Œä½ å°†ä¸èƒ½çœ‹åˆ°ä»»ä½•çŠ¶æ€ï¼Œä½ èƒ½çœ‹åˆ°çš„åªæœ‰<code>functions</code>ã€‚å› æ­¤ï¼Œå¯¹è±¡æ˜¯å…³äºå‡½æ•°çš„è€Œä¸æ˜¯å…³äºçŠ¶æ€çš„ã€‚</p><p>When objects are used as data structures it is a design smell; and it always has been. When tools like Hibernate call themselves object-relational mappers, they are incorrect. ORMs donâ€™t map relational data to objects; they map relational data to data structures. Those data structures are not objects.</p><p>å¦‚æœå¯¹è±¡è¢«ç”¨åšæ•°æ®ç»“æ„ï¼Œé‚£å°±æ˜¯ä¸€ä¸ªè®¾è®¡é—®é¢˜äº†ã€‚å½“åƒ <code>Hibernate</code> è¿™æ ·çš„å·¥å…·è°ƒç”¨ä»–ä»¬è‡ªå·±çš„ <code>object-relational mappers</code> æ—¶å°†ä¼šå‘ç”Ÿé”™è¯¯ã€‚<code>å¯¹è±¡å…³ç³»æ˜ å°„ORM</code> ä¸æ˜ å°„ relational data to objectsï¼Œä»–ä»¬æ˜ å°„ relational data to data structuresã€‚é‚£äº›æ•°æ®ç»“æ„ä¸æ˜¯å¯¹è±¡ã€‚</p><p>Objects are bags of functions, not bags of data.</p><p>å¯¹è±¡ä¸€å †å‡½æ•°è€Œä¸æ˜¯ä¸€å †æ•°æ®ã€‚</p></li><li><p>Functional Programs, like OO Programs, are composed of functions that operate on data. å‡½æ•°å¼ç¨‹åºå’Œé¢å‘å¯¹è±¡ç¨‹åºä¸€æ ·ï¼Œæ˜¯ç”±æ“ä½œæ•°æ®çš„å‡½æ•°ç»„æˆçš„</p><p>You might protest and suggest that it is the manner of that binding that matters. But think about it. Thatâ€™s silly. Is there really so much difference between f(o), o.f(), and (f o)? Are we really saying that the difference is just about the syntax of a function call?[0]</p><p><code>f(0)</code>, <code>o.f()</code>, <code>(f o)</code>ä¹‹é—´æœ‰å¾ˆå¤§ä¸åŒå—ï¼Ÿ</p></li></ul><h2 id="The-Differences"><a href="#The-Differences" class="headerlink" title="The Differences"></a>The Differences</h2><p>So what are the differences between OO and FP? What does OO have that FP doesnâ€™t, and what does FP have that OO doesnâ€™t?</p><p>æ‰€ä»¥ OO å’Œ FP åˆ°åº•æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ</p><ol><li><p>FP imposes discipline upon assignment. å‡½æ•°å¼ç¼–ç¨‹èµ‹å€¼å‡†åˆ™ã€‚</p><p>A true functional programming language has no assignment operator. You cannot change the state of a variable. Indeed, the word â€œvariableâ€ is a misnomer in a functional language because you cannot vary them.</p><p>å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€æ²¡æœ‰èµ‹å€¼æ“ä½œç¬¦ã€‚ä½ ä¸èƒ½æ”¹å˜ä¸€ä¸ªå˜é‡çš„çŠ¶æ€ï¼Œå®é™…ä¸Šï¼Œå‡½æ•°å¼è¯­è¨€æ ¹æœ¬æ²¡æœ‰å˜é‡å¯è¨€ï¼Œå› ä¸ºä½ ä¸å¯ä»¥æ”¹å˜ä»–ä»¬ã€‚</p><p>Yes, I know, Funcitonal Programmers often say hi-falutinâ€™ things like â€œFunctions are first-class objects in functional languages.â€ That may be true; but functions are first-class objects in Smalltalk, and Smalltalk is an OO language, not a functional language.</p><p>The overriding difference between a functional language and a non-functional language is that functional languages donâ€™t have assignment statements.[1]</p><p>OO å’Œ FP ä¹‹é—´çš„é‡è¦åŒºåˆ«å°±æ˜¯ FP æ²¡æœ‰å¤åˆ¶è¯­å¥ã€‚</p><p>Does this mean that you can never change the state of something in a functional language? No, not at all. Functional languages generally offer ceremonies that you can perform in order to change the state of something. F# allows you to declare â€œmutable variablesâ€ for example. Clojure allows you to create special, uh, objects whoâ€™s values can be changed using various magic incantations.</p><p>è¿™ä¸æ„å‘³ç€ä½ æ°¸è¿œä¸èƒ½æ”¹å˜ä¸€ä¸ªä¸œè¥¿çš„å€¼ã€‚æ¯”å¦‚â€¦â€¦</p><p>The point is that a functional language imposes some kind of ceremony or discipline on changes of state. You have to jump through the right hoops in order to do it.</p><p>And so, for the most part, you donâ€™t.</p></li><li><p>OO imposes discipline on function pointers. é¢å‘å¯¹è±¡å‡½æ•°æŒ‡é’ˆå‡†åˆ™ã€‚</p><p>â€œHuh?â€ you say. But that, in fact, is what OO comes down to. For all the hi-falutinâ€™ rhetoric about OO and â€œreal-world objectsâ€ and â€œprogramming closer to the way we thinkâ€, what OO really comes down to is that OO languages replace function pointers with convenient polymorphism. [2]</p><p>How do you implement polymorphism? You implement it with function pointers. OO languages simply do that implementation for you, and hide the function pointers from you. This is nice because function pointers are very difficult to manage well. Trying to write polymorphic code with function pointers (as in C) depends on complex and inconvenient conventions that everyone must follow in every case. This is usually unrealistic.</p><p>In Java, every function you call is polymorphic. There is no way you can call a function that is not polymorphic. And that means that every java function is called indirectly through a pointer to a function.[3]</p><p>If you wanted polymophism in C, youâ€™d have to manage those pointers yourself; and thatâ€™s hard. If you wanted polymorphism in Lisp youâ€™d have to manage those pointers yourself (pass them in as arguments to some higher level algorithm (which, by the way IS the Strategy pattern.)) But in an OO language, those pointers are managed for you. The language takes care to initialize them, and marshal them, and call all the functions through them.</p></li></ol><h2 id="Mutually-Exclusive-å®Œå…¨ä¸ç›¸å®¹ï¼Ÿ"><a href="#Mutually-Exclusive-å®Œå…¨ä¸ç›¸å®¹ï¼Ÿ" class="headerlink" title="Mutually Exclusive? å®Œå…¨ä¸ç›¸å®¹ï¼Ÿ"></a>Mutually Exclusive? å®Œå…¨ä¸ç›¸å®¹ï¼Ÿ</h2><p>Are these two disciplines mutually exclusive? Can you have a language that imposes discipline on both assignment and pointers to functions? Of course you can. These two things donâ€™t have anything to do with each other. And that means that <code>OO and FP are not mutually exclusive at all</code>. It means that you can write OO-Functional programs.</p><p>å‡½æ•°å¼ç¼–ç¨‹å’Œé¢å‘å¯¹è±¡ç¼–ç¨‹å¹¶ä¸æ˜¯å®Œå…¨ä¸ç›¸å®¹çš„ã€‚ä½ å®Œå…¨å¯ä»¥å†™<code>OO-Functional</code>ç¨‹åºã€‚</p><p>It also means that all the design principles, and design patterns, used by OO programmers can be used by functional programmers if they care to accept the discipline that OO imposes on their pointers to functions.</p><p>But why would a functional programmer do that? What benefit does polymorphism have that normal Functional Programs donâ€™t have? By the same token, what benefit would OO programmers gain from imposing discipline on assignment?</p><p>ä½†æ˜¯ä¸ºä»€ä¹ˆä¸€ä¸ªå‡½æ•°å¼ç¼–ç¨‹è¦æ±‚ç¨‹åºå‘˜è¿™æ ·åšï¼ŸOO åˆæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿä»å¦ä¸€æ–¹é¢æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨é¢å‘å¯¹è±¡ç¨‹åºä¸­å®è¡Œå‡½æ•°å¼ç¼–ç¨‹ä¸­çš„èµ‹å€¼å‡†åˆ™æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p><h2 id="Benefits-of-Polymorphism-å¤šæ€æ€§çš„ä¼˜åŠ¿"><a href="#Benefits-of-Polymorphism-å¤šæ€æ€§çš„ä¼˜åŠ¿" class="headerlink" title="Benefits of Polymorphism å¤šæ€æ€§çš„ä¼˜åŠ¿"></a>Benefits of Polymorphism å¤šæ€æ€§çš„ä¼˜åŠ¿</h2><p>There really is only one benefit to Polymorphism; but itâ€™s a big one. It is the inversion of source code and run time dependencies.</p><p>In most software systems when one function calls another, the runtime dependency and the source code dependency point in the same direction. The calling module depends on the called module. However, when polymorphism is injected between the two there is an inversion of the source code dependency. The calling module still depends on the called module at run time. However, the source code of the calling module does not depend upon the source code of the called module. Rather both modules depend upon a polymorphic interface.</p><p>This inversion allows the called module to act like a plugin. Indeed, this is how all plugins work.</p><p>Plugin architectures are very robust because stable high value business rules can be kept from depending upon volatile low value modules such as user interfaces and databases.</p><p>The net result is that in order to be robust a system must employ polymorphism across significant architectural boundaries.</p><h2 id="Benefits-of-Immutability-ä¸å¯å˜çš„ä¼˜åŠ¿"><a href="#Benefits-of-Immutability-ä¸å¯å˜çš„ä¼˜åŠ¿" class="headerlink" title="Benefits of Immutability ä¸å¯å˜çš„ä¼˜åŠ¿"></a>Benefits of Immutability ä¸å¯å˜çš„ä¼˜åŠ¿</h2><p>The benefit of not using assignment statements should be obvious. You canâ€™t have concurrent update problems if you never update anything.</p><p>ä¸ä½¿ç”¨èµ‹å€¼è¯­å¥çš„ä¼˜åŠ¿æ˜¯æ˜æ˜¾çš„ï¼šå½“ä½ æ›´æ–°ä»»ä½•ä¸œè¥¿çš„æ—¶å€™ï¼Œä¸ä¼šæœ‰ä»»ä½•æ›´æ–°é—®é¢˜å‘ç”Ÿã€‚</p><p>Since functional programming languages do not have assignment statements, programs written in those languages donâ€™t change the state of very many variables. Mutation is reserved for very specific sections of the system that can tolerate the high ceremony required. Those sections are inherently safe from multiple threads and multiple cores.</p><p>è€Œä¸”å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€æ²¡æœ‰èµ‹å€¼è¯­å¥ï¼Œå¯¼è‡´äº†ä½¿ç”¨è¿™ç§è¯­è¨€å†™çš„ç¨‹åºä¸ä¼šæ”¹å˜å˜é‡çš„çŠ¶æ€ã€‚æ‰€ä»¥å¯ä»¥å¾ˆå®¹æ˜“çš„è®©ç¼–è¯‘å™¨è¿›è¡Œå¤šçº¿ç¨‹ä¼˜åŒ–ã€‚</p><p>The bottom line is that functional programs are much safer in multiprocessing and multiprocessor environments.</p><h2 id="The-Deep-Philosophies"><a href="#The-Deep-Philosophies" class="headerlink" title="The Deep Philosophies"></a>The Deep Philosophies</h2><p>Of course adherents to both Object Orientation and Functional Programming will protest my reductionist analysis. They will contend that there are deep philosophical, psychological, and mathematical reasons why their favorite style is better than the other.</p><p>My reaction to that is: Phooey!</p><p>Everybody thinks their way is the best. Everybody is wrong.<br>What about Design Principles, and Design Patterns?</p><p>The passage at the start of this article that irked me suggests that all the design principles and design patterns that weâ€™ve identified over the last several decades apply only to OO; and that Functional Programming reduces them all down to: functions.</p><p>Wow! Talk about being reductionist!</p><p>This idea is bonkers in the extreme. The principles of software design still apply, regardless of your programming style. The fact that youâ€™ve decided to use a language that doesnâ€™t have an assignment operator does not mean that you can ignore the Single Responsibility Principle; or that the Open Closed Principle is somehow automatic. The fact that the Strategy pattern makes use of polymorphism does not mean that the pattern cannot be used in a good functional language[4].</p><p>The bottom, bottom line here is simply this. OO programming is good, when you know what it is. Functional programming is good when you know what it is. And functional OO programming is also good once you know what it is.</p><blockquote><ol><li>I imagine there are a few python programmers who might have something to say about that.</li><li>This, of course, means that Scala is not a â€œtrueâ€ functional language.</li><li>This, of course, means that C++ is not a â€œtrueâ€ OO language.</li><li>Yeah, donâ€™t say it, I know. OK, an â€œanalogâ€ to a pointer to a function. (sigh).</li><li>A good functional language is one that allows for convenient polymorphism. Clojure is a good example.</li></ol></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;OO or FP? Whatâ€™s relationship between them?&lt;/p&gt;&lt;p&gt;A friend of mine posted the following on facebook. He meant it as a troll; and it worked, because it irked me.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/images/Programming/oovsfp.jpg&quot; alt=&quot;oovsfp&quot;&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="Programming" scheme="http://blog.superyoung.win/tags/Programming/"/>
    
      <category term="Principle" scheme="http://blog.superyoung.win/tags/Principle/"/>
    
      <category term="Object Orientation" scheme="http://blog.superyoung.win/tags/Object-Orientation/"/>
    
      <category term="Functional Programming" scheme="http://blog.superyoung.win/tags/Functional-Programming/"/>
    
      <category term="OO" scheme="http://blog.superyoung.win/tags/OO/"/>
    
      <category term="FP" scheme="http://blog.superyoung.win/tags/FP/"/>
    
  </entry>
  
  <entry>
    <title>An Introduction to Map(), flatMap(), Reduce() and Filter() in Swift</title>
    <link href="http://blog.superyoung.win/2017/02/02/learning_swift/map_reduce_filter/"/>
    <id>http://blog.superyoung.win/2017/02/02/learning_swift/map_reduce_filter/</id>
    <published>2017-02-02T06:26:48.000Z</published>
    <updated>2017-02-03T05:56:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘æ›¾ç»å¾ˆå¥½å¥‡ map(), flatMap(), reduce() å’Œ filter() å‡½æ•°æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Œæ˜¯æ€ä¹ˆå®ç°çš„ã€‚åœ¨æˆ‘é˜…è¯»äº† Swift æºç è¿˜æœ‰ä¸€äº›æ–‡ç« ä»¥åï¼Œæˆ‘è§‰å¾—æ˜¯æ—¶å€™åˆ†äº«ä¸€ä¸‹äº†ã€‚</p><p>I have been wondering a long time about what the map() function, reduce() function and filter() function have done. After reading many passages and <a href="https://github.com/apple/swift/blob/master/stdlib/public/core/" target="_blank" rel="external">the source code of swift</a>, I think it is time to summerize what I have got. Besides, I hope this post can help someone who want to but not yet understand these function to understand them.</p><a id="more"></a><h2 id="Higher-order-function-é«˜é˜¶å‡½æ•°"><a href="#Higher-order-function-é«˜é˜¶å‡½æ•°" class="headerlink" title="Higher-order function é«˜é˜¶å‡½æ•°"></a>Higher-order function é«˜é˜¶å‡½æ•°</h2><p>é¦–å…ˆæ¥æä¸€ä¸‹é«˜é˜¶å‡½æ•°ï¼Œåœ¨ Wikipedia ä¸­æ˜¯è¿™æ ·å®šä¹‰é«˜é˜¶å‡½æ•°çš„ï¼š</p><blockquote><p>é«˜é˜¶å‡½æ•° Higher-order function<br>åœ¨æ•°å­¦å’Œè®¡ç®—æœºç§‘å­¦ï¼Œä¸€ä¸ªé«˜é˜¶å‡½æ•°æ˜¯ä¸€ä¸ªè‡³å°‘æ»¡è¶³ä»¥ä¸‹ä¸€ä¸ªæ¡ä»¶çš„å‡½æ•°ï¼š<br>In mathematics and computer science, a higher-order function (also functional, functional form or functor) is a function that does at least one of the following:</p><ul><li>æ¥æ”¶ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‡½æ•°ä½œä¸ºå‚æ•° takes one or more functions as arguments (i.e., procedural parameters),</li><li>è¿”å›ä¸€ä¸ªå‡½æ•°ä½œä¸ºç»“æœ returns a function as its result.</li></ul></blockquote><p>An example in Swift:<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">twice</span><span class="params">(<span class="number">_</span> f: @escaping <span class="params">(Int)</span></span></span> -&gt; <span class="type">Int</span>) -&gt; (<span class="type">Int</span>) -&gt; <span class="type">Int</span> </div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> &#123; f( f($<span class="number">0</span>) ) &#125; </div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">(<span class="number">_</span> arg: Int)</span></span> -&gt; <span class="type">Int</span> &#123; </div><div class="line">    <span class="keyword">return</span> arg + <span class="number">3</span> </div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> g = twice(f)</div><div class="line"><span class="built_in">print</span>(g(<span class="number">7</span>)) <span class="comment">// 13</span></div></pre></td></tr></table></figure><p></p><p>The function signature in swift is ugly, so here is another example in Haskell:<br></p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="title">twice</span> :: (a -&gt; a) -&gt; (a -&gt; a)</div><div class="line"><span class="title">twice</span> f = f . f <span class="comment">-- ç‚¹å·è¡¨ç¤ºå‡½æ•°å¤åˆ</span></div><div class="line"></div><div class="line"><span class="title">minus3</span> :: <span class="type">Num</span> a =&gt; a -&gt; a</div><div class="line"><span class="title">minus3</span> n = n + <span class="number">3</span></div><div class="line"></div><div class="line"><span class="title">main</span> :: <span class="type">IO</span> ()</div><div class="line"><span class="title">main</span> = print (twice minus3 <span class="number">7</span>) <span class="comment">-- 13</span></div></pre></td></tr></table></figure><p></p><p>And in JavaScript:<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> twice = <span class="function">(<span class="params">f, v</span>) =&gt;</span> f( f(v) );</div><div class="line"><span class="keyword">const</span> f = <span class="function"><span class="params">v</span> =&gt;</span> v + <span class="number">3</span>;</div><div class="line"><span class="built_in">console</span>.log( twice(f, <span class="number">7</span>) ); <span class="comment">// 13</span></div></pre></td></tr></table></figure><p></p><p>So, the function <code>twice</code> which take a function as a parameter is a Higher-order function.</p><p>è€Œæˆ‘ä»¬è¦è®²çš„ map(), flatMap(), reduce() and filter() éƒ½æ˜¯é«˜é˜¶å‡½æ•°ï¼Œå› ä¸ºä»–ä»¬éƒ½è‡³å°‘éƒ½æ¥å—ä¸€ä¸ªå‡½æ•°ï¼ˆé—­åŒ…ï¼‰ä½œä¸ºå‚æ•°ã€‚</p><h2 id="è¿™å››ä¸ªå‡½æ•°åˆ†åˆ«æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ"><a href="#è¿™å››ä¸ªå‡½æ•°åˆ†åˆ«æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ" class="headerlink" title="è¿™å››ä¸ªå‡½æ•°åˆ†åˆ«æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ"></a>è¿™å››ä¸ªå‡½æ•°åˆ†åˆ«æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</h2><p>é¦–å…ˆç®€å•è®²è®² map() å’Œ flatMap() ä»¥åŠä»–ä»¬ä¹‹é—´çš„åŒºåˆ«</p><ul><li><p><code>map</code> å¯ä»¥ç†è§£æˆã€Œæ˜ å°„ã€ã€‚å°±åƒæ•°å­¦ä¸­å‡½æ•°çš„æ˜ å°„ä¸€æ ·ã€‚ä½†æ˜¯ map() ä½œä¸º <code>SequenceType</code> ç±»çš„å®ä¾‹æ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼ˆé—­åŒ…ï¼‰ä½œä¸ºå‚æ•°ï¼Œç„¶å <code>map()</code> ä¼šæŠŠ <code>SequenceType</code> çš„å®ä¾‹ä¸­çš„æ¯ä¸€é¡¹éƒ½åº”ç”¨å‡½æ•°ï¼ˆé—­åŒ…ï¼‰ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</p></li><li><p><code>flatMap()</code> å’Œ <code>map()</code> åŠŸèƒ½å·®ä¸å¤šï¼Œä½†æ˜¯ flatMap æœ‰ç‚¹å¤æ‚ï¼Œå®ƒæœ‰ä¸¤ä¸ªé‡è½½å‡½æ•°ã€‚åœ¨ç¬¬ä¸€ä¸ªé‡è½½å‡½æ•°é‡Œï¼Œ <code>flatMap()</code> è¿”å›ä¸€ä¸ªè¢«å‹å¹³äº†çš„ç»“æœåºåˆ—ï¼ˆæ­¤æ—¶ map å°†ä¼šè¿”å›ä¸€ä¸ªåµŒå¥—åºåˆ—ï¼‰ï¼›è€Œç¬¬äºŒä¸ªé‡è½½å‡½æ•°é‡Œ <code>flatMap()</code> çš„è¿”å›åºåˆ—ä¸­æ²¡æœ‰ nilã€‚å…·ä½“åŒºåˆ«å¯ä»¥åœ¨ä¸‹é¢çš„æºç ä¸­è¯¦ç»†äº†è§£ã€‚</p></li><li><p><code>reduce(_ initialResult: _ nextPartialResult:(_ partialResult: Iterator.Element:))</code> æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š</p><ol><li><code>initialResult</code> æ¥å—çš„å‚æ•°ä»£è¡¨ç»“æœçš„åˆå§‹å€¼ï¼Œ</li><li><code>nextPartialResult(_ partialResult: Iterator.Element:)</code> æ¥å—ä¸€ä¸ªé—­åŒ…ï¼Œè¿™ä¸ªé—­åŒ…å°†ä¼šè¢«åº”ç”¨åœ¨è¯¥åºåˆ—çš„æ‰€æœ‰å…ƒç´ ä¸Šï¼Œè¿™ä¸ªé—­åŒ…çš„å‚æ•°<code>partialResult</code>ä»£è¡¨å·²ç»è®¡ç®—äº†çš„éƒ¨åˆ†ç»“æœï¼Œè€Œ<code>Iterator.Element</code>åˆ™æ˜¯è¯¥åºåˆ—å¯¹æ¯ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ã€‚</li></ol><ul><li>ç®€è€Œè¨€ä¹‹ï¼Œ<code>reduce()</code>çš„ä½œç”¨æ˜¯ç»™è¯¥åºåˆ—çš„æ¯ä¸ªå…ƒç´ åº”ç”¨ä¼ å…¥çš„é—­åŒ…ï¼Œäº§ç”Ÿä¸€ä¸ªå•ä¸€å€¼çš„ç»“æœã€‚å…·ä½“å®ç°å¯ä»¥çœ‹ä¸‹é¢çš„æºç ï¼Œè¿™é‡Œä¸ºäº†è¯´æ˜å¾—æ›´æ¸…æ™°ï¼Œä¸¾ä¸€ä¸ªä½¿ç”¨ reduce è¿›è¡Œæ±‚å’Œçš„æ —å­ï¼Œä¸¤ç§å†™æ³•ã€‚<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ–¹æ³•1</span></div><div class="line"><span class="keyword">var</span> addResult = a.<span class="built_in">reduce</span>(<span class="number">0</span>, +)<span class="comment">// `+`åœ¨ Swift é‡Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å†™</span></div><div class="line"><span class="comment">// æ–¹æ³•2</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">justAdd</span><span class="params">(l: Int, r: Int)</span></span> -&gt; <span class="type">Int</span>&#123;</div><div class="line">    <span class="keyword">return</span> l + r</div><div class="line">&#125;</div><div class="line">addResult = a.<span class="built_in">reduce</span>(<span class="number">0</span>, justAdd)</div><div class="line"><span class="comment">// æ–¹æ³•3</span></div><div class="line">addResult = a.<span class="built_in">reduce</span>(<span class="number">0</span>, &#123; (res:<span class="type">Int</span>, e:<span class="type">Int</span>) -&gt; <span class="type">Int</span> <span class="keyword">in</span></div><div class="line">    <span class="keyword">return</span> res + e</div><div class="line">&#125;)</div></pre></td></tr></table></figure></li></ul></li></ul><p>ä»¥ä¸Šä¸‰ç§å†™æ³•çš„ç»“æœå®Œå…¨ä¸€æ ·ã€‚ä¸è¿‡è¯·å°½é‡ç”¨ç¬¬ä¸€äºŒç§å†™æ³•ï¼Œå› ä¸ºè¿™ä¸¤ç§å†™æ³•å¯ä»¥åœ¨å¾—åˆ°ç»“æœçš„åŒæ—¶å¢å¼ºä»£ç çš„å¯è¯»æ€§ã€‚å¦‚æœæƒ…å†µå¤æ‚ï¼Œè¯·å¤šä½¿ç”¨ç¬¬äºŒç§å†™æ³•ï¼Œè™½ç„¶ç•¥æ˜¾ç¹çï¼Œä½†æ˜¯å°†é€»è¾‘ç»†èŠ‚å°è£…èµ·æ¥çš„ä»£ç æ¯”è¾ƒæ˜“æ‡‚ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å¢åŠ å¯å¤ç”¨æ€§ã€‚å¦‚æœç¡®å®šæ­¤æ–¹æ³•åªä½¿ç”¨ä¸€æ¬¡ï¼Œè€Œä¸”éœ€è¦å¤„ç†çš„é€»è¾‘ä¸å¤ªå¤æ‚ï¼Œé‚£ä¹ˆå°½ç®¡ä½¿ç”¨ç¬¬ä¸‰ç§å†™æ³•å§ï¼Œå¿«æ·æ–¹ä¾¿ï¼ˆè™½ç„¶å¯è¯»æ€§å¯èƒ½ç•¥ä½ï¼Œè‡ªè¡Œé…Œæƒ…å¤„ç†ï¼‰ã€‚</p><ul><li><code>filter(_ isIncluded:(Iterator.Element) -&gt; Bool) -&gt; [Iterator.Element]</code> å°†åºåˆ—ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä¼ å…¥å‡½æ•°ï¼ˆé—­åŒ…ï¼‰ï¼Œå¦‚æœé—­åŒ…è¿”å›å€¼ä¸ºçœŸï¼Œåˆ™å¢åŠ åˆ° filter çš„è¿”å›åºåˆ—ä¸­ã€‚</li></ul><h2 id="å…³äº-throws-å’Œ-rethrows"><a href="#å…³äº-throws-å’Œ-rethrows" class="headerlink" title="å…³äº throws å’Œ rethrows"></a>å…³äº <code>throws</code> å’Œ <code>rethrows</code></h2><p>å…³äº <code>throws</code> å’Œ <code>rethrows</code>ï¼Œ <a href="http://robnapier.net/re-throws" target="_blank" rel="external">è¿™ç¯‡æ–‡ç« è®²å¾—æŒºæ¸…æ™°</a>ã€‚æœ€è¿‘è¦æ²¡æ—¶é—´äº†ï¼Œæœ‰ç©ºæˆ‘å†çœ‹çœ‹æ€ä¹ˆç¿»è¯‘è½¬è½½ä¸€ä¸‹ã€‚<br>ç®€å•æ¥è¯´ï¼šæ‰€æœ‰å£°æ˜äº†<code>throws</code>çš„å‡½æ•°éƒ½æ˜¯éœ€è¦å†™<code>try-catch</code>è¯­å¥çš„ï¼Œè€Œæœ‰æ—¶å€™çš„å‡½æ•°è°ƒç”¨ä¸ä¸€å®šä¼š<code>throws</code>ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½å†™<code>try-catch</code>å®åœ¨å¤ªéº»çƒ¦äº†ã€‚æœ‰ä¸€ä¸ªä¸´æ—¶çš„è§£å†³åŠæ³•å°±æ˜¯ã€Œé‡è½½ã€å¯¹åº”çš„æ–¹æ³•ï¼Œä¸€ä¸ªå‡½æ•°ç­¾åæœ‰<code>throws</code>ä¸€ä¸ªæ²¡æœ‰<code>throws</code>ï¼Œä½†æ˜¯è¿™æ ·è¿˜æ˜¯å¤ªéº»çƒ¦ï¼Œè€Œä¸”ä¸¤ä¸ªä¸åŒç­¾åçš„å‡½æ•°åšçš„äº‹æƒ…å±…ç„¶æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œéå¸¸ä¸æ–¹ä¾¿åæœŸç»´æŠ¤ã€‚<br>æœ€åSwift å¼€å‘å°ç»„è¯´è¦ä¼˜é›…ï¼Œäºæ˜¯å°±æœ‰äº†<code>rethrows</code>ã€‚å‡½æ•°ç­¾åä¸­æœ‰<code>rethrows</code>çš„å‡½æ•°ï¼Œå¯ä»¥<code>try-catch</code>è¯­å¥ä¹Ÿå¯ä»¥ä¸å†™ try-catch è¯­å¥ã€‚<code>rethrows</code>å°±æ˜¯ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜è€Œå­˜åœ¨çš„ã€‚æ‰€ä»¥æŸç§è§’åº¦ä¸Šæ¥è¯´ï¼Œä¹Ÿå¯ä»¥æŠŠ<code>rethrows</code>å½“åš<code>throws</code>çš„è¯­æ³•ç³–å§ã€‚<br>It is clear explained in <a href="http://robnapier.net/re-throws" target="_blank" rel="external">this passage</a> about key words <code>throws</code> and <code>rethrows</code> in the source code.</p><blockquote><p>å…¶å®ä»¥ä¸Šè®²çš„ï¼Œéƒ½æ¥è‡ª<a href="https://github.com/apple/swift/blob/master/" target="_blank" rel="external"><code>è¿™é‡Œ</code></a> æ¬¢è¿å¤§å®¶å‰å» clone ä¸‹æ¥ç ”ç©¶ã€‚Swift3 æœ‰äº›å‡½æ•°çš„æ•ˆç‡è¿˜èƒ½ä¼˜åŒ–ï¼Œå¦‚æœä½ å‘ç°äº†ä¼˜åŒ–ç‚¹ï¼Œåƒä¸‡ä¸è¦åæƒœäºæäº¤ issue ;&gt;<br><a href="https://github.com/apple/swift/blob/master/" target="_blank" rel="external"><code>here</code></a>. You are welcome to clone and studying with it.<br>Some functions in the lib are still not yet been optimized, and if you find any problem please donâ€™t begrudge submitting a issue ;&gt;</p></blockquote><p>æºç å°±ä¸ç¿»è¯‘äº†å“ˆï¼Œå†ç¿»è¯‘å°±æˆæ˜“è¯­è¨€äº† ğŸ˜‘</p><h2 id="Talk-is-cheap-show-me-the-code"><a href="#Talk-is-cheap-show-me-the-code" class="headerlink" title="Talk is cheap, show me the code"></a>Talk is cheap, show me the code</h2><p>Letâ€™s now go deeper:<br>You can find the source code of Sequence Type <code>map()</code> function <a href="https://github.com/apple/swift/blob/master/stdlib/public/core/Collection.swift" target="_blank" rel="external">here</a>. Here I quote it like:<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// Returns an array containing the results of mapping the given closure</span></div><div class="line"><span class="comment">/// over the sequence's elements.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// In this example, `map` is used first to convert the names in the array</span></div><div class="line"><span class="comment">/// to lowercase strings and then to count their characters.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">///     let cast = ["Vivien", "Marlon", "Kim", "Karl"]</span></div><div class="line"><span class="comment">///     let lowercaseNames = cast.map &#123; $0.lowercaseString &#125;</span></div><div class="line"><span class="comment">///     // 'lowercaseNames' == ["vivien", "marlon", "kim", "karl"]</span></div><div class="line"><span class="comment">///     let letterCounts = cast.map &#123; $0.characters.count &#125;</span></div><div class="line"><span class="comment">///     // 'letterCounts' == [6, 6, 3, 4]</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// - Parameter transform: A mapping closure. `transform` accepts an</span></div><div class="line"><span class="comment">///   element of this sequence as its parameter and returns a transformed</span></div><div class="line"><span class="comment">///   value of the same or of a different type.</span></div><div class="line"><span class="comment">/// - Returns: An array containing the transformed elements of this sequence. </span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">map</span>&lt;T&gt;<span class="params">(<span class="number">_</span> transform: <span class="params">(Iterator.Element)</span></span></span> <span class="keyword">throws</span> -&gt; <span class="type">T</span>) <span class="keyword">rethrows</span> -&gt; [<span class="type">T</span>] &#123;</div><div class="line">    <span class="comment">// <span class="doctag">TODO:</span> swift-3-indexing-model - review the following</span></div><div class="line">    <span class="keyword">let</span> <span class="built_in">count</span>: <span class="type">Int</span> = <span class="built_in">numericCast</span>(<span class="keyword">self</span>.<span class="built_in">count</span>)</div><div class="line">    <span class="keyword">if</span> <span class="built_in">count</span> == <span class="number">0</span> &#123;</div><div class="line">        <span class="keyword">return</span> []</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> result = <span class="type">ContiguousArray</span>&lt;<span class="type">T</span>&gt;()</div><div class="line">    result.reserveCapacity(<span class="built_in">count</span>)</div><div class="line">    <span class="keyword">var</span> i = <span class="keyword">self</span>.startIndex</div><div class="line">    <span class="keyword">for</span> <span class="number">_</span> <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="built_in">count</span> &#123;</div><div class="line">        result.append(<span class="keyword">try</span> transform(<span class="keyword">self</span>[i]))</div><div class="line">        formIndex(after: &amp;i)</div><div class="line">    &#125;</div><div class="line">    _expectEnd(of: <span class="keyword">self</span>, <span class="keyword">is</span>: i)</div><div class="line">    <span class="keyword">return</span> <span class="type">Array</span>(result)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>And Optional Type <code>map()</code> <a href="https://github.com/apple/swift/blob/master/stdlib/public/core/Optional.swift" target="_blank" rel="external">here</a><br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// Evaluates the given closure when this `Optional` instance is not `nil`,</span></div><div class="line"><span class="comment">/// passing the unwrapped value as a parameter.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// Use the `map` method with a closure that returns a nonoptional value.</span></div><div class="line"><span class="comment">/// This example performs an arithmetic operation on an</span></div><div class="line"><span class="comment">/// optional integer.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">///     let possibleNumber: Int? = Int("42")</span></div><div class="line"><span class="comment">///     let possibleSquare = possibleNumber.map &#123; $0 * $0 &#125;</span></div><div class="line"><span class="comment">///     print(possibleSquare)</span></div><div class="line"><span class="comment">///     // Prints "Optional(1746)"</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">///     let noNumber: Int? = nil</span></div><div class="line"><span class="comment">///     let noSquare = noNumber.map &#123; $0 * $0 &#125;</span></div><div class="line"><span class="comment">///     print(noSquare)</span></div><div class="line"><span class="comment">///     // Prints "nil"</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// - Parameter transform: A closure that takes the unwrapped value</span></div><div class="line"><span class="comment">///   of the instance.</span></div><div class="line"><span class="comment">/// - Returns: The result of the given closure. If this instance is `nil`,</span></div><div class="line"><span class="comment">///   returns `nil`.</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">map</span>&lt;U&gt;<span class="params">(</span></span></div><div class="line">    <span class="number">_</span> transform: <span class="params">(Wrapped)</span> <span class="keyword">throws</span> -&gt; <span class="type">U</span></div><div class="line">    ) <span class="keyword">rethrows</span> -&gt; <span class="type">U</span>? &#123;</div><div class="line">    <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</div><div class="line">    <span class="keyword">case</span> .some(<span class="keyword">let</span> y):</div><div class="line">        <span class="keyword">return</span> .some(<span class="keyword">try</span> transform(y))</div><div class="line">    <span class="keyword">case</span> .<span class="keyword">none</span>:</div><div class="line">        <span class="keyword">return</span> .<span class="keyword">none</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>Then here comes the <code>flatMap()</code> function. You can find the source code of Sequence Type <code>flatMap()</code> function <a href="https://github.com/apple/swift/blob/master/stdlib/public/core/SequenceAlgorithms.swift.gyb" target="_blank" rel="external">here</a>.<br>And I quote it like:<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// Returns an array containing the concatenated results of calling the</span></div><div class="line"><span class="comment">/// given transformation with each element of this sequence.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// Use this method to receive a single-level collection when your</span></div><div class="line"><span class="comment">/// transformation produces a sequence or collection for each element.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// In this example, note the difference in the result of using `map` and</span></div><div class="line"><span class="comment">/// `flatMap` with a transformation that returns an array.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">///     let numbers = [1, 2, 3, 4]</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">///     let mapped = numbers.map &#123; Array(count: $0, repeatedValue: $0) &#125;</span></div><div class="line"><span class="comment">///     // [[1], [2, 2], [3, 3, 3], [4, 4, 4, 4]]</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">///     let flatMapped = numbers.flatMap &#123; Array(count: $0, repeatedValue: $0) &#125;</span></div><div class="line"><span class="comment">///     // [1, 2, 2, 3, 3, 3, 4, 4, 4, 4]</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// In fact, `s.flatMap(transform)`  is equivalent to</span></div><div class="line"><span class="comment">/// `Array(s.map(transform).joined())`.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// - Parameter transform: A closure that accepts an element of this</span></div><div class="line"><span class="comment">///   sequence as its argument and returns a sequence or collection.</span></div><div class="line"><span class="comment">/// - Returns: The resulting flattened array.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// - Complexity: O(*m* + *n*), where *m* is the length of this sequence</span></div><div class="line"><span class="comment">///   and *n* is the length of the result.</span></div><div class="line"><span class="comment">/// - SeeAlso: `joined()`, `map(_:)`</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">flatMap</span>&lt;SegmentOfResult : Sequence&gt;<span class="params">(<span class="number">_</span> transform: <span class="params">(Iterator.Element)</span></span></span> <span class="keyword">throws</span> -&gt; <span class="type">SegmentOfResult</span>) <span class="keyword">rethrows</span> -&gt; [<span class="type">SegmentOfResult</span>.<span class="type">Iterator</span>.<span class="type">Element</span>] &#123;</div><div class="line">        <span class="keyword">var</span> result: [<span class="type">SegmentOfResult</span>.<span class="type">Iterator</span>.<span class="type">Element</span>] = []</div><div class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> <span class="keyword">self</span> &#123;</div><div class="line">            result.append(contentsOf: <span class="keyword">try</span> transform(element))</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/// Returns an array containing the non-`nil` results of calling the given</span></div><div class="line"><span class="comment">/// transformation with each element of this sequence.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// Use this method to receive an array of nonoptional values when your</span></div><div class="line"><span class="comment">/// transformation produces an optional value.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// In this example, note the difference in the result of using `map` and</span></div><div class="line"><span class="comment">/// `flatMap` with a transformation that returns an optional `Int` value.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">///     let possibleNumbers = ["1", "2", "three", "///4///", "5"]</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">///     let mapped: [Int?] = possibleNumbers.map &#123; str in Int(str) &#125;</span></div><div class="line"><span class="comment">///     // [1, 2, nil, nil, 5]</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">///     let flatMapped: [Int] = possibleNumbers.flatMap &#123; str in Int(str) &#125;</span></div><div class="line"><span class="comment">///     // [1, 2, 5]</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// - Parameter transform: A closure that accepts an element of this</span></div><div class="line"><span class="comment">///   sequence as its argument and returns an optional value.</span></div><div class="line"><span class="comment">/// - Returns: An array of the non-`nil` results of calling `transform`</span></div><div class="line"><span class="comment">///   with each element of the sequence.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// - Complexity: O(*m* + *n*), where *m* is the length of this sequence</span></div><div class="line"><span class="comment">///   and *n* is the length of the result.</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">flatMap</span>&lt;ElementOfResult&gt;<span class="params">(<span class="number">_</span> transform: <span class="params">(Iterator.Element)</span></span></span> <span class="keyword">throws</span> -&gt; <span class="type">ElementOfResult</span>?) <span class="keyword">rethrows</span> -&gt; [<span class="type">ElementOfResult</span>] &#123;</div><div class="line">    <span class="keyword">var</span> result: [<span class="type">ElementOfResult</span>] = []</div><div class="line">    <span class="keyword">for</span> element <span class="keyword">in</span> <span class="keyword">self</span> &#123;</div><div class="line">        <span class="keyword">if</span> <span class="keyword">let</span> newElement = <span class="keyword">try</span> transform(element) &#123;</div><div class="line">            result.append(newElement)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> result</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>And the Optional Type <code>flatMap()</code> <a href="https://github.com/apple/swift/blob/master/stdlib/public/core/Optional.swift" target="_blank" rel="external">here</a><br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// Evaluates the given closure when this `Optional` instance is not `nil`,</span></div><div class="line"><span class="comment">/// passing the unwrapped value as a parameter.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// Use the `flatMap` method with a closure that returns an optional value.</span></div><div class="line"><span class="comment">/// This example performs an arithmetic operation with an optional result on</span></div><div class="line"><span class="comment">/// an optional integer.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">///     let possibleNumber: Int? = Int("42")</span></div><div class="line"><span class="comment">///     let nonOverflowingSquare = possibleNumber.flatMap &#123; x -&gt; Int? in</span></div><div class="line"><span class="comment">///         let (result, overflowed) = Int.multiplyWithOverflow(x, x)</span></div><div class="line"><span class="comment">///         return overflowed ? nil : result</span></div><div class="line"><span class="comment">///     &#125;</span></div><div class="line"><span class="comment">///     print(nonOverflowingSquare)</span></div><div class="line"><span class="comment">///     // Prints "Optional(1746)"</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// - Parameter transform: A closure that takes the unwrapped value</span></div><div class="line"><span class="comment">///   of the instance.</span></div><div class="line"><span class="comment">/// - Returns: The result of the given closure. If this instance is `nil`,</span></div><div class="line"><span class="comment">///   returns `nil`.</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">flatMap</span>&lt;U&gt;<span class="params">(</span></span></div><div class="line">    <span class="number">_</span> transform: <span class="params">(Wrapped)</span> <span class="keyword">throws</span> -&gt; <span class="type">U</span>?</div><div class="line">    ) <span class="keyword">rethrows</span> -&gt; <span class="type">U</span>? &#123;</div><div class="line">    <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</div><div class="line">    <span class="keyword">case</span> .some(<span class="keyword">let</span> y):</div><div class="line">        <span class="keyword">return</span> <span class="keyword">try</span> transform(y)</div><div class="line">    <span class="keyword">case</span> .<span class="keyword">none</span>:</div><div class="line">        <span class="keyword">return</span> .<span class="keyword">none</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>And you can find the source code of <code>reduce()</code> function <a href="https://github.com/apple/swift/blob/d6033995f6485fe3bf979ae9a04287fc3ecbc512/stdlib/public/core/SequenceAlgorithms.swift.gyb" target="_blank" rel="external">here</a>,<br>quote like:<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// Returns the result of combining the elements of the sequence using the</span></div><div class="line"><span class="comment">/// given closure.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// Use the `reduce(_:_:)` method to produce a single value from the elements</span></div><div class="line"><span class="comment">/// of an entire sequence. For example, you can use this method on an array</span></div><div class="line"><span class="comment">/// of numbers to find their sum or product.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// The `nextPartialResult` closure is called sequentially with an</span></div><div class="line"><span class="comment">/// accumulating value initialized to `initialResult` and each element of</span></div><div class="line"><span class="comment">/// the sequence. This example shows how to find the sum of an array of</span></div><div class="line"><span class="comment">/// numbers.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">///     let numbers = [1, 2, 3, 4]</span></div><div class="line"><span class="comment">///     let numberSum = numbers.reduce(0, &#123; x, y in</span></div><div class="line"><span class="comment">///         x + y</span></div><div class="line"><span class="comment">///     &#125;)</span></div><div class="line"><span class="comment">///     // numberSum == 10</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// When `numbers.reduce(_:_:)` is called, the following steps occur:</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// 1. The `nextPartialResult` closure is called with `initialResult`---`0`</span></div><div class="line"><span class="comment">///    in this case---and the first element of `numbers`, returning the sum:</span></div><div class="line"><span class="comment">///    `1`.</span></div><div class="line"><span class="comment">/// 2. The closure is called again repeatedly with the previous call's return</span></div><div class="line"><span class="comment">///    value and each element of the sequence.</span></div><div class="line"><span class="comment">/// 3. When the sequence is exhausted, the last value returned from the</span></div><div class="line"><span class="comment">///    closure is returned to the caller.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// If the sequence has no elements, `nextPartialResult` is never executed</span></div><div class="line"><span class="comment">/// and `initialResult` is the result of the call to `reduce(_:_:)`.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// - Parameters:</span></div><div class="line"><span class="comment">///   - initialResult: The value to use as the initial accumulating value.</span></div><div class="line"><span class="comment">///     `initialResult` is passed to `nextPartialResult` the first time the</span></div><div class="line"><span class="comment">///     closure is executed.</span></div><div class="line"><span class="comment">///   - nextPartialResult: A closure that combines an accumulating value and</span></div><div class="line"><span class="comment">///     an element of the sequence into a new accumulating value, to be used</span></div><div class="line"><span class="comment">///     in the next call of the `nextPartialResult` closure or returned to</span></div><div class="line"><span class="comment">///     the caller.</span></div><div class="line"><span class="comment">/// - Returns: The final accumulated value. If the sequence has no elements,</span></div><div class="line"><span class="comment">///   the result is `initialResult`.</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">reduce</span>&lt;Result&gt;<span class="params">(<span class="number">_</span> initialResult: Result, <span class="number">_</span> nextPartialResult:</span></span></div><div class="line">    <span class="params">(<span class="number">_</span> partialResult: Result, Iterator.Element)</span> <span class="keyword">throws</span> -&gt; <span class="type">Result</span>)</div><div class="line">    <span class="keyword">rethrows</span> -&gt; <span class="type">Result</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">var</span> accumulator = initialResult</div><div class="line">    <span class="keyword">for</span> element <span class="keyword">in</span> <span class="keyword">self</span> &#123;</div><div class="line">        accumulator = <span class="keyword">try</span> nextPartialResult(accumulator, element)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> accumulator</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>And the <code>filter()</code> function in <a href="https://github.com/apple/swift/blob/master/stdlib/public/core/Sequence.swift" target="_blank" rel="external">here</a><br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/// Returns an array containing, in order, the elements of the sequence</span></div><div class="line"><span class="comment">/// that satisfy the given predicate.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// In this example, `filter` is used to include only names shorter than</span></div><div class="line"><span class="comment">/// five characters.</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">///     let cast = ["Vivien", "Marlon", "Kim", "Karl"]</span></div><div class="line"><span class="comment">///     let shortNames = cast.filter &#123; $0.characters.count &lt; 5 &#125;</span></div><div class="line"><span class="comment">///     print(shortNames)</span></div><div class="line"><span class="comment">///     // Prints "["Kim", "Karl"]"</span></div><div class="line"><span class="comment">///</span></div><div class="line"><span class="comment">/// - Parameter isIncluded: A closure that takes an element of the</span></div><div class="line"><span class="comment">///   sequence as its argument and returns a Boolean value indicating</span></div><div class="line"><span class="comment">///   whether the element should be included in the returned array.</span></div><div class="line"><span class="comment">/// - Returns: An array of the elements that `includeElement` allowed.</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">filter</span><span class="params">(<span class="number">_</span> isIncluded: <span class="params">(Iterator.Element)</span></span></span> <span class="keyword">throws</span> -&gt; <span class="type">Bool</span>) <span class="keyword">rethrows</span> -&gt; [<span class="type">Iterator</span>.<span class="type">Element</span>] &#123;</div><div class="line">    <span class="keyword">var</span> result = <span class="type">ContiguousArray</span>&lt;<span class="type">Iterator</span>.<span class="type">Element</span>&gt;()</div><div class="line">    <span class="keyword">var</span> iterator = <span class="keyword">self</span>.makeIterator()</div><div class="line">    <span class="keyword">while</span> <span class="keyword">let</span> element = iterator.next() &#123;</div><div class="line">        <span class="keyword">if</span> <span class="keyword">try</span> isIncluded(element) &#123;</div><div class="line">            result.append(element)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="type">Array</span>(result)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘æ›¾ç»å¾ˆå¥½å¥‡ map(), flatMap(), reduce() å’Œ filter() å‡½æ•°æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Œæ˜¯æ€ä¹ˆå®ç°çš„ã€‚åœ¨æˆ‘é˜…è¯»äº† Swift æºç è¿˜æœ‰ä¸€äº›æ–‡ç« ä»¥åï¼Œæˆ‘è§‰å¾—æ˜¯æ—¶å€™åˆ†äº«ä¸€ä¸‹äº†ã€‚&lt;/p&gt;&lt;p&gt;I have been wondering a long time about what the map() function, reduce() function and filter() function have done. After reading many passages and &lt;a href=&quot;https://github.com/apple/swift/blob/master/stdlib/public/core/&quot;&gt;the source code of swift&lt;/a&gt;, I think it is time to summerize what I have got. Besides, I hope this post can help someone who want to but not yet understand these function to understand them.&lt;/p&gt;
    
    </summary>
    
    
      <category term="Programming" scheme="http://blog.superyoung.win/tags/Programming/"/>
    
      <category term="Swift" scheme="http://blog.superyoung.win/tags/Swift/"/>
    
      <category term="map" scheme="http://blog.superyoung.win/tags/map/"/>
    
      <category term="reduce" scheme="http://blog.superyoung.win/tags/reduce/"/>
    
      <category term="filter" scheme="http://blog.superyoung.win/tags/filter/"/>
    
      <category term="Language" scheme="http://blog.superyoung.win/tags/Language/"/>
    
  </entry>
  
  <entry>
    <title>LLDB Tutorial</title>
    <link href="http://blog.superyoung.win/2017/01/31/learning_swift/LLDB_Usage/"/>
    <id>http://blog.superyoung.win/2017/01/31/learning_swift/LLDB_Usage/</id>
    <published>2017-01-31T12:02:09.000Z</published>
    <updated>2017-01-31T14:07:07.000Z</updated>
    
    <content type="html"><![CDATA[<p>According to <a href="https://lldb.llvm.org" target="_blank" rel="external">The LLDB Debuger</a>:</p><blockquote><p>LLDB is a next generation, high-performance debugger. It is built as a set of reusable components which highly leverage existing libraries in the larger LLVM Project, such as the Clang expression parser and LLVM disassembler.<br>LLDB is the default debugger in Xcode on Mac OS X and supports debugging C, Objective-C and C++ on the desktop and iOS devices and simulator.</p></blockquote><p>So, we can assume LLDB a the advanced version of the gdb debuger. And itâ€™s almost backword compatible.<br><a id="more"></a></p><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>First of all, you will need a compiler, such as <code>gnu g++</code> <code>visual c++</code> <code>clang</code> and so forth.</p><p>Particularly, if you are a macOS user, just download Xcode from App Store and install <code>Xcode command line tools</code> from Xcodeâ€™s menu and everything will be ok.</p><p>If you are using Linux, please download <a href="http://apt.llvm.org" target="_blank" rel="external">LLVM Debian/Ubuntu nightly packages</a></p><blockquote><p>The packages provide <code>LLVM</code> + <code>Clang</code> + <code>compiler-rt</code> + <code>polly</code> + <code>LLDB</code> + <code>LLD</code></p></blockquote><h2 id="Basic-usage"><a href="#Basic-usage" class="headerlink" title="Basic usage"></a>Basic usage</h2><p>After you installed, you can use lldb to debug a binary file that compiled with <code>g++ -g</code> or <code>clang -g</code> like this:<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">## compile with:</div><div class="line">    g++ a.cpp -o a -g --std=c++11;</div><div class="line">## debug with:</div><div class="line">    lldb a</div></pre></td></tr></table></figure><p></p><p>After start debugging, you can do:</p><ul><li>Set breakpoint with <code>b (line number)</code></li><li>Run program with command <code>r</code></li><li>Source level single step in the currently selected thread <code>step</code> or <code>s</code></li><li>Source level single step over in the currently selected thread <code>next</code> or <code>n</code></li><li>Set a breakpoint at all functions named main <code>breakpoint set --name main</code> or <code>b main</code></li><li>Set a breakpoint in file test.c at line 12 <code>break test.c:12</code> or <code>b test.c:12</code></li><li>List all breakpoints <code>breakpoint list</code> or <code>br l</code></li><li>Delete a breakpoint <code>breakpoint delete 1</code> or <code>br del 1</code></li><li>Print expr <code>p (obj name)</code></li><li>Print the ObjC â€œdescriptionâ€ of an object <code>po (obj name)</code></li><li>Print local variable and its address <code>fr v -R (obj name)</code></li><li>Quit <code>quit</code> or <code>q</code></li></ul><blockquote><p>The difference (as I understand it) is that frame variable is only for printing the contents of variables, whereas print is a shortcut for expression â€“ and can evaluate arbitrary C and Objective-C expressions.<br>To summarize: <code>frame variable</code> is for variables and <code>print</code> (or expr) is for expressions. In the case of one variable they both work equally well. via <a href="http://stackoverflow.com/questions/17656071/lldb-command-fr-v-var-vs-p-var" target="_blank" rel="external">Martin R stackOverFlow</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;According to &lt;a href=&quot;https://lldb.llvm.org&quot;&gt;The LLDB Debuger&lt;/a&gt;:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;LLDB is a next generation, high-performance debugger. It is built as a set of reusable components which highly leverage existing libraries in the larger LLVM Project, such as the Clang expression parser and LLVM disassembler.&lt;br&gt;LLDB is the default debugger in Xcode on Mac OS X and supports debugging C, Objective-C and C++ on the desktop and iOS devices and simulator.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;So, we can assume LLDB a the advanced version of the gdb debuger. And itâ€™s almost backword compatible.&lt;br&gt;
    
    </summary>
    
    
      <category term="LLDB" scheme="http://blog.superyoung.win/tags/LLDB/"/>
    
      <category term="GDB" scheme="http://blog.superyoung.win/tags/GDB/"/>
    
      <category term="Debug" scheme="http://blog.superyoung.win/tags/Debug/"/>
    
  </entry>
  
  <entry>
    <title>Autoclosure and Lazy Evaluation</title>
    <link href="http://blog.superyoung.win/2017/01/29/learning_swift/autoclosure/"/>
    <id>http://blog.superyoung.win/2017/01/29/learning_swift/autoclosure/</id>
    <published>2017-01-29T12:18:31.000Z</published>
    <updated>2017-02-04T08:07:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>A note about how to use <code>@autoclosure</code> in Swift programming language</p><a id="more"></a><h2 id="A-short-explain-to-autoclosure"><a href="#A-short-explain-to-autoclosure" class="headerlink" title="A short explain to @autoclosure"></a>A short explain to <code>@autoclosure</code></h2><p>What <code>@autoclosure</code> have done is to wrap a expressionn to a closure.</p><h2 id="for-example"><a href="#for-example" class="headerlink" title="for example"></a>for example</h2><p>We define a function as below:<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">printIfTrue</span><span class="params">(<span class="number">_</span> clo: <span class="params">()</span></span></span>-&gt;<span class="type">Bool</span> )&#123;</div><div class="line">    <span class="built_in">print</span>(clo())</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>We can call the function like this:<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">printIfTrue( &#123; <span class="keyword">return</span> <span class="number">2</span>&gt;<span class="number">1</span> &#125; )</div></pre></td></tr></table></figure><p></p><p>OR like this:<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">printIfTrue&#123; <span class="keyword">return</span> <span class="number">2</span>&gt;<span class="number">1</span> &#125;</div></pre></td></tr></table></figure><p></p><p>OR even ignore the key word <code>return</code>:<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">printIfTrue&#123; <span class="number">2</span>&gt;<span class="number">1</span> &#125;</div></pre></td></tr></table></figure><p></p><p>But if you want a clearer syntax like:<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">printIfTrue( <span class="number">2</span>&gt;<span class="number">1</span> )</div></pre></td></tr></table></figure><p></p><p>Then you must use <code>@autoclosure</code>, like:<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">printIfTrue</span><span class="params">(<span class="number">_</span> clo: @autoclosure <span class="params">()</span></span></span>-&gt;<span class="type">Bool</span>)&#123;</div><div class="line">    <span class="built_in">print</span>(clo())</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>Is these all it can do? Well, Yes, and No. What it can do depends on you, just go on and have a look:</p><h2 id="Lazy-evaluation"><a href="#Lazy-evaluation" class="headerlink" title="Lazy evaluation"></a>Lazy evaluation</h2><p>Letâ€™s define two similar function and try to compare their speed:<br>The first function:<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">logicalAnd</span><span class="params">(<span class="number">_</span> <span class="keyword">left</span>: @autoclosure <span class="params">()</span></span></span> -&gt; <span class="type">Bool</span>, <span class="number">_</span> <span class="keyword">right</span>: <span class="meta">@autoclosure</span> () -&gt; <span class="type">Bool</span>) -&gt; <span class="type">Bool</span>&#123;</div><div class="line">    <span class="keyword">if</span> <span class="keyword">left</span>()&#123;</div><div class="line">        <span class="keyword">if</span> <span class="keyword">right</span>()&#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>The second function:<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">logicalAnd</span><span class="params">(<span class="number">_</span> <span class="keyword">left</span>: Bool, <span class="number">_</span> <span class="keyword">right</span>: Bool)</span></span> -&gt; <span class="type">Bool</span>&#123;</div><div class="line">    <span class="keyword">if</span> <span class="keyword">left</span>&#123;</div><div class="line">        <span class="keyword">if</span> <span class="keyword">right</span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>Itâ€™s same to call these two functions:<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">logicalAnd(<span class="literal">true</span>, <span class="literal">true</span>)      <span class="comment">//return true</span></div><div class="line">logicalAnd(<span class="number">2</span>&gt;<span class="number">1</span>, <span class="number">2</span>&gt;<span class="number">1</span>)        <span class="comment">//return true</span></div></pre></td></tr></table></figure><p></p><p>You might have noticed that the difference between them is only the type of parameter.</p><p>And because of that, the first function is faster than the second one.</p><p>The first function can do <code>lazy evaluation</code> to the right parameter, and if the parameter needs long time calculation, its advantage will show.</p><p>While the second one? It must determine the parameter before the function is called, in other way, it cannot do <code>lazy evaluation</code> and will cost longer time.</p><p>So that is what most interesting thing of <code>@autoclosure</code>.</p><p>And the operator <code>??</code>, <code>&amp;&amp;</code>, <code>||</code> in standard lib of Swift is also do the same.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;A note about how to use &lt;code&gt;@autoclosure&lt;/code&gt; in Swift programming language&lt;/p&gt;
    
    </summary>
    
    
      <category term="iOS" scheme="http://blog.superyoung.win/tags/iOS/"/>
    
      <category term="Programming" scheme="http://blog.superyoung.win/tags/Programming/"/>
    
      <category term="Swift" scheme="http://blog.superyoung.win/tags/Swift/"/>
    
      <category term="autoclosure" scheme="http://blog.superyoung.win/tags/autoclosure/"/>
    
      <category term="lazy evaluation" scheme="http://blog.superyoung.win/tags/lazy-evaluation/"/>
    
  </entry>
  
  <entry>
    <title>ARC Rules</title>
    <link href="http://blog.superyoung.win/2017/01/29/learning_iOS/ARC_Rules/"/>
    <id>http://blog.superyoung.win/2017/01/29/learning_iOS/ARC_Rules/</id>
    <published>2017-01-29T02:19:41.000Z</published>
    <updated>2017-01-29T03:30:19.000Z</updated>
    
    <content type="html"><![CDATA[<p>A note for book <a href="http://www.apress.com/us/book/9781430241164" target="_blank" rel="external">Pro Multithreading and Memory Management for iOS and OS X</a><br>ARC is summarized in Appleâ€™s own words:</p><blockquote><p>ARC in Objective-C makes memory management the job of the compiler. By enabling ARC with the new Apple LLVM compiler, you will never need to type retain or release again, dramatically simplifying the development process, while reducing craches and memory leaks. The compiler has a complete understanding of your objects, and releases each object the instant it is no longer used, so apps run as fast as ever, with predictable, smooth performance.</p></blockquote><a id="more"></a><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>Actually, reference counting is still used as the basis of ARC. But ARC helps the reference counting mechanism work automatically when you follow its rules.</p><h2 id="The-rules-of-Reference-Counting"><a href="#The-rules-of-Reference-Counting" class="headerlink" title="The rules of Reference Counting"></a>The rules of Reference Counting</h2><ul><li>You have ownership of any objects you create.</li><li>You can take ownership of an object using retain.</li><li>When you no longer need it, you must relinquish ownership of an object of which you have ownership.</li><li>You must not relinquish ownership of an object of which you donâ€™t have ownership.</li></ul><h2 id="Newly-introduced-for-ARC-Ownership-Qualifier"><a href="#Newly-introduced-for-ARC-Ownership-Qualifier" class="headerlink" title="Newly introduced for ARC: Ownership Qualifier"></a>Newly introduced for ARC: Ownership Qualifier</h2><p>In Objective-C, â€˜idâ€™ or each object type is used for object variable types.</p><p>Object types are pointer types of Objective-C classes, such as NSObject <em>.â€™idâ€™ type is used to hide its class name. â€˜idâ€™ is equivalent to void</em> in the C language.</p><p>With ARC, â€˜idâ€™ and object type variables must have one of the following four ownership qualifiers:<br></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> __<span class="keyword">strong</span></div><div class="line"><span class="number">2.</span> __<span class="keyword">weak</span></div><div class="line"><span class="number">3.</span> __<span class="keyword">unsafe_unretained</span></div><div class="line"><span class="number">4.</span> __autoreleasing</div></pre></td></tr></table></figure><p></p><p>You should decide which ownership qualifier is to be used for all the â€˜idâ€™ and object type variables in your source code. In this chapter, I explain hwo you should choos each qualifier one by one.</p><h3 id="strong-ownership-qualifier"><a href="#strong-ownership-qualifier" class="headerlink" title="__strong ownership qualifier"></a>__strong ownership qualifier</h3><p>The <strong>strong ownership qualifier is used as the default for â€˜idâ€™ and object types. It means that the variable obj in the following source code is </strong>strong qualified implicitly.<br></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="keyword">id</span> obj = [[<span class="built_in">NSObject</span> alloc] init];</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>Without being explicitly qualified, â€˜idâ€™ or objects are treated as __strong. The above code is the same as:<br></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="keyword">id</span> __<span class="keyword">strong</span> obj = [[<span class="built_in">NSObject</span> alloc] init];</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>The following is the same source code for a non-ARC environment.<br></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* non-ARC */</span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">id</span> obj = [[<span class="built_in">NSObject</span> alloc] init];</div><div class="line">    [obj release];</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>This means the â€œreleaseâ€ method is automatically added on an ARC environment to release the created object with ownership.</p><p>We add comments on the ownership status:<br></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="keyword">id</span> __<span class="keyword">strong</span> obj = [[<span class="built_in">NSObject</span> alloc] init];</div><div class="line">    <span class="comment">/**</span></div><div class="line">    * The variable obj is qualified with __strong.</div><div class="line">    * Which means, it has the ownership of the object.</div><div class="line">    **/</div><div class="line">&#125;</div><div class="line">    <span class="comment">/**</span></div><div class="line">    * Leaving the scope of variable obj, its strong reference disappears.</div><div class="line">    * The object is release automatically,</div><div class="line">    * because no one has ownership, the objec is dispoed of.</div><div class="line">    */</div></pre></td></tr></table></figure><p></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;A note for book &lt;a href=&quot;http://www.apress.com/us/book/9781430241164&quot;&gt;Pro Multithreading and Memory Management for iOS and OS X&lt;/a&gt;&lt;br&gt;ARC is summarized in Appleâ€™s own words:&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;ARC in Objective-C makes memory management the job of the compiler. By enabling ARC with the new Apple LLVM compiler, you will never need to type retain or release again, dramatically simplifying the development process, while reducing craches and memory leaks. The compiler has a complete understanding of your objects, and releases each object the instant it is no longer used, so apps run as fast as ever, with predictable, smooth performance.&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="iOS" scheme="http://blog.superyoung.win/tags/iOS/"/>
    
      <category term="Programming" scheme="http://blog.superyoung.win/tags/Programming/"/>
    
      <category term="ARC" scheme="http://blog.superyoung.win/tags/ARC/"/>
    
      <category term="Rules" scheme="http://blog.superyoung.win/tags/Rules/"/>
    
      <category term="Objective C" scheme="http://blog.superyoung.win/tags/Objective-C/"/>
    
      <category term="Coming soon..." scheme="http://blog.superyoung.win/tags/Coming-soon/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ GitHub Pages æ­å»ºåšå®¢æŒ‡å—</title>
    <link href="http://blog.superyoung.win/2017/01/28/how_to_build_a_blog/blog_with_github_pages/"/>
    <id>http://blog.superyoung.win/2017/01/28/how_to_build_a_blog/blog_with_github_pages/</id>
    <published>2017-01-28T05:18:35.000Z</published>
    <updated>2017-01-30T11:15:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ªäººä½¿ç”¨ GitHub Pages ç»“åˆ Hexo æ­å»ºé™æ€ç½‘é¡µåšå®¢çš„ä¸€ç‚¹æ€»ç»“<br><a id="more"></a></p><p>ä¸ºä»€ä¹ˆç”¨ GitHub Pages å’Œ Hexo ç­‰å·¥å…·æ¥æ­å»ºåšå®¢å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸ç”¨ WordPressï¼Ÿ</p><ul><li><p>é¦–å…ˆï¼Œä»…ä»…ä¸ºäº†ä¸€ä¸ªåšå®¢ï¼Œå¾ˆå¤šäººå¯èƒ½å¹¶ä¸æƒ³èŠ±èµ„é‡‘åˆ°æœåŠ¡å™¨ä¸Šã€‚ä¸€å°æœåŠ¡å™¨åº”è¯¥ç”¨æ¥åšäº›æ›´æœ‰è¶£çš„äº‹æƒ… ï¼ˆä¸å·®é’±çš„åœŸè±ªè¯·ç•¥è¿‡ â”‘(ï¿£Ğ” ï¿£)â”ã€‚</p></li><li><p>å…¶æ¬¡å¾ˆå¤šäººä¹Ÿä¸æƒ³èŠ±ç²¾åŠ›å»ç»´æŠ¤ä¸€ä¸ªåšå®¢ç³»ç»Ÿã€‚ WordPress ç­‰æ¡†æ¶è™½ç„¶è¯´æˆç†Ÿä½†æ˜¯å¶å°”è¿˜æ˜¯ä¼šçˆ†å‡ºä¸€äº›æ¼æ´ï¼Œå¦‚æœè¯´ä½ ä¸åŠæ—¶è·Ÿè¿›ï¼Œä¿®å¤æ¼æ´çš„è¯ï¼Œå¯èƒ½ä¼šå¯¹åœ¨ä½ åšå®¢ä¸‹ç•™è¨€çš„äººé€ æˆä¸å¥½çš„å½±å“ã€‚</p></li></ul><p>äºæ˜¯ï¼Œé™æ€ç½‘é¡µç”Ÿæˆå™¨ â• å…è´¹çš„é™æ€ç½‘é¡µå±•ç¤ºå·¥å…·å°±æˆäº†æ­å»ºåšå®¢çš„ä¸äºŒä¹‹é€‰ã€‚</p><h2 id="å€Ÿç”¨-GitHub-Pages-æ­å»ºåšå®¢çš„åŸç†"><a href="#å€Ÿç”¨-GitHub-Pages-æ­å»ºåšå®¢çš„åŸç†" class="headerlink" title="å€Ÿç”¨ GitHub Pages æ­å»ºåšå®¢çš„åŸç†"></a>å€Ÿç”¨ GitHub Pages æ­å»ºåšå®¢çš„åŸç†</h2><p>GitHub Pages æ˜¯ GitHub æä¾›çš„ä¸€ä¸ªé™æ€ç½‘é¡µå±•ç¤ºå™¨ï¼Œå¯ä»¥å°†é™æ€çš„æ–‡æœ¬æŒ‰ç…§ç½‘é¡µçš„å½¢å¼æ¥å±•ç¤ºï¼Œé™æ€æ–‡æœ¬å†…å®¹å°†ä¼šå­˜å‚¨åœ¨ä½ æŒ‡å®šçš„ repo ä¸­ã€‚</p><p>åœ¨è¿™ä¸ªæŒ‡å—ä¸­ï¼Œæˆ‘å°†ä¼šå±•ç¤ºå¦‚ä½•é€šè¿‡é™æ€ç½‘é¡µç”Ÿæˆå™¨ Hexo å°† <code>.md</code> æ–‡ä»¶è½¬æ¢æˆç½‘é¡µã€‚</p><h2 id="å¼€å¯-Pages"><a href="#å¼€å¯-Pages" class="headerlink" title="å¼€å¯ Pages"></a>å¼€å¯ Pages</h2><p>æ–°å»ºä¸€ä¸ª repo ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨æ—§çš„ï¼‰ï¼Œåœ¨ setting ä¸­æ‰¾åˆ° GitHub Pages è®¾ç½®é¡¹ï¼Œå¼€å¯ GitHub Pagesã€‚æŒ‰ç…§æŒ‡å¼•ä¸€æ­¥æ­¥èµ°å®Œï¼Œä½ çš„é™æ€å±•ç¤ºé¡µé¢å°±æ­å»ºå®Œæˆäº†ã€‚</p><p>GitHub ä¸€èˆ¬ä¼šå»ºè®®ä½¿ç”¨ jkeyll æ¥åš .md æ–‡ä»¶åˆ° .html æ–‡ä»¶çš„è½¬æ¢ï¼Œä½†æ˜¯æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯ Hexoï¼Œå› ä¸ºé¦–å…ˆå®ƒçš„ä½œè€…æ˜¯ä¸­å›½å°æ¹¾äººï¼Œç¤¾åŒºæ¯”è¾ƒæœ¬åœŸåŒ–ï¼Œèµ„æ–™ä¹Ÿæ¯”è¾ƒå®¹æ˜“æ‰¾ã€‚</p><h2 id="å®‰è£…-Hexo"><a href="#å®‰è£…-Hexo" class="headerlink" title="å®‰è£… Hexo"></a>å®‰è£… Hexo</h2><p>è¦å®‰è£… Hexo çš„è¯ï¼Œé¦–å…ˆè¦å®‰è£… Node.js å’Œ Git<br>Node.js çš„å®‰è£…å¾ˆç®€å•ï¼š<br>macOSï¼š<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install node</div></pre></td></tr></table></figure><p></p><p><em>è¯¦æƒ…è¯·è§ï¼š<a href="https://nodejs.org/en/download/package-manager/" target="_blank" rel="external">Installing Node.js via package manager</a></em></p><p>Git çš„å®‰è£…ï¼Œé¢ï¼Œå¦‚æœçœ‹æ–‡ç« çš„æ‚¨è¿˜æ²¡è£… Git çš„è¯ <del>ï¼ˆè¯¥é¢å£äº†ï¼‰</del> ã€‚ Git çš„å®‰è£…è¿‡ç¨‹å’Œnode.jsç±»ä¼¼ï¼Œä¸å†èµ˜è¿°ã€‚</p><p>ç„¶åä½¿ç”¨ <code>npm</code> åŒ…ç®¡ç†å™¨æ¥ åœ¨æœ¬æœºå®‰è£… Hexo<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-cli -g</div></pre></td></tr></table></figure><p></p><p>æ¥ä¸‹æ¥ä½ çš„ç”µè„‘åº”è¯¥å¯ä»¥ä½¿ç”¨ Hexo è¿™ä¸ªå‘½ä»¤äº†ï¼Œå¥½ï¼Œé‚£ä¹ˆæ‰¾åˆ°ä¸€ä¸ªé€‚åˆçš„ç›®å½•ï¼Œæ‰§è¡Œ<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hexo init blog;</div><div class="line"><span class="built_in">cd</span> blog;</div><div class="line">npm install;</div></pre></td></tr></table></figure><p></p><p>è¿™å‡ æ¡å‘½ä»¤å°†ä¼šåœ¨å½“å‰ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º blog çš„ç›®å½•ï¼Œå†å°† hexo éœ€è¦çš„åˆå§‹åŒ–æ–‡ä»¶æ”¾ clone åˆ°è¿™ä¸ªç›®å½•ä¸­ã€‚</p><p>å¦‚æœä½ æƒ³ç›´æ¥çœ‹æ•ˆæœçš„è¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡å™¨<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo s</div></pre></td></tr></table></figure><p></p><p>æ­¤æ—¶åœ¨ localhost:4000 ä¸­åº”è¯¥å¯ä»¥çœ‹åˆ° Hello World äº†ã€‚</p><h2 id="å…³äºé…ç½®æ–‡ä»¶-config-yml"><a href="#å…³äºé…ç½®æ–‡ä»¶-config-yml" class="headerlink" title="å…³äºé…ç½®æ–‡ä»¶ _config.yml"></a>å…³äºé…ç½®æ–‡ä»¶ _config.yml</h2><p>åˆ†åˆ«æœ‰ Site, URl, Directory, Writting, Category &amp; tag, Date format, Pagination, Extensions, Atom/RSS conf, Deployment çš„é…ç½®ä¿¡æ¯ã€‚å¤§éƒ¨åˆ†è‡ªè¡Œé…ç½®å³å¯ã€‚</p><p>å¡«å†™ <a href="https://github.com/moment/moment-timezone/blob/develop/data/packed/latest.json" target="_blank" rel="external">moment-timezone æ—¶åŒºåˆ—è¡¨</a> ä¸­çš„ä¸€é¡¹ï¼Œæ¯”å¦‚ä¸­å›½æ˜¯ <code>Asia/Shanghai</code>ã€‚</p><p><em>è¯¦æƒ…è¯·å‚è§ï¼š<a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="external">Hexo é…ç½®</a></em></p><h2 id="å¦‚ä½•å†™æ–‡ç« ï¼Ÿ"><a href="#å¦‚ä½•å†™æ–‡ç« ï¼Ÿ" class="headerlink" title="å¦‚ä½•å†™æ–‡ç« ï¼Ÿ"></a>å¦‚ä½•å†™æ–‡ç« ï¼Ÿ</h2><p>å¾ˆç®€å•ï¼Œåœ¨ <code>source/_post/</code> ä¸­æ–°å»º .md æ–‡ä»¶å°±å¯ä»¥äº†ï¼Œå¦‚æœä¸æƒ³è‡ªå·±æ‰‹åŠ¨æ–°å»ºçš„è¯ï¼Œå¯ä»¥æ‰§è¡Œ<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo new filename</div></pre></td></tr></table></figure><p></p><p>æ‰§è¡Œä¸Šè¿°æ“ä½œåå†ç”Ÿæˆé™æ€ç½‘é¡µï¼Œæ‰§è¡Œï¼š<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo g</div></pre></td></tr></table></figure><p></p><blockquote><p>å»ºè®®æ–‡ä»¶åä½¿ç”¨è‹±æ–‡ï¼Œå› ä¸ºæ–‡ä»¶åå°†ä½œä¸ºåšå®¢æ–‡ç« é“¾æ¥çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚æœä½¿ç”¨ä¸­æ–‡å¯èƒ½å¯¼è‡´ä¸ä¾¿ã€‚</p></blockquote><h2 id="å…³äº-Front-matter"><a href="#å…³äº-Front-matter" class="headerlink" title="å…³äº Front-matter"></a>å…³äº Front-matter</h2><p>å‚æ•°éƒ½å¾ˆå®¹æ˜“ç†è§£ï¼Œè¿™é‡Œè¦è¯´çš„æ˜¯ï¼Œtags çš„åˆ†è¯ï¼Œä½¿ç”¨çš„æ˜¯ä¸€ä¸‹è¿™ä¸¤ç§è¯­æ³•ï¼Œè€Œä¸æ˜¯ç©ºæ ¼æˆ–è€…ä»€ä¹ˆ<br></p><figure class="highlight md"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">tags:</div><div class="line"><span class="bullet">- </span>myTag0</div><div class="line"><span class="bullet">- </span>myTag1</div></pre></td></tr></table></figure><p></p><p>OR<br></p><figure class="highlight md"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tags:[myTag0, myTag1]</div></pre></td></tr></table></figure><p></p><p><em>è¯¦æƒ…è¯·å‚è§ï¼š<a href="https://hexo.io/zh-cn/docs/front-matter.html" target="_blank" rel="external">Front-matter</a></em></p><h2 id="å…³äºå›¾ç‰‡"><a href="#å…³äºå›¾ç‰‡" class="headerlink" title="å…³äºå›¾ç‰‡"></a>å…³äºå›¾ç‰‡</h2><p>å®˜æ–¹çš„å…³äº Asset æ–‡ä»¶å¤¹ï¼Œæ— æ³•æˆåŠŸåº”ç”¨ï¼ŒåŸå› æœªçŸ¥ã€‚åè€Œæ˜¯æŒ‰ç…§ md è¯­æ³•çš„ <code>![ title ]( href )</code> èµ·äº†ä½œç”¨ã€‚</p><p>åœ¨ <code>source/</code> ç›®å½•ä¸‹æ–°å»º <code>iamges/</code> ç›®å½•ç”¨æ¥ä¿å­˜å›¾ç‰‡ï¼Œç„¶ååœ¨æ–‡ç« ä¸­è¿™æ ·å¼•ç”¨<br></p><figure class="highlight md"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">![<span class="string">example</span>](<span class="link">/images/example.jpg</span>)</div></pre></td></tr></table></figure><p></p><p>æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨è¿™ä¸ªåŠæ³•ï¼Œä¸èƒ½ _config.yml ä¸­çš„ <code>relative_link</code> å¿…é¡»ä¸º <code>false</code></p><p><em>è¯¦æƒ…è¯·å‚è§ï¼š<a href="https://hexo.io/zh-cn/docs/asset-folders.html" target="_blank" rel="external">èµ„æºæ–‡ä»¶å¤¹</a></em></p><h2 id="å…³äºä¸»é¢˜"><a href="#å…³äºä¸»é¢˜" class="headerlink" title="å…³äºä¸»é¢˜"></a>å…³äºä¸»é¢˜</h2><p>ä¸»é¢˜æ–‡ä»¶ä¿å­˜åœ¨ themes ä¸­ï¼Œåœ¨è¿™ä¸ªç›®å½•ä¸‹ clone ä»–äººæä¾›çš„ hexo ä¸»é¢˜é¡¹ç›®ä¸‹æ¥ï¼Œæˆ–è€…è‡ªå·±æ ¹æ®æ¨¡æ¿è‡ªè¡Œæ›´æ”¹ã€‚</p><p>ç„¶ååœ¨ <code>_config.yml</code> çš„ <code>theme:</code> ä¸­è¾“å…¥ä¸»é¢˜æ–‡ä»¶å¤¹åå­—</p><p>è¯¦æƒ…è¯·å‚è§ï¼š<br><em><a href="https://hexo.io/zh-cn/docs/themes.html" target="_blank" rel="external">Hexo ä¸»é¢˜</a></em><br><em><a href="https://hexo.io/zh-cn/docs/templates.html" target="_blank" rel="external">Hexo æ¨¡æ¿</a></em></p><h2 id="å…³äºè¯„è®º"><a href="#å…³äºè¯„è®º" class="headerlink" title="å…³äºè¯„è®º"></a>å…³äºè¯„è®º</h2><p>è¯·å¾€ä¸‹æ»‘è¯¥é¡µé¢ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨äº† <code>landscape</code> ä¸»é¢˜ï¼Œå…¶å†…ç½®äº† <code>Disuqs</code> æœåŠ¡çš„ä»£ç ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œç›´æ¥ä½¿ç”¨äº†å›½å¤–çš„åœ¨çº¿è¯„è®ºæœåŠ¡ <code>Disqus</code>ï¼Œè€Œæœ‰äº›ç«¥é‹å–œæ¬¢å›½å†…çš„æœåŠ¡<code>å¤šè¯´</code>ã€‚å…¶å®äºŒè€…åœ¨åŠŸèƒ½ä¸Šå¹¶æ²¡æœ‰ä»€ä¹ˆå¤ªå¤§çš„å·®å¼‚ã€‚</p><p>å…³äºè¯„è®ºåŠŸèƒ½çš„éƒ¨ç½²ï¼Œæ–¹æ³•å¤§åŒå°å¼‚ï¼šæ³¨å†Œä¸€ä¸ªç¬¬ä¸‰æ–¹æœåŠ¡çš„å¸å·ï¼Œä»–ä»¬ä¼šæä¾›ä¸€ä¸ªäºŒçº§åŸŸåå’Œå¯¹åº”çš„ JS ä»£ç ï¼Œè€Œä½ è¦åšçš„å°±æ˜¯åœ¨ç½‘é¡µä¸­åŒ…å«ä»–ä»¬æä¾›çš„ JS ä»£ç ï¼Œå½“æœ‰äººè¯„è®ºçš„æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨è¿™äº› JS ä»£ç å‘é€æ¶ˆæ¯ç»™ç¬¬ä¸‰æ–¹æœåŠ¡æä¾›å•†ï¼Œä»–ä»¬å†å°†è·å–åˆ°çš„æ¶ˆæ¯å­˜å…¥å¯¹åº”å¸å·çš„æ•°æ®åº“è¡¨ä¸­ï¼Œä¸‹æ¬¡å†æœ‰äººè®¿é—®çš„æ—¶å€™å†ä»è¡¨ä¸­è¯»å–å‡ºæ¥ã€‚</p><p>Hexo ä¸­ï¼Œ<code>Disqus</code> çš„éƒ¨ç½²éå¸¸å®¹æ˜“ï¼Œåªéœ€è¦åœ¨ <code>blog/_config.yml</code> ä¸­å¢åŠ å­—æ®µï¼š<br></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Comments</span></div><div class="line"><span class="attr">disqus_shortname:</span> your_disqus_shortname</div></pre></td></tr></table></figure><p></p><blockquote><p>æ³¨æ„è¿™é‡Œçš„ shortname åªæ˜¯ç”Ÿæˆçš„ nameï¼Œä¸è¦å¡«ä¸Šæ•´ä¸ªé“¾æ¥</p></blockquote><p>å¦‚æœæƒ³è¦å…³é—­æŸç¯‡æ–‡ç« çš„è¯„è®ºåŠŸèƒ½ï¼Œåªéœ€è¦åœ¨å…¶ Front-matter ä¸­å¡«ä¸Š<br></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">comments:</span> <span class="literal">false</span></div></pre></td></tr></table></figure><p></p><p>ä¹Ÿå°±æ˜¯è¯´ä¸€ç¯‡æ–‡ç« çš„è¯„è®ºåŠŸèƒ½æ˜¯å¦æ‰“å¼€ï¼Œå–å†³äºä¸¤ä¸ªå› ç´ ï¼š</p><ol><li>blog é…ç½®ä¸­æ˜¯å¦å¡«å†™äº† disqus_shortname</li><li>æ–‡ç«  Front-matter ä¸­çš„ comments æ˜¯å¦ä¸º trueï¼ˆé»˜è®¤ä¸º trueï¼‰</li></ol><p>é€šè¿‡å¯¹ä¸»é¢˜ .ejs æ–‡ä»¶çš„ä¸€ç•ªæ¢ç´¢ï¼Œè¯å®äº†ä¸Šè¿°è¯´æ³•ï¼ˆä»¥ä¸‹ä»£ç ä½äºï¼š<code>blog/themes/landscape/layout/_partial/article.ejs</code>ï¼‰ï¼š<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (!index &amp;&amp; post.comments &amp;&amp; config.disqus_shortname)&#123; ... &#125;</div></pre></td></tr></table></figure><p></p><p>å¯¹äº<code>å¤šè¯´</code>æˆ–è€…å…¶ä»–è¯„è®ºæœåŠ¡çš„é…ç½®ï¼Œè¯·è‡ªè¡Œæœç´¢ï¼ŒåŸç†ä¸€èˆ¬éƒ½æ˜¯ï¼šåˆ é™¤æ‰å½“å‰ä¸»é¢˜é»˜è®¤çš„è¯„è®º jsï¼Œç²˜è´´ä¸Šè¯„è®ºæœåŠ¡æä¾›å•†çš„ JS ä»£ç ã€‚æ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯å«é‡çš„ ;)</p><h2 id="å…³äºä¸ªäººåŸŸå"><a href="#å…³äºä¸ªäººåŸŸå" class="headerlink" title="å…³äºä¸ªäººåŸŸå"></a>å…³äºä¸ªäººåŸŸå</h2><p>è®¾ç½®ä¸ªäººåŸŸåçš„æ—¶å€™ï¼Œéœ€è¦é¦–å…ˆåœ¨åŸŸåæœåŠ¡å•†é‚£é‡Œè®¾ç½® CNAME ï¼ˆåˆ«åï¼‰è®°å½•ï¼Œå°† CNAME è®¾ç½®æˆ <em>ç”¨æˆ·å.github.io</em></p><p>ç„¶ååœ¨ repo çš„ setting ä¸­å¡«å†™è‡ªå·±çš„åŸŸåã€‚</p><h2 id="å‘å¸ƒåšå®¢"><a href="#å‘å¸ƒåšå®¢" class="headerlink" title="å‘å¸ƒåšå®¢"></a>å‘å¸ƒåšå®¢</h2><p>ä¸Šé¢çš„æ“ä½œéƒ½æ˜¯åœ¨æœ¬æœºä¸Šçš„ï¼Œæ€ä¹ˆå‘å¸ƒå‘¢ï¼Ÿ</p><p>å®˜æ–¹ç»™çš„ç­”æ¡ˆæ˜¯æ‰§è¡Œå‘½ä»¤ï¼š <code>hexo g; hexo d</code>ï¼Œè€Œæˆ‘æ¯”è¾ƒå–œæ¬¢åŸç”Ÿæ€ (Geek) ä¸€ç‚¹çš„ã€‚å› ä¸ºä½¿ç”¨ shell å‘½ä»¤ç»“åˆ git ä¹Ÿå¯ä»¥å®Œç¾è§£å†³å‘å¸ƒé—®é¢˜ã€‚</p><p>åŸç†å¦‚ä¸‹ï¼š<code>hexo g</code> ç”Ÿæˆçš„çš„æ–‡ä»¶éƒ½åœ¨ <code>public/</code> ç›®å½•ä¸‹ï¼Œæ‰€ä»¥ï¼Œå¦‚æœè¦å‘å¸ƒï¼Œåªéœ€è¦å°† public ç›®å½•æäº¤åˆ°æ­£ç¡®çš„ GitHub repo ä¸Šå»å°±å¯ä»¥äº†ã€‚</p><p>æˆ‘çš„åŠæ³•æ˜¯ï¼š</p><ol><li>é¦–å…ˆåœ¨ GitHub ä¸­ clone é‚£ä¸ª repo åˆ°ä¸€ä¸ªæ–°å»ºçš„ deploy ç›®å½•ä¸‹</li><li>ç„¶åä½¿ç”¨å¦‚ä¸‹ shell å‘½ä»¤æ¥æäº¤ï¼ˆä¿å­˜æˆ.shæ–‡ä»¶æ–¹ä¾¿ä¸‹æ¬¡æ‰§è¡Œï¼‰ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># è®¾ç½®shellå¯ä»¥è¯†åˆ«æ„Ÿå¹å·ï¼ˆä¸ºäº†è®¾ç½® rm å‘½ä»¤çš„ç™½åå•ï¼‰</span></div><div class="line">    <span class="built_in">shopt</span> <span class="_">-s</span> extglob</div><div class="line"><span class="comment"># è¿›å…¥å·¥ä½œç›®å½•ï¼ˆè®°å¾—æ”¹æˆè‡ªå·±çš„ç›®å½•ï¼‰</span></div><div class="line">    <span class="built_in">cd</span> ~/blog;</div><div class="line"><span class="comment"># Hexo Generate</span></div><div class="line">    hexo g;</div><div class="line"><span class="comment"># æ¸…ç†ç›®å½•ï¼Œä¿ç•™ .git, README.md å’Œ CNAME æ–‡ä»¶</span></div><div class="line">    <span class="built_in">cd</span> deploy/;</div><div class="line">    rm -rf ./!(.git|README.md|CNAME);</div><div class="line"><span class="comment"># ç§»åŠ¨éœ€è¦éƒ¨ç½²çš„æ–‡ä»¶</span></div><div class="line">    cp ../public/* ./;</div><div class="line"><span class="comment"># éƒ¨ç½²</span></div><div class="line">    git add .; git commit -m <span class="string">"update"</span>; git push; <span class="built_in">exit</span>;</div></pre></td></tr></table></figure></li></ol><blockquote><p>æ³¨æ„ï¼šä»¥ä¸Šå‘½ä»¤ä»…åœ¨ macOS Sierra ä¸Šæµ‹è¯•é€šè¿‡ã€‚å¦‚æœ Linux ç‰ˆæœ¬æ‰€æ”¯æŒçš„å‘½ä»¤ä¸åŒï¼Œè¯·å¸®å¿™åœ¨è¯„è®ºåŒºæé†’ä¸€ä¸‹ï¼ŒThank you ;)</p></blockquote><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><em><a href="https://pages.github.com" target="_blank" rel="external">GitHub Pages</a></em><br><em><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="external">Hexo</a></em></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸ªäººä½¿ç”¨ GitHub Pages ç»“åˆ Hexo æ­å»ºé™æ€ç½‘é¡µåšå®¢çš„ä¸€ç‚¹æ€»ç»“&lt;br&gt;
    
    </summary>
    
    
      <category term="GitHub" scheme="http://blog.superyoung.win/tags/GitHub/"/>
    
      <category term="Pages" scheme="http://blog.superyoung.win/tags/Pages/"/>
    
      <category term="blog" scheme="http://blog.superyoung.win/tags/blog/"/>
    
      <category term="hexo" scheme="http://blog.superyoung.win/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>ä¸­æ€§ç°ç£¨çš®ä»¥åŠç»†èŠ‚å¢å¼º</title>
    <link href="http://blog.superyoung.win/2017/01/27/PictureProcessing/50gray_buffing/"/>
    <id>http://blog.superyoung.win/2017/01/27/PictureProcessing/50gray_buffing/</id>
    <published>2017-01-27T14:32:36.000Z</published>
    <updated>2017-01-28T16:22:39.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸­æ€§ç°ç£¨çš®çš„åŸºæœ¬æ­¥éª¤ï¼Œå…¶æ€è·¯ï¼Œè¿˜æ˜¯ <code>D&amp;B</code><br><a id="more"></a></p><ol><li>ä½¿ç”¨å›¾ç« ç­‰å·¥å…·è¿›è¡Œæ–‘ç‚¹çš„æ¶ˆé™¤</li><li>æ–°å»ºä¸€ä¸ªé¢œè‰²å¡«å……å›¾å±‚ï¼Œå¡«å……50%ç°è‰²ï¼Œè®¾ç½®å›¾å±‚æ··åˆæ¨¡å¼ä¸ºæŸ”å…‰</li><li>æ–°å»ºä¸€ä¸ªé¢œè‰²å¡«å……å›¾å±‚ï¼Œå¡«å……é»‘è‰²ï¼Œè®¾ç½®å›¾å±‚æ··åˆæ¨¡å¼ä¸ºé¢œè‰²</li><li>æ–°å»ºä¸€ä¸ªé¢œè‰²å¡«å……å›¾å±‚ï¼Œå¡«å……é»‘è‰²ï¼Œè®¾ç½®å›¾å±‚æ··åˆæ¨¡å¼ä¸ºæŸ”å…‰</li><li>ä½¿ç”¨ç¬”åˆ·åœ¨ä¸­æ€§ç°å›¾å±‚æ›´æ”¹é«˜å…‰å’Œé˜´å½±ï¼Œé‡ç»˜æ‰€æœ‰éœ€è¦é‡ç»˜çš„åœ°æ–¹</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸­æ€§ç°ç£¨çš®çš„åŸºæœ¬æ­¥éª¤ï¼Œå…¶æ€è·¯ï¼Œè¿˜æ˜¯ &lt;code&gt;D&amp;amp;B&lt;/code&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="Photoshop" scheme="http://blog.superyoung.win/tags/Photoshop/"/>
    
      <category term="ä¿®å›¾" scheme="http://blog.superyoung.win/tags/%E4%BF%AE%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‹æŠŠæ‰‹æ•™ä½ Rxå“åº”å¼å¼€å‘ - å“åº”å¼åº”ç”¨å¼€å‘æç®€å…¥é—¨æ•™ç¨‹</title>
    <link href="http://blog.superyoung.win/2017/01/25/learning_iOS/Reactive-Programming/"/>
    <id>http://blog.superyoung.win/2017/01/25/learning_iOS/Reactive-Programming/</id>
    <published>2017-01-25T07:47:23.000Z</published>
    <updated>2017-02-04T17:39:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¾ˆå¤šé¢å‘å¯¹è±¡çš„å¼€å‘äººå‘˜éƒ½é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼šè½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å¼€å‘äººå‘˜ä¸»åŠ¨åœ°å‘Šè¯‰ç³»ç»Ÿä»€ä¹ˆä¸œè¥¿æ”¹å˜äº†ï¼Œä»¥æ­¤æ¥è§¦å‘å“åº”ã€‚</p><p>é‚£æœ‰äººå°±ä¼šæƒ³ï¼Œå¦‚æœæœ‰ä¸€ä¸ªåŠæ³•å¯ä»¥è®©ç³»ç»Ÿè‡ªåŠ¨å‘ç°çŠ¶æ€çš„æ”¹å˜ï¼Œæ˜¯ä¸æ˜¯æ›´å¥½å‘¢ï¼Ÿ</p><p>è¿™å°±å¼•å‡ºäº†å“åº”å¼å¼€å‘æœ€åŸºæœ¬çš„æ¦‚å¿µâ€¦â€¦<br><a id="more"></a></p><p><em>åŸæ–‡åœ¨æ­¤ï¼š<a href="https://www.raywenderlich.com/138547/getting-started-with-rxswift-and-rxcocoa" target="_blank" rel="external">Getting Started With RxSwift and RxCocoa by Ellen Shapiro on October 17, 2016</a></em></p><p><img src="/images/Programming/rx_logo.png" alt="ReactiveX Logo"></p><h2 id="0x00-åº"><a href="#0x00-åº" class="headerlink" title="0x00 åº"></a>0x00 åº</h2><p>å¾ˆå¤šé¢å‘å¯¹è±¡çš„å¼€å‘äººå‘˜éƒ½é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼šè½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å¼€å‘äººå‘˜ä¸»åŠ¨åœ°å‘Šè¯‰ç³»ç»Ÿä»€ä¹ˆä¸œè¥¿æ”¹å˜äº†ï¼Œä»¥æ­¤æ¥è§¦å‘å“åº”ã€‚</p><p>é‚£æœ‰äººå°±ä¼šæƒ³ï¼Œå¦‚æœæœ‰ä¸€ä¸ªåŠæ³•å¯ä»¥è®©ç³»ç»Ÿè‡ªåŠ¨å‘ç°çŠ¶æ€çš„æ”¹å˜ï¼Œæ˜¯ä¸æ˜¯æ›´å¥½å‘¢ï¼Ÿ</p><p>è¿™å°±å¼•å‡ºäº†å“åº”å¼å¼€å‘æœ€åŸºæœ¬çš„æ¦‚å¿µï¼šä½ çš„åº”ç”¨å¯ä»¥å¯¹çŠ¶æ€ç›´æ¥è¿›è¡Œå“åº”è€Œä¸éœ€è¦å¼€å‘äººå‘˜å‚ä¸ã€‚è¿™ç§å¼€å‘æ–¹å¼å¯ä»¥è®©å¼€å‘äººå‘˜æ›´åŠ ä¸“æ³¨äºé€»è¾‘çš„è¡¨è¾¾è€Œä¸æ˜¯å¦‚ä½•å¯¹çŠ¶æ€è¿›è¡Œä¿å­˜ã€‚</p><p>åœ¨ iOS ä¸­å¯ä»¥ä½¿ç”¨ Objc å’Œ Swift çš„ KVO å’Œ didSet ç­‰æ–¹æ³•ï¼Œä½†æ˜¯æœ‰æ—¶å€™å•Šè¿™äº›æ–¹æ³•å¯èƒ½å°±æ˜¾å¾—å¤ªç¬¨é‡äº†ï¼ŒObjc å’Œ Swift å‡æœ‰ä¸åŒçš„å“åº”å¼æ¡†æ¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™é‡Œä¸»è¦ä»‹ç»çš„æ˜¯ swift çš„ RxSwift æ¡†æ¶ã€‚</p><p><a href="https://www.raywenderlich.com/126522/reactivecocoa-vs-rxswift" target="_blank" rel="external">å¦‚æœä½ æƒ³çŸ¥é“æ›´å¤šçš„èƒŒæ™¯ä¿¡æ¯ï¼Œå…³äºå„å¤§ä¸»æµæ¡†æ¶çš„åŒºåˆ«ï¼Œ <em>Rui Peres</em> å†™äº†ä¸€ç¯‡æ–‡ç« </a></p><h2 id="0x01-ä»€ä¹ˆæ˜¯-RxSwift-å’Œ-RxCocoa"><a href="#0x01-ä»€ä¹ˆæ˜¯-RxSwift-å’Œ-RxCocoa" class="headerlink" title="0x01 ä»€ä¹ˆæ˜¯ RxSwift å’Œ RxCocoa"></a>0x01 ä»€ä¹ˆæ˜¯ RxSwift å’Œ RxCocoa</h2><p>ReactiveX æ˜¯ä¸€ä¸ªæ”¯æŒå¾ˆå¤šç¼–ç¨‹è¯­è¨€å’Œå¹³å°è¯­è¨€å·¥å…·åº“ é¡¹ç›®ã€‚è€Œ RxSwift å’Œ RxCocoa æ˜¯ ReactiveX å¥—è£…çš„ä¸€éƒ¨åˆ†ã€‚</p><p>RxSwift æ˜¯ä¸€ä¸ªå’Œ Swift è¯­è¨€è¿›è¡Œäº¤äº’çš„æ¡†æ¶ï¼Œè€Œ RxCocoa åˆ™ä½¿å¾— Cocoa çš„ APIs æ›´å®¹æ˜“è¢« Reactive æŠ€æœ¯è°ƒç”¨ã€‚</p><p>RxSwift å’Œ RxCocoa å¯ä»¥é€šè¿‡ pod æ¥å®‰è£…ï¼Œå…·ä½“æ–¹æ³•è‡ªè¡ŒæŸ¥çœ‹å…¶ github é¡¹ç›®ä¸»é¡µã€‚</p><h2 id="0x02-åŸºæœ¬æ¦‚å¿µï¼šObservableå¯è§‚å¯Ÿçš„-å’Œ-Observer-è§‚å¯Ÿè€…"><a href="#0x02-åŸºæœ¬æ¦‚å¿µï¼šObservableå¯è§‚å¯Ÿçš„-å’Œ-Observer-è§‚å¯Ÿè€…" class="headerlink" title="0x02 åŸºæœ¬æ¦‚å¿µï¼šObservableå¯è§‚å¯Ÿçš„ å’Œ Observer è§‚å¯Ÿè€…"></a>0x02 åŸºæœ¬æ¦‚å¿µï¼š<code>Observable</code><em>å¯è§‚å¯Ÿçš„</em> å’Œ <code>Observer</code> <em>è§‚å¯Ÿè€…</em></h2><p>æˆ‘æ›¾ç»è¢«è¿™äº›æ¦‚å¿µæ··æ·†äº†å¾ˆä¹…ï¼Œåœ¨ä¸åŒçš„æ–‡ç« ä¸­æœ‰ä¸åŒçš„ç§°å‘¼ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸­æ–‡åšå®¢ä¸­ï¼Œä»€ä¹ˆâ€œæµâ€ä¸â€œä¿¡å·â€é½é£ï¼Œå´å°‘æœ‰äººæŒ‰ç…§è‹±æ–‡å­—é¢çš„ç¿»è¯‘<br>Observable =&gt; å¯è§‚å¯Ÿçš„ï¼ŒObserver =&gt; è§‚å¯Ÿè€…ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­æˆ‘å°†ä½¿ç”¨è¿™ä¸ªå­—é¢ç¿»è¯‘ï¼ŒåŸå› ç­‰ä½ çœ‹å®Œæ–‡ç« ä¼šä½“ä¼šåˆ°çš„ã€‚</p><p>å…¶å®ï¼Œè¿™ä¸ªè‹±æ–‡åå­—èµ·çš„å¾ˆæœ‰æ„æ€ï¼ŒObservable æ˜¯ä¸€ä¸ªå½¢å®¹è¯ï¼Œå…¶å®å°†å½¢å®¹è¯ä½œä¸ºä¸€ä¸ªç±»åéå¸¸è´´åˆ‡ï¼Œå…¶åœ¨ç‰›æ´¥è¯å…¸ä¸­çš„è§£é‡Šæ˜¯ï¼š<em>Able to be noticed or perceived</em>ï¼Œè€Œ Observer æ˜¯ä¸€ä¸ªåè¯ï¼Œåœ¨ç‰›æ´¥è¯å…¸ä¸­çš„è§£é‡Šæ˜¯ï¼š<em>A person who watches or notices something</em>ã€‚</p><p>è€Œè¿™ä¸¤ä¸ªè¯åœ¨ Rx ä¸­çš„å«ä¹‰æ˜¯ï¼š</p><ul><li>ä¸€ä¸ª<code>å¯è§‚å¯Ÿçš„</code>æ˜¯ä¸€ä¸ªèƒ½å¤Ÿæäº¤é€šçŸ¥çš„ä¸œè¥¿ã€‚</li><li>ä¸€ä¸ª<code>è§‚å¯Ÿè€…</code>å¯ä»¥è®¢é˜…ä¸€ä¸ª<code>å¯è§‚å¯Ÿçš„</code>å¯¹è±¡ï¼Œå¯ä»¥æ¥æ”¶å¯¹è±¡æ”¹å˜çš„é€šçŸ¥ï¼ŒåŒæ—¶è¿›è¡Œä¸€äº›è‡ªå®šä¹‰æ“ä½œã€‚</li></ul><h2 id="0x03-åŸºæœ¬æ¦‚å¿µï¼šDisposeBag-é”€æ¯åŒ…"><a href="#0x03-åŸºæœ¬æ¦‚å¿µï¼šDisposeBag-é”€æ¯åŒ…" class="headerlink" title="0x03 åŸºæœ¬æ¦‚å¿µï¼šDisposeBag é”€æ¯åŒ…"></a>0x03 åŸºæœ¬æ¦‚å¿µï¼š<code>DisposeBag</code> <em>é”€æ¯åŒ…</em></h2><p>æ˜¯ RxSwift å’Œ RxCocoa çš„å·¥å…·ï¼Œç”¨æ¥å¸®åŠ©å’Œ ARC å†…å­˜ç®¡ç†è¿›è¡Œäº¤äº’çš„å·¥å…·ã€‚è¿™æ˜¯ä¸€ä¸ªç»™<code>è§‚å¯Ÿè€…</code>å¯¹è±¡çš„è™šæ‹Ÿçš„ â€œåŒ…â€ï¼Œå½“å…¶çˆ¶å¯¹è±¡è¢« deallocate åï¼Œè§‚å¯Ÿè€…å¯¹è±¡çš„å†…å­˜ä¹Ÿä¼šè¢«é‡Šæ”¾ã€‚</p><p>å‡è®¾æŸä¸ªè§‚å¯Ÿè€…å¯¹è±¡çš„ä¸€ä¸ªå±æ€§æ˜¯ DisposeBag ï¼Œé‚£ä¹ˆå½“å®ƒçš„ <code>deinit()</code> æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œè¿™ä¸ª â€œbagâ€ è¢«æ¸…ç©ºï¼Œå¹¶ä¸”æ¯ä¸ªè¢«é”€æ¯çš„è§‚å¯Ÿè€…éƒ½è‡ªåŠ¨çš„è§£é™¤è®¢é˜…ï¼Œè¿™å°±å…è®¸ ARC ç³»ç»Ÿå»æ­£å¸¸åœ°å›æ”¶å†…å­˜äº†ã€‚</p><p>æ²¡æœ‰ <code>DisposeBag</code> çš„è¯ï¼Œå°†ä¼šæœ‰ä¸¤ç§ç»“æœï¼š</p><ol><li>è¦ä¹ˆè§‚å¯Ÿè€…ä¼šåˆ›é€ ä¿ç•™ç¯ï¼Œé€ æˆå†…å­˜æ³„æ¼</li><li>è¦ä¹ˆå®ƒä¼šåœ¨å¯¹è±¡çš„å¤–é¢è¢«é‡Šæ”¾æ‰ï¼Œé€ æˆç¨‹åºå´©æºƒ</li></ol><p>æ‰€ä»¥ï¼Œä¸€å®šè¦è®°å¾—åœ¨è®¾ç½®è§‚å¯Ÿè€…å¯¹è±¡çš„æ—¶å€™å¢åŠ  DisposeBagã€‚</p><hr><h2 id="0x04-æ¥ä¸‹æ¥ä¸¾ä¸ªä¾‹å­ï¼šè´­ä¹°å·§å…‹åŠ›"><a href="#0x04-æ¥ä¸‹æ¥ä¸¾ä¸ªä¾‹å­ï¼šè´­ä¹°å·§å…‹åŠ›" class="headerlink" title="0x04 æ¥ä¸‹æ¥ä¸¾ä¸ªä¾‹å­ï¼šè´­ä¹°å·§å…‹åŠ›"></a>0x04 æ¥ä¸‹æ¥ä¸¾ä¸ªä¾‹å­ï¼šè´­ä¹°å·§å…‹åŠ›</h2><p><em>é¡¹ç›®æ–‡ä»¶ï¼š<a href="https://github.com/shengyang998/Chocolates-starter" target="_blank" rel="external">ä¼ é€é—¨</a></em></p><p>Build å¹¶ä¸”è¿è¡Œé¡¹ç›®ï¼Œç°åœ¨è¿™ä¸ª demo è¿˜æ˜¯æ²¡æœ‰ä½¿ç”¨å“åº”å¼çš„ï¼Œæ¥ä¸‹æ¥çš„æ•™ç¨‹ä¸­ï¼Œå°†ä¼šå±•ç¤ºå¦‚ä½•ä½¿ç”¨å“åº”å¼æ¥å®Œæˆè¿™ä¸ª demoã€‚</p><h2 id="0x05-å“åº”å¼æ“ä½œè´­ç‰©è½¦æ•°é‡"><a href="#0x05-å“åº”å¼æ“ä½œè´­ç‰©è½¦æ•°é‡" class="headerlink" title="0x05 å“åº”å¼æ“ä½œè´­ç‰©è½¦æ•°é‡"></a>0x05 å“åº”å¼æ“ä½œè´­ç‰©è½¦æ•°é‡</h2><p>æ‰“å¼€ <code>ShoppingCart.swift</code>ï¼Œæ‰¾åˆ°è´­ç‰©è½¦å†…æ•°ç»„çš„å£°æ˜<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> chocolates = [<span class="type">Chocolate</span>]()</div></pre></td></tr></table></figure><p></p><p>ç°åœ¨è¿˜ä¸æ˜¯å“åº”å¼çš„ï¼Œè¦æƒ³å“åº”å¼ï¼Œå°†å…¶æ”¹æˆ<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> chocolates: <span class="type">Variable</span>&lt;[<span class="type">Chocolate</span>]&gt; = <span class="type">Variable</span>([])</div></pre></td></tr></table></figure><p></p><p>ä¸Šé¢è¯­å¥çš„ä½œç”¨è¯¦è¿°å¦‚ä¸‹ï¼š</p><ol><li>ä½ å®šä¹‰äº†ä¸€ä¸ª RxSwift çš„ Variableï¼Œè¿™ä¸ª Variable æ˜¯ Swift æ•°ç»„ç±»å‹çš„ï¼Œæ•°ç»„ç”¨äº† Chocolate ç±»å‹æ¥å®šä¹‰ã€‚</li><li><code>Variable</code> æ˜¯ä¸€ä¸ªç±»ï¼Œæ‰€ä»¥å®ƒæ˜¯å¼•ç”¨ç±»å‹ã€‚ä¹Ÿå°±æ˜¯ chocolates æ˜¯ Variable çš„ä¸€ä¸ªå®ä¾‹ã€‚</li><li><code>Variable</code> æœ‰ä¸€ä¸ªå±æ€§å« <code>value</code>ã€‚è¿™é‡Œæ˜¯ä½ çš„ Chocolate æ•°ç»„å­˜æ”¾çš„åœ°æ–¹ã€‚</li><li><code>Variable</code> çš„è†œæ³•æ¥è‡ªäºä¸€ä¸ªå« <code>asObservable()</code> çš„æ–¹æ³•ã€‚ä½ å¯ä»¥å¢åŠ ä¸€ä¸ªè§‚å¯Ÿè€…æ¥ä»£æ›¿æ¯æ¬¡å»æ‰‹åŠ¨ check the valueã€‚</li><li>å¦å¤–ä»¥åè®¿é—®é‚£ä¸ªæ•°ç»„çš„æ—¶å€™ï¼Œéƒ½è¦é€šè¿‡ <code>value</code> æ¥è®¿é—®äº†ã€‚</li></ol><p>ä¿®å¤ Xcode å½“å‰æç¤ºçš„æ‰€æœ‰é”™è¯¯ï¼Œç„¶åç»§ç»­ä¸‹é¢çš„æ“ä½œï¼š</p><ol><li>åœ¨æ–‡ä»¶ <code>ChocolatesOfTheWorldViewController.swift</code> ä¸­å¢åŠ </li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div></pre></td></tr></table></figure><ol><li>åœ¨ // MARK: Rx Setup ä¸‹é¢å¢åŠ </li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">setupCartObserver</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="type">ShoppingCart</span>.sharedCart.chocolates.asObservable()</div><div class="line">    .subscribe(onNext:&#123;</div><div class="line">        (chocolates) <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>.cartButton.title = <span class="string">"<span class="subst">\(chocolates.<span class="built_in">count</span>)</span> \u&#123;1f36b&#125;"</span></div><div class="line">        &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¿™å°†ä¼šè®¾ç½®ä¸€ä¸ªå“åº”å¼çš„è§‚å¯Ÿè€…å»è‡ªåŠ¨æ›´æ–°è´­ç‰©è½¦ã€‚</p><p>ä¸Šé¢çš„ä»£ç å…·ä½“åšäº†ä»€ä¹ˆï¼Ÿè¯¦è¿°å¦‚ä¸‹ï¼š</p><ol><li>é¦–å…ˆï¼Œè·å–è´­ç‰©è½¦çš„ chocolates as an Observable</li><li>æ¯æ¬¡ Observable ä¸­çš„å€¼æ›´æ–°åéƒ½ä¼šè°ƒç”¨å…¶è§‚å¯Ÿè€…çš„ <code>subscribe(onNext:)</code> ï¼Œå…¶ä¸­ä¼ å…¥çš„å‚æ•°å°±æ˜¯è¢«æ”¹å˜çš„å€¼ã€‚</li><li>è®°å¾—æ¯æ¬¡ subscribe åéƒ½è¦ addDisposableToã€‚</li></ol><p>æ¥ä¸‹æ¥ï¼Œåœ¨ <code>viewDidLoad()</code> æ–¹æ³•ä¸­è°ƒç”¨ <code>setupCartObserver()</code>ï¼Œå¹¶ä¸”åˆ é™¤é‚£ä¸ªéç§æœ‰çš„ <code>updateCartButton()</code> æ–¹æ³•ï¼Œä¿®å¤é”™è¯¯ã€‚</p><h2 id="0x06-å“åº”å¼æ“ä½œ-TableView"><a href="#0x06-å“åº”å¼æ“ä½œ-TableView" class="headerlink" title="0x06 å“åº”å¼æ“ä½œ TableView"></a>0x06 å“åº”å¼æ“ä½œ TableView</h2><p>ç°åœ¨ä½ å·²ç»è®©è´­ç‰©è½¦å“åº”å¼äº†ï¼Œæ¥ä¸‹æ¥ä½ å°†ä¼šçœ‹åˆ°å¦‚ä½•ä½¿ç”¨ RxCocoa æ¥è®© UITableView å“åº”å¼ã€‚</p><p>RxCocoa åŒ…å«ä¸€äº› UI æ§ä»¶çš„å“åº”å¼çš„ APIï¼Œè¿™ä½¿å¾—ä½ å¯ä»¥æ§åˆ¶åƒ UITableView ç­‰æ§ä»¶è€Œä¸éœ€è¦ override ä»£ç†å’Œæ•°æ®æºæ–¹æ³•</p><p>ä¸ºäº†æ¼”ç¤ºæ€ä¹ˆåšï¼Œåˆ é™¤æ•´ä¸ª UITableViewDataSource å’Œ UITableViewDelegate æ‰©å±•ï¼Œç„¶ååˆ é™¤ viewDidLoad æ–¹æ³•é‡Œæ³¨å†Œ dataSource å’Œ delegate çš„è¯­å¥ã€‚</p><p>ç¼–è¯‘å¹¶ä¸”è¿è¡Œä¸€ä¸‹ï¼Œä½ å°†ä¼šå‘ç°æ•´ä¸ª TableView éƒ½ç©ºäº†ï¼Œé‚£ä¹ˆå¥½ï¼Œæ¥ä¸‹æ¥ä½ éœ€è¦ä½¿ TableView ä¸­çš„ä¸€äº›ä¸œè¥¿å“åº”åŒ–ï¼Œé¦–å…ˆï¼Œåœ¨æ–‡ä»¶ <code>ChocolatesOfTheWorldViewController.swift</code> ä¸­ï¼ŒæŠŠå±æ€§<code>europeanChocolates</code>æ”¹æˆä¸€ä¸ªå¯è§‚å¯Ÿçš„ï¼š<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> europeanChocolates = <span class="type">Observable</span>.just(<span class="type">Chocolate</span>.ofEurope)</div></pre></td></tr></table></figure><p></p><p><code>å¯è§‚å¯Ÿçš„å€¼</code>ä¸ä¼šæœ‰ä»»ä½•æ”¹å˜ï¼Œä½†æ˜¯å½“ä½ ä»ç„¶æƒ³è¦åƒä¸€ä¸ªå¯è§‚å¯Ÿçš„å€¼ä¸€æ ·è®¿é—®å®ƒçš„æ—¶å€™ï¼Œä½¿ç”¨<code>just(_:)</code>æ–¹æ³•ã€‚<br><em>Sometimes, calling <code>just(_:)</code> is an indication that using Reactive Programming might be overkillâ€”after all, if a value never changes, why use a Programming technique designed to react to changes? In this example, youâ€™re using it to set up reactions of table view cells which will change, but itâ€™s always a good idea to look carefully at how youâ€™re using Rx. Just because you have a hammer doesnâ€™t mean every problem is a nail.</em></p><p>ç°åœ¨ä½ å·²ç»è®© europeanChocolates å˜æˆå¯è§‚å¯Ÿçš„äº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å¢åŠ ä¸‹é¢çš„å‡½æ•°ï¼š<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">setupCellConfig</span><span class="params">()</span></span>&#123;</div><div class="line">    europeanChocolates.bindTo(tableView</div><div class="line">        .rx.items(cellIdentifier: <span class="type">ChocolateCell</span>.<span class="type">Identifier</span>, cellType: <span class="type">ChocolateCell</span>.<span class="keyword">self</span>))&#123;</div><div class="line">            (row, chocolate, cell) <span class="keyword">in</span></div><div class="line">            cell.configureWithChocolate(chocolate: chocolate)</div><div class="line">        &#125;.addDisposableTo(disposeBag)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>è¿™é‡Œåšçš„äº‹æ˜¯ï¼š</p><ol><li>ä½ è°ƒç”¨äº†<code>bindTo(_:)</code>å»å…³è”å¯è§‚å¯Ÿçš„ europeanChocolatesï¼Œä¸Šé¢çš„ä»£ç åº”è¯¥æ¯è¡Œéƒ½è°ƒç”¨ä¸€æ¬¡</li><li>é€šè¿‡ <code>rx.</code> å¯ä»¥è®¿é—® RxCocoa å¯¹äº UI æ§ä»¶çš„æ‰©å±•ï¼Œåœ¨è¿™é‡Œæ˜¯ UITableView</li><li>è°ƒç”¨ Rx æ–¹æ³•ï¼Œ<code>items(cellIdentifier: cellType:)</code>ï¼Œä¼ å…¥ cell identifier å’Œ cell çš„ç±»å‹ã€‚è¿™å°†å…è®¸ Rx è°ƒç”¨ç¦»é˜Ÿæ–¹æ³•ï¼ˆdequeuing methodï¼‰</li><li>ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ª block ï¼Œæ¯ä¸€ä¸ªæ–° item éƒ½ä¼šæ‰§è¡Œè¿™ä¸ª blockã€‚ä½ ä¼šè·å¾—å…³äºè¿™ä¸€è¡Œçš„è¿”å›ä¿¡æ¯ï¼Œå’Œ cellï¼Œè¿™ä½¿å¾—å®ƒé…ç½® cell è¶…çº§ç®€å•ã€‚</li><li>åŠ å…¥ disposeBag</li></ol><p>é€šå¸¸æƒ…å†µä¸‹ç»è¿‡<code>tableView(_:numberOfRowsInSection:)</code>å’Œ<code>numberOfSection(in:)</code>è®¡ç®—çš„å€¼ç°åœ¨è‡ªåŠ¨æ ¹æ®è¢«è§‚å¯Ÿçš„å€¼æ¥è‡ªåŠ¨è®¡ç®—ã€‚è€Œ<code>tableView(_: cellForRowAt:)</code>ä»£ç†æ–¹æ³•å·²ç»è¢«é—­åŒ…ä»£æ›¿ã€‚</p><p>ç°åœ¨ï¼Œå»<code>viewDidLoad()</code>æ–¹æ³•ä¸­æ·»åŠ ä¸‹é¢è¿™è¡Œä»£ç ï¼Œè°ƒç”¨ä½ çš„æ–°è®¾ç½®æ–¹æ³•ï¼š<br><code>setupCellConfig()</code></p><p>ç°åœ¨ï¼Œå¦‚æœä½ ç‚¹å‡» tableView çš„ä»»ä½•ä¸€è¡Œï¼Œéƒ½ä¸ä¼šæœ‰ååº”ã€‚å› ä¸ºå½“ä½ åˆ é™¤<code>tableView(_: didSelectRowAt:)</code>çš„æ—¶å€™ï¼ŒtableView å·²ç»ä¸èƒ½è¯†åˆ«ç‚¹å‡»åŠ¨ä½œäº†ã€‚</p><p>ä¸ºäº†è§£å†³ç‚¹å‡»é—®é¢˜ï¼ŒRxCocoa æœ‰ä¸€ä¸ª<code>modelSelected(_:)</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª Observableï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒå»è§‚å¯Ÿå…³äºè¢«é€‰æ‹©å¯¹è±¡çš„ä¿¡æ¯ã€‚å¢åŠ å¦‚ä¸‹æ–¹æ³•ï¼š<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">setupCellTapHandling</span><span class="params">()</span></span>&#123;</div><div class="line">    tableView.rx.modelSelected(<span class="type">Chocolate</span>.<span class="keyword">self</span>) <span class="comment">//1</span></div><div class="line">    .subscribe(onNext:&#123; <span class="comment">//2</span></div><div class="line">        chocolate <span class="keyword">in</span></div><div class="line">        <span class="type">ShoppingCart</span>.sharedCart.chocolates.value.append(chocolate)</div><div class="line">        <span class="keyword">if</span> <span class="keyword">let</span> selectedRowIndexPath = <span class="keyword">self</span>.tableView.indexPathForSelectedRow&#123;</div><div class="line">            <span class="keyword">self</span>.tableView.deselectRow(at: selectedRowIndexPath, animated:<span class="literal">true</span>)</div><div class="line">        &#125; <span class="comment">//3</span></div><div class="line">        &#125;).addDisposableTo(disposeBag) <span class="comment">//4</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>ä¸€æ­¥ä¸€æ­¥æ¥è§£é‡Šï¼š</p><ol><li>ç»™ table view çš„æ‰©å±•æ–¹æ³•<code>modelSelected(_:)</code>ä¼ å…¥ä¸€ä¸ª<code>Chocolate model</code>æ¥è·å–è¿”å›å€¼çš„æ­£ç¡®ç±»å‹ã€‚è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ª Observableã€‚</li><li>è·å–é‚£ä¸ª Observableï¼Œè°ƒç”¨<code>subscribe(onNext:)</code>æ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ªå°¾éšé—­åŒ…ï¼Œè¿™ä¸ªé—­åŒ…å°†ä¼šåœ¨æ¯æ¬¡ model è¢«é€‰ä¸­çš„æ—¶å€™æ‰§è¡Œã€‚</li><li>å½“<code>self.tableView.indexPathForSelectedRow</code>æœ‰å€¼çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯è¢«é€‰ä¸­çš„æ—¶å€™ï¼Œå–æ¶ˆé€‰æ‹©å®ƒã€‚</li><li>è®°å¾—åŠ å…¥ DisposeBag</li></ol><p>æœ€åè®°å¾—åœ¨ viewDidLoad ä¸­åŠ å…¥å¯¹ä¸Šé¢å‡½æ•°çš„è°ƒç”¨ã€‚</p><h2 id="0x07-æ–‡æœ¬å“åº”å¼è¾“å…¥"><a href="#0x07-æ–‡æœ¬å“åº”å¼è¾“å…¥" class="headerlink" title="0x07 æ–‡æœ¬å“åº”å¼è¾“å…¥"></a>0x07 æ–‡æœ¬å“åº”å¼è¾“å…¥</h2><p>åœ¨ä¸€èˆ¬åº”ç”¨ä¸­ï¼Œæ–‡å­—è¾“å…¥çš„å¤„ç†ä¸€èˆ¬éƒ½äº¤ç»™<code>UITextFieldDelegate</code>æ¥åšï¼Œé€šå¸¸å…¶æ–¹æ³•é‡Œä¼šåŒ…å«å¾ˆå¤šçš„ if/else æ¥å†³å®šå“ªä¸ªæ“ä½œå’Œé€»è¾‘åº”è¯¥è¢«æ‰§è¡Œã€‚Reactive åˆ™ä¸åŒã€‚ä½“ä¼šä¸€ä¸‹ï¼š</p><p>åœ¨<code>BillingInfoViewController.swift</code>ä¸­å¢åŠ  DisposeBag<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div></pre></td></tr></table></figure><p></p><p>ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•æ ¹æ®ç”¨æˆ·çš„è¾“å…¥å±•ç¤ºä¿¡ç”¨å¡çš„å›¾æ ‡ï¼š<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">setupCardImageDisplay</span><span class="params">()</span></span>&#123;</div><div class="line">    cardType.asObservable()</div><div class="line">    .subscribe(onNext:&#123;</div><div class="line">        cardType <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>.careditCardImageView.image = cardType.image</div><div class="line">        &#125;).addDisposableTo(disposeBag)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>æ¥ä¸‹æ¥å¤„ç†ä¸€äº›æœ‰è¶£çš„äº‹ï¼Œå¦‚æœç”¨æˆ·æ‰“å­—å¾ˆå¿«ï¼Œä½ å¯èƒ½ä¸æƒ³ç«‹å³å¤„ç†è¾“å…¥çš„å­—ç¬¦ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´åº”ç”¨æ‰§è¡Œç¼“æ…¢ã€‚è§£å†³åŠæ³•å¾ˆç®€å•ï¼Œä½¿ç”¨<code>throttle</code>ï¼ŒæŒ‰ç…§é—´éš”æ—¶é—´æ¥æ‰§è¡Œé€»è¾‘è€Œä¸æ˜¯æ¯æ¬¡æ”¹å˜éƒ½æ‰§è¡Œã€‚</p><p>åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç ï¼š</p><p>é¦–å…ˆï¼Œåœ¨<code>BillingInfoViewController</code>ä¸­å¢åŠ å¦‚ä¸‹ä»£ç ï¼š<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">let</span> throttleInterVal = <span class="number">0.1</span></div></pre></td></tr></table></figure><p></p><p>è¿™é‡Œä»¥ç§’ä¸ºå•ä½å®šä¹‰äº† throttle length çš„å¸¸æ•°ã€‚</p><p>ç„¶åå†å¢åŠ å¦‚ä¸‹ä»£ç ï¼š<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">setupTextChangeHandling</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">let</span> creditCardValid = creditCardNumberTextField</div><div class="line">    .rx.text.throttle(throttleInterVal, scheduler: <span class="type">MainScheduler</span>.instance) <span class="comment">//1</span></div><div class="line">    .<span class="built_in">map</span>&#123; <span class="keyword">self</span>.validate(cardText: $<span class="number">0</span>) &#125; <span class="comment">//2</span></div><div class="line"></div><div class="line">    creditCardValid.subscribe(onNext:&#123;</div><div class="line">        <span class="keyword">self</span>.creditCardNumberTextField.valid = $<span class="number">0</span> <span class="comment">//3</span></div><div class="line">        &#125;).addDisposableTo(disposeBag) <span class="comment">//4</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p><strong>Note:å¦‚æœä½ åœ¨è®¾ç½® creditCardValid çš„æ—¶å€™å¾—åˆ°ä¸€ä¸ªâ€œ<em>Generic parameter R could not be inferred</em>â€é”™è¯¯ï¼Œä½ å¯ä»¥æ˜¾å¼åœ°æŒ‡æ˜ creditCardValid çš„ç±»å‹ï¼š<code>let creditCardValid: Observable</code>ã€‚ç†è®ºä¸Šç¼–è¯‘å™¨åº”è¯¥èƒ½å¤Ÿè‡ªåŠ¨æ¨æ–­å‡ºè¿™ä¸ªç±»å‹ï¼Œä½†æ˜¯æœ‰æ—¶å€™å®ƒå¯èƒ½éœ€è¦ä¸€ç‚¹åŠ¨åŠ›ğŸ™‚</strong></p><p>å¥½ï¼Œé‚£ä¹ˆè¿™äº›ä»£ç åšäº†ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬ç»§ç»­ä¸€æ­¥æ­¥åˆ†æï¼š</p><ol><li>ä½ å¯¹è¾“å…¥è¿›è¡Œäº† <code>throttle</code> æ“ä½œï¼Œæ‰€ä»¥éªŒè¯é€»è¾‘åªä¼šæ ¹æ®ä½ åœ¨ä¸Šé¢è®¾ç½®çš„æ—¶é—´æ¥æ‰§è¡Œã€‚<code>scheduler</code>å‚æ•°æ˜¯ä¸€ä¸ªæ›´é«˜çº§çš„æ¦‚å¿µï¼Œç®€å•æ¥è¯´å®ƒæ˜¯ç”¨æ¥ç»‘å®šä¸€ä¸ªçº¿ç¨‹çš„ï¼Œå¦‚æœä½ è¦ä½¿ç”¨ä¸»çº¿ç¨‹çš„è¯ï¼Œåˆ™è®¾ç½®ä¸º<code>MainScheduler</code>ï¼ˆUI æ“ä½œéƒ½éœ€è¦ä¸»çº¿ç¨‹ï¼‰</li><li>é€šè¿‡è°ƒç”¨<code>validate(cardText)</code>æ¥æŠŠ throttle è¾“å…¥æµ map æˆä¸€ä¸ª Boolean ç±»å‹çš„æµã€‚</li><li>è·å–å¹¶ä¸”è®¢é˜… creditCardValid ï¼ŒåŸºäºè¾“å…¥æ¥æ”¹å˜ text field çš„éªŒè¯çŠ¶æ€ã€‚</li><li>åŠ å…¥ DisposeBag ï¼Œä¸è´¹è¯äº†</li></ol><p>æ¥ä¸‹æ¥å“åº”å¼æ“ä½œ Expiration date å’Œ CVV Codeåœ¨<code>setupTextChangeHandling()</code>åº•éƒ¨ç»§ç»­å¢åŠ å¦‚ä¸‹ä»£ç ï¼š<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> expirationValid = expirationDateTextField</div><div class="line">.rx.text.throttle(throttleInterval, scheduler: <span class="type">MainScheduler</span>.instance)</div><div class="line">  .<span class="built_in">map</span> &#123; <span class="keyword">self</span>.validate(expirationDateText: $<span class="number">0</span>) &#125;</div><div class="line"></div><div class="line">expirationValid.subscribe(onNext: &#123;</div><div class="line">    <span class="keyword">self</span>.expirationDateTextField.valid = $<span class="number">0</span></div><div class="line">    &#125;).addDisposableTo(disposeBag)</div><div class="line"></div><div class="line"><span class="keyword">let</span> cvvValid = cvvTextField</div><div class="line">  .rx.text.<span class="built_in">map</span> &#123; <span class="keyword">self</span>.validate(cvvText: $<span class="number">0</span>) &#125;</div><div class="line"></div><div class="line">cvvValid</div><div class="line">  .subscribe(onNext: &#123; <span class="keyword">self</span>.cvvTextField.valid = $<span class="number">0</span> &#125;)</div><div class="line">  .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure><p></p><p>ç°åœ¨ï¼Œä½ è·å–äº†ä¸‰ä¸ªæ–‡æœ¬æ¡†çš„æ‰€æœ‰å¯è§‚å¯Ÿçš„å€¼ï¼Œé‚£ä¹ˆå¢åŠ ä¸‹é¢çš„ä»£ç ï¼š<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> everythingValid = <span class="type">Observable</span></div><div class="line">    .combineLatest(creditCardValid, expirationValid, cvvValid)&#123;</div><div class="line">    $<span class="number">0</span> &amp;&amp; $<span class="number">1</span> &amp;&amp; $<span class="number">2</span> <span class="comment">//all must be true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">everythingValid.bindTo(purchaseButton.rx.enable)</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure><p></p><p>è¿™é‡Œç”¨åˆ°äº† Observable çš„ç±»æ–¹æ³•ï¼š<code>combineLatest()</code>ï¼Œå¥½å¥½ä½“ä¼šä¸€ä¸‹ã€‚</p><p><code>everythingValid</code>ç„¶åå’Œ UIButton åœ¨ rx æ‰©å±•å†…çš„<code>enabled</code>å±æ€§ç»‘å®šäº†ï¼Œæ‰€ä»¥æŒ‰é’®çš„çŠ¶æ€è¢« <code>everythingValid</code> çš„å€¼æ¥æ§åˆ¶ã€‚å¦‚æœæ‰€æœ‰ä¸‰ä¸ªæ–‡æœ¬åŸŸéƒ½ä¸ºçœŸï¼ŒæŒ‰é’®æ‰èƒ½è¢«æŒ‰ä¸‹</p><p>å¥½çš„ï¼Œç°åœ¨ä½ å·²ç»å†™å¥½è®¾ç½®æ–¹æ³•äº†ï¼Œåœ¨<code>viewDidLoad()</code>ä¸­è°ƒç”¨å®ƒå§ï¼š<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">setupCardImageDisplay()</div><div class="line">setupTextChangeHandling()</div></pre></td></tr></table></figure><p></p><p>æ¥ä¸‹æ¥è¿è¡Œä¸€ä¸‹çœ‹çœ‹æ•ˆæœï¼Œå¥½å¥½ä½“ä¼šï¼Œå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå°½ç®¡æäº¤ issueã€‚</p><h2 id="0x08-å°¾å£°"><a href="#0x08-å°¾å£°" class="headerlink" title="0x08 å°¾å£°"></a>0x08 å°¾å£°</h2><p>å¦‚æœä½ æƒ³å¤šå°è¯•ä¸€ä¸‹ï¼Œè¯•è¯•çœ‹ï¼š</p><ol><li>è®© <code>CartViewController</code> ä½¿ç”¨ä¸€ä¸ªå“åº”å¼çš„ TableView æ¥å±•ç¤ºè´­ç‰©è½¦çš„æ•°æ®ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª Labelã€‚</li><li>å…è®¸ç”¨æˆ·ç›´æ¥åœ¨è´­ç‰©è½¦é¡µé¢å¢åŠ æˆ–è€…ç§»é™¤å·§å…‹åŠ›ï¼Œè‡ªåŠ¨æ›´æ–°æ€»ä»·ã€‚</li></ol><p>å¥½äº†ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œå¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºå“åº”å¼ç¼–ç¨‹çš„å†…å®¹çš„è¯ï¼Œä¸‹é¢çš„å†…å®¹ä½ ç»å¯¹ä¸ä¼šé”™è¿‡ï¼š</p><ol><li><a href="http://slack.rxswift.org/" target="_blank" rel="external">RxSwift Slack</a></li><li><a href="https://github.com/ReactiveX/RxSwift/blob/master/Documentation/GettingStarted.md" target="_blank" rel="external">RxSwiftâ€™s Getting Started guide</a></li><li><a href="https://realm.io/news/slug-max-alexander-functional-reactive-rxswift/" target="_blank" rel="external">Max Alexanderâ€™s talk on Rx at Realm</a></li><li><a href="http://rx-marin.com" target="_blank" rel="external">rx-marin</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¾ˆå¤šé¢å‘å¯¹è±¡çš„å¼€å‘äººå‘˜éƒ½é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼šè½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéœ€è¦å¼€å‘äººå‘˜ä¸»åŠ¨åœ°å‘Šè¯‰ç³»ç»Ÿä»€ä¹ˆä¸œè¥¿æ”¹å˜äº†ï¼Œä»¥æ­¤æ¥è§¦å‘å“åº”ã€‚&lt;/p&gt;&lt;p&gt;é‚£æœ‰äººå°±ä¼šæƒ³ï¼Œå¦‚æœæœ‰ä¸€ä¸ªåŠæ³•å¯ä»¥è®©ç³»ç»Ÿè‡ªåŠ¨å‘ç°çŠ¶æ€çš„æ”¹å˜ï¼Œæ˜¯ä¸æ˜¯æ›´å¥½å‘¢ï¼Ÿ&lt;/p&gt;&lt;p&gt;è¿™å°±å¼•å‡ºäº†å“åº”å¼å¼€å‘æœ€åŸºæœ¬çš„æ¦‚å¿µâ€¦â€¦&lt;br&gt;
    
    </summary>
    
    
      <category term="iOS" scheme="http://blog.superyoung.win/tags/iOS/"/>
    
      <category term="Programming" scheme="http://blog.superyoung.win/tags/Programming/"/>
    
      <category term="Swift" scheme="http://blog.superyoung.win/tags/Swift/"/>
    
      <category term="RxSwift" scheme="http://blog.superyoung.win/tags/RxSwift/"/>
    
      <category term="å“åº”å¼" scheme="http://blog.superyoung.win/tags/%E5%93%8D%E5%BA%94%E5%BC%8F/"/>
    
      <category term="å¼€å‘" scheme="http://blog.superyoung.win/tags/%E5%BC%80%E5%8F%91/"/>
    
      <category term="å…¥é—¨" scheme="http://blog.superyoung.win/tags/%E5%85%A5%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title>å…³äº SequenceType</title>
    <link href="http://blog.superyoung.win/2017/01/25/learning_iOS/SequenceType/"/>
    <id>http://blog.superyoung.win/2017/01/25/learning_iOS/SequenceType/</id>
    <published>2017-01-25T07:47:23.000Z</published>
    <updated>2017-01-29T02:27:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>Coming soonâ€¦<br><a id="more"></a></p><h2 id="ä»-Array-å¼€å§‹"><a href="#ä»-Array-å¼€å§‹" class="headerlink" title="ä» Array å¼€å§‹"></a>ä» Array å¼€å§‹</h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Coming soonâ€¦&lt;br&gt;
    
    </summary>
    
    
      <category term="iOS" scheme="http://blog.superyoung.win/tags/iOS/"/>
    
      <category term="Programming" scheme="http://blog.superyoung.win/tags/Programming/"/>
    
      <category term="Coming soon..." scheme="http://blog.superyoung.win/tags/Coming-soon/"/>
    
      <category term="Sequence" scheme="http://blog.superyoung.win/tags/Sequence/"/>
    
      <category term="type" scheme="http://blog.superyoung.win/tags/type/"/>
    
  </entry>
  
  <entry>
    <title>Debug Print in iOS Programming</title>
    <link href="http://blog.superyoung.win/2017/01/15/learning_iOS/debugPrint/"/>
    <id>http://blog.superyoung.win/2017/01/15/learning_iOS/debugPrint/</id>
    <published>2017-01-15T02:29:44.000Z</published>
    <updated>2017-01-29T02:27:34.000Z</updated>
    
    <content type="html"><![CDATA[<p>è‡ªå®šä¹‰ print è¾“å‡º<br><a id="more"></a></p><p><em>è¯·å…ˆå‚è€ƒ<a href="http://swifter.tips/print/" target="_blank" rel="external">ç‹é­çš„åšå®¢ Swifter</a></em></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è‡ªå®šä¹‰ print è¾“å‡º&lt;br&gt;
    
    </summary>
    
    
      <category term="Coming soon..." scheme="http://blog.superyoung.win/tags/Coming-soon/"/>
    
  </entry>
  
  <entry>
    <title>Swift ä¸­å¦‚ä½•è·å–å®ä¾‹ç±»å‹</title>
    <link href="http://blog.superyoung.win/2017/01/15/learning_iOS/get-type-of-instance/"/>
    <id>http://blog.superyoung.win/2017/01/15/learning_iOS/get-type-of-instance/</id>
    <published>2017-01-15T02:17:03.000Z</published>
    <updated>2017-01-29T02:27:30.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€é—¨ç¼–ç¨‹è¯­è¨€çš„åŠ¨æ€ç‰¹æ€§ï¼Œæœ€åŸºç¡€çš„å°±æ˜¯è·å–ä¸€ä¸ªå®ä¾‹çš„ç±»å‹ã€‚<br><a id="more"></a></p><h2 id="åœ¨-ObjC-ä¸­æˆ‘ä»¬æ€ä¹ˆåšï¼Ÿ"><a href="#åœ¨-ObjC-ä¸­æˆ‘ä»¬æ€ä¹ˆåšï¼Ÿ" class="headerlink" title="åœ¨ ObjC ä¸­æˆ‘ä»¬æ€ä¹ˆåšï¼Ÿ"></a>åœ¨ ObjC ä¸­æˆ‘ä»¬æ€ä¹ˆåšï¼Ÿ</h2><p>åœ¨ ObjC ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªå®ä¾‹çš„ class æ–¹æ³•æ¥è·å–å…¶ç±»å‹å<br></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSDate</span> *date = [<span class="built_in">NSDate</span> date];</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,<span class="built_in">NSStringFromClass</span>([date <span class="keyword">class</span>]));</div></pre></td></tr></table></figure><p></p><h2 id="åœ¨-Swift-ä¸­æ²¡æœ‰å®ä¾‹çš„-class-æ–¹æ³•"><a href="#åœ¨-Swift-ä¸­æ²¡æœ‰å®ä¾‹çš„-class-æ–¹æ³•" class="headerlink" title="åœ¨ Swift ä¸­æ²¡æœ‰å®ä¾‹çš„ class æ–¹æ³•"></a>åœ¨ Swift ä¸­æ²¡æœ‰å®ä¾‹çš„ class æ–¹æ³•</h2><p>å¯ä»¥æ±‚åŠ©äº ObjC è¿è¡Œæ—¶ï¼Œè°ƒç”¨ <code>object_getClass(AnyTypeInstance)</code>ã€‚ä¾‹å­å¦‚ä¸‹ï¼š<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> date = <span class="type">NSDate</span>()</div><div class="line"><span class="built_in">print</span>(object_getClass(date))</div></pre></td></tr></table></figure><p></p><h2 id="object-getClass-æ–¹æ³•è¿”å›ç±»å‹æ˜¯ï¼Ÿ"><a href="#object-getClass-æ–¹æ³•è¿”å›ç±»å‹æ˜¯ï¼Ÿ" class="headerlink" title="object_getClass() æ–¹æ³•è¿”å›ç±»å‹æ˜¯ï¼Ÿ"></a><code>object_getClass()</code> æ–¹æ³•è¿”å›ç±»å‹æ˜¯ï¼Ÿ</h2><p>æ˜¯ AnyClass! å¯ä»¥é€šè¿‡ <code>debugPrint</code> æ¥éªŒè¯ï¼Œå…³äº <code>debugPrint</code>ï¼Œå‚è§<a href="../debugPrint/README.md">debugPrint()</a></p><h2 id="æ›´åŠ ç¬¦åˆ-Swift-é£æ ¼çš„åšæ³•"><a href="#æ›´åŠ ç¬¦åˆ-Swift-é£æ ¼çš„åšæ³•" class="headerlink" title="æ›´åŠ ç¬¦åˆ Swift é£æ ¼çš„åšæ³•"></a>æ›´åŠ ç¬¦åˆ Swift é£æ ¼çš„åšæ³•</h2><p>Swift 2 ä»¥å‰çš„æ–¹æ³•ï¼Œå·²æŠ›å¼ƒ<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> date = <span class="type">NSDate</span>()</div><div class="line"><span class="built_in">print</span>(date.<span class="keyword">dynamicType</span>)</div></pre></td></tr></table></figure><p></p><p>Swift 3.0 ä»¥åä½¿ç”¨ <code>type(of:AnyTypeInstance)</code>æ–¹æ³•<br></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> date = <span class="type">NSDate</span>()</div><div class="line"><span class="built_in">print</span>(type(of:date))</div></pre></td></tr></table></figure><p></p><p><em>å‚è€ƒ:</em></p><ol><li><em><a href="http://swifter.tips/instance-type/" target="_blank" rel="external">ç‹é­çš„åšå®¢ Swifter</a></em></li><li><em><a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/Types.html" target="_blank" rel="external">Apple å®˜æ–¹æ–‡æ¡£å…³äº Metatype Type çš„å†…å®¹</a></em></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€é—¨ç¼–ç¨‹è¯­è¨€çš„åŠ¨æ€ç‰¹æ€§ï¼Œæœ€åŸºç¡€çš„å°±æ˜¯è·å–ä¸€ä¸ªå®ä¾‹çš„ç±»å‹ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="iOS" scheme="http://blog.superyoung.win/tags/iOS/"/>
    
      <category term="Programming" scheme="http://blog.superyoung.win/tags/Programming/"/>
    
      <category term="type" scheme="http://blog.superyoung.win/tags/type/"/>
    
      <category term="Swift" scheme="http://blog.superyoung.win/tags/Swift/"/>
    
      <category term="language" scheme="http://blog.superyoung.win/tags/language/"/>
    
      <category term="instance" scheme="http://blog.superyoung.win/tags/instance/"/>
    
  </entry>
  
  <entry>
    <title>Block ç®€ä»‹</title>
    <link href="http://blog.superyoung.win/2017/01/04/learning_iOS/Block-in-Objc/"/>
    <id>http://blog.superyoung.win/2017/01/04/learning_iOS/Block-in-Objc/</id>
    <published>2017-01-03T17:13:54.000Z</published>
    <updated>2017-01-29T02:27:27.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»€ä¹ˆæ˜¯ Blockï¼ŸBlock å¯ä»¥å®ç°é—­åŒ…ã€‚Block ä¸å‡½æ•°ç±»ä¼¼ï¼Œåªä¸è¿‡æ˜¯ç›´æ¥å®šä¹‰åœ¨å¦ä¸€ä¸ªå‡½æ•°é‡Œã€‚Block ä¹Ÿå¯ä»¥è®¿é—®ã€æ•è·å®ƒè¢«å£°æ˜çš„åŒºåŸŸå†…çš„æ‰€æœ‰å˜é‡ã€‚è€Œä¸” Block å› ä¸ºæœ‰è¿”å›ç±»å‹ï¼Œå®ƒå…¶å®ä¹Ÿå¯ä»¥ä½œä¸ºä¸ªå€¼æ¥å¯¹å¾…ã€‚<br><a id="more"></a></p><h2 id="å®šä¹‰-Block-çš„è¯­æ³•ç»“æ„å¦‚ä¸‹"><a href="#å®šä¹‰-Block-çš„è¯­æ³•ç»“æ„å¦‚ä¸‹" class="headerlink" title="å®šä¹‰ Block çš„è¯­æ³•ç»“æ„å¦‚ä¸‹"></a>å®šä¹‰ Block çš„è¯­æ³•ç»“æ„å¦‚ä¸‹</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">return_type (^block_name)(parameters)&#123;&#125;</div></pre></td></tr></table></figure><h2 id="Block-æ•è·çš„å˜é‡æ˜¯ä¸å¯ä»¥åœ¨-Block-ä¸­ä¿®æ”¹çš„"><a href="#Block-æ•è·çš„å˜é‡æ˜¯ä¸å¯ä»¥åœ¨-Block-ä¸­ä¿®æ”¹çš„" class="headerlink" title="Block æ•è·çš„å˜é‡æ˜¯ä¸å¯ä»¥åœ¨ Block ä¸­ä¿®æ”¹çš„"></a>Block æ•è·çš„å˜é‡æ˜¯ä¸å¯ä»¥åœ¨ Block ä¸­ä¿®æ”¹çš„</h2><p>è‹¥è¦ä¿®æ”¹ï¼Œè¯¥å˜é‡éœ€è¦åœ¨å£°æ˜çš„æ—¶å€™åŠ ä¸Š <code>__block</code> ä¿®é¥°ç¬¦ã€‚</p><h2 id="Block-å’Œ-Grand-Central-Dispatch"><a href="#Block-å’Œ-Grand-Central-Dispatch" class="headerlink" title="Block å’Œ Grand Central Dispatch"></a>Block å’Œ Grand Central Dispatch</h2><p><code>Grand Central Dispatch</code> æ˜¯ä¸€ç§ä¸ <code>Block</code> æœ‰å…³çš„æŠ€æœ¯ï¼Œå®ƒæä¾›äº†å¯¹çº¿ç¨‹çš„æŠ½è±¡ï¼Œè¿™ç§æŠ½è±¡åŸºäºæ´¾å‘é˜Ÿåˆ—<code>dispatch queue</code>ï¼Œå¼€å‘è€…å¯ä»¥å°† <code>Block</code> æ’å…¥é˜Ÿåˆ—ä¸­ï¼Œç”± <code>GCD</code> è´Ÿè´£è°ƒåº¦ã€‚</p><h2 id="å°å¿ƒä¿ç•™ç¯"><a href="#å°å¿ƒä¿ç•™ç¯" class="headerlink" title="å°å¿ƒä¿ç•™ç¯"></a>å°å¿ƒä¿ç•™ç¯</h2><p>è‹¥åœ¨ç±»çš„å®ä¾‹æ–¹æ³•ä¸­å®šä¹‰ä¸€ä¸ªå—ï¼Œé‚£ä¹ˆå—ä¼šæ•è· <code>self</code> å˜é‡ï¼Œå¦‚æœ <code>self</code> æ‰€æŒ‡ä»£çš„é‚£ä¸ªå¯¹è±¡åŒæ—¶ä¹Ÿä¿ç•™äº†å—ï¼Œåˆ™ä¼šå¯¼è‡´â€œä¿ç•™ç¯â€ã€‚</p><h2 id="è§£å†³ä¿ç•™ç¯é—®é¢˜"><a href="#è§£å†³ä¿ç•™ç¯é—®é¢˜" class="headerlink" title="è§£å†³ä¿ç•™ç¯é—®é¢˜"></a>è§£å†³ä¿ç•™ç¯é—®é¢˜</h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œåªè¦é€‚æ—¶æ¸…ç†æ‰ç¯ä¸­çš„æŸä¸ªå¼•ç”¨ï¼Œå°±ä¸ä¼šæœ‰é—®é¢˜ã€‚å¯¹äºå—æ¥è¯´çš„è¯ï¼Œåœ¨å—çš„æœ€åä»¤ <code>Handler = nil;</code> å³å¯è§£å†³ä¿ç•™ç¯é—®é¢˜ã€‚</p><h2 id="å…¨å±€å¿«ã€æ ˆå—ã€å †å—"><a href="#å…¨å±€å¿«ã€æ ˆå—ã€å †å—" class="headerlink" title="å…¨å±€å¿«ã€æ ˆå—ã€å †å—"></a>å…¨å±€å¿«ã€æ ˆå—ã€å †å—</h2><p>æ ˆå—æ‰€å æ®çš„å†…å­˜ç©ºé—´å¯èƒ½ä¼šè¢«è‡ªåŠ¨è¦†å†™ï¼Œè‹¥è¢«è¦†å†™ï¼Œåˆ™è¿è¡Œæ—¶å°†ä¼šå‡ºé”™ã€‚è§£å†³æ­¤é—®é¢˜å¯ä»¥ç»™å—å¯¹è±¡å‘é€ <code>copy</code> æ¶ˆæ¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š<br></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">block = [^&#123;codeInBlock&#125; <span class="keyword">copy</span>];</div></pre></td></tr></table></figure><p></p><h2 id="ä¸ºå¸¸ç”¨å—åˆ›å»º-typedef"><a href="#ä¸ºå¸¸ç”¨å—åˆ›å»º-typedef" class="headerlink" title="ä¸ºå¸¸ç”¨å—åˆ›å»º typedef"></a>ä¸ºå¸¸ç”¨å—åˆ›å»º typedef</h2><p>åˆ›å»ºçš„è¯­æ³•è§„åˆ™ï¼š<br></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typedef</span> <span class="keyword">int</span>(^block_name)(parameters);</div></pre></td></tr></table></figure><p></p><p>è°ƒç”¨çš„è¯­æ³•è§„åˆ™ï¼š<br></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">block_name block = ^(parameters)&#123;&#125;</div></pre></td></tr></table></figure><p></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»€ä¹ˆæ˜¯ Blockï¼ŸBlock å¯ä»¥å®ç°é—­åŒ…ã€‚Block ä¸å‡½æ•°ç±»ä¼¼ï¼Œåªä¸è¿‡æ˜¯ç›´æ¥å®šä¹‰åœ¨å¦ä¸€ä¸ªå‡½æ•°é‡Œã€‚Block ä¹Ÿå¯ä»¥è®¿é—®ã€æ•è·å®ƒè¢«å£°æ˜çš„åŒºåŸŸå†…çš„æ‰€æœ‰å˜é‡ã€‚è€Œä¸” Block å› ä¸ºæœ‰è¿”å›ç±»å‹ï¼Œå®ƒå…¶å®ä¹Ÿå¯ä»¥ä½œä¸ºä¸ªå€¼æ¥å¯¹å¾…ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="iOS" scheme="http://blog.superyoung.win/tags/iOS/"/>
    
      <category term="Programming" scheme="http://blog.superyoung.win/tags/Programming/"/>
    
      <category term="Objective C" scheme="http://blog.superyoung.win/tags/Objective-C/"/>
    
      <category term="Block" scheme="http://blog.superyoung.win/tags/Block/"/>
    
  </entry>
  
  <entry>
    <title>Coordinate System</title>
    <link href="http://blog.superyoung.win/2017/01/04/learning_iOS/coordinate-system/"/>
    <id>http://blog.superyoung.win/2017/01/04/learning_iOS/coordinate-system/</id>
    <published>2017-01-03T17:12:31.000Z</published>
    <updated>2017-01-29T02:27:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>iOS çš„åæ ‡ç³»ç»Ÿ<br><a id="more"></a><br>æ¯ä¸€ä¸ª view éƒ½æœ‰å®ƒçš„ coordinate systemã€‚ åŸç‚¹åœ¨ï¼ˆ0ï¼Œ0ï¼‰ï¼Œ æ‹¥æœ‰å®½åº¦å’Œé«˜åº¦å±æ€§ã€‚<br>åœ¨ iOS ä¸­ä½¿ç”¨ <code>bounds</code> æ¥æè¿° coordinate systemã€‚<br>iOS ä¸­çš„ <code>frame</code> çš„ <code>origin</code> å±æ€§ä¼šå«æœ‰ç›¸å¯¹äº superview çš„ coordinate system åæ ‡ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;iOS çš„åæ ‡ç³»ç»Ÿ&lt;br&gt;
    
    </summary>
    
    
      <category term="iOS" scheme="http://blog.superyoung.win/tags/iOS/"/>
    
      <category term="Programming" scheme="http://blog.superyoung.win/tags/Programming/"/>
    
      <category term="Coordinate" scheme="http://blog.superyoung.win/tags/Coordinate/"/>
    
      <category term="System" scheme="http://blog.superyoung.win/tags/System/"/>
    
      <category term="åæ ‡ç³»ç»Ÿ" scheme="http://blog.superyoung.win/tags/%E5%9D%90%E6%A0%87%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºUIAlertController</title>
    <link href="http://blog.superyoung.win/2017/01/04/learning_iOS/UIAlertController/"/>
    <id>http://blog.superyoung.win/2017/01/04/learning_iOS/UIAlertController/</id>
    <published>2017-01-03T17:09:49.000Z</published>
    <updated>2017-01-29T02:27:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ªäººå­¦ä¹ ä½¿ç”¨ UIAlertController çš„æ—¶å€™çš„æ€»ç»“<br><a id="more"></a><br>åœ¨ iOS8 ä»¥åï¼Œè‹¹æœæ¨å‡ºäº†ä¸€ä¸ªæ–°çš„ Alert ç±»ï¼š<code>UIAlertController</code>ã€‚åŸæœ‰çš„<code>UIAlertView</code>å·²ç»ä¸æ¨èä½¿ç”¨ã€‚æ•…æœ¬æ–‡ä¸»è¦ä»‹ç»<code>UIAlertController</code></p><h2 id="å¦‚ä½•ä½¿ç”¨UIAlertController"><a href="#å¦‚ä½•ä½¿ç”¨UIAlertController" class="headerlink" title="å¦‚ä½•ä½¿ç”¨UIAlertController"></a>å¦‚ä½•ä½¿ç”¨UIAlertController</h2><ol><li>å®ä¾‹åŒ–æ–¹æ³•ï¼š<code>UIAlertController *alert = [UIAlertController alertControllerWithTitle:(NSString*)title message:(NSString*)msg preferredStyle:(UIAlertControllerStyle)style];</code></li><li>æ˜¾ç¤ºæ–¹æ³•ï¼š<code>[self presentViewController:(UIAlertController*)con animation:... completion:(^)block];</code><h2 id="å…³äºUIAlertAction"><a href="#å…³äºUIAlertAction" class="headerlink" title="å…³äºUIAlertAction"></a>å…³äºUIAlertAction</h2></li><li>å®ä¾‹åŒ–æ–¹æ³•ï¼š<code>[UIAlertAction *action = [UIAlertActionWithTitle:(NSString*)title style:... handler:(^)block]];</code></li><li>ä¸ºäº†åœ¨ä¸€ä¸ª Alert ä¸­æ·»åŠ é€‰é¡¹æŒ‰é’®ï¼Œå¯ä»¥å°†ä¸€ä¸ª<code>UIAlertAction</code>å¯¹è±¡æ·»åŠ åˆ°ä¸€ä¸ª<code>UIAlertController</code>å¯¹è±¡ã€‚å‘é€å¦‚ä¸‹æ¶ˆæ¯å³å¯ï¼š<br><code>[alert addAction:(UIAlertAction*)action];</code><h2 id="å¦‚ä½•è‡ªå®šä¹‰-UIAlertController"><a href="#å¦‚ä½•è‡ªå®šä¹‰-UIAlertController" class="headerlink" title="å¦‚ä½•è‡ªå®šä¹‰ UIAlertController"></a>å¦‚ä½•è‡ªå®šä¹‰ UIAlertController</h2><h3 id="å…ˆå®šä¸€ä¸ªå°ç›®æ ‡ï¼Œæ¯”å¦‚è¯´ï¼Œæ·»åŠ ä¸€ä¸ª-UITextFieldï¼š"><a href="#å…ˆå®šä¸€ä¸ªå°ç›®æ ‡ï¼Œæ¯”å¦‚è¯´ï¼Œæ·»åŠ ä¸€ä¸ª-UITextFieldï¼š" class="headerlink" title="å…ˆå®šä¸€ä¸ªå°ç›®æ ‡ï¼Œæ¯”å¦‚è¯´ï¼Œæ·»åŠ ä¸€ä¸ª UITextFieldï¼š"></a>å…ˆå®šä¸€ä¸ªå°ç›®æ ‡ï¼Œæ¯”å¦‚è¯´ï¼Œæ·»åŠ ä¸€ä¸ª UITextFieldï¼š</h3></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸ªäººå­¦ä¹ ä½¿ç”¨ UIAlertController çš„æ—¶å€™çš„æ€»ç»“&lt;br&gt;
    
    </summary>
    
    
      <category term="iOS" scheme="http://blog.superyoung.win/tags/iOS/"/>
    
      <category term="Programming" scheme="http://blog.superyoung.win/tags/Programming/"/>
    
      <category term="Objective C" scheme="http://blog.superyoung.win/tags/Objective-C/"/>
    
      <category term="UIAlertController" scheme="http://blog.superyoung.win/tags/UIAlertController/"/>
    
  </entry>
  
  <entry>
    <title>UITableView</title>
    <link href="http://blog.superyoung.win/2017/01/04/learning_iOS/UITableView/"/>
    <id>http://blog.superyoung.win/2017/01/04/learning_iOS/UITableView/</id>
    <published>2017-01-03T17:07:32.000Z</published>
    <updated>2017-01-29T02:27:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ªäººå­¦ä¹ ä½¿ç”¨ UITableView çš„æ—¶å€™çš„æ€»ç»“<br><a id="more"></a></p><h2 id="è®¾ç½®æ•°æ®æº-ï¼ˆUITableViewDataSourceï¼‰"><a href="#è®¾ç½®æ•°æ®æº-ï¼ˆUITableViewDataSourceï¼‰" class="headerlink" title="è®¾ç½®æ•°æ®æº ï¼ˆUITableViewDataSourceï¼‰"></a>è®¾ç½®æ•°æ®æº ï¼ˆUITableViewDataSourceï¼‰</h2><p>éœ€è¦<code>æ•°æ®æº</code>æ¥å±•ç¤ºæ•°æ®ï¼ŒdataSourceã€‚ä¼šå‘æ•°æ®æºæŸ¥è¯¢ä¸€å…±å¤šå°‘è¡Œæ•°æ®ä»¥åŠæ¯ä¸€è¡Œæ˜¾ç¤ºä»€ä¹ˆæ•°æ®</p><p>ä¸è®ºä»€ä¹ˆå¯¹è±¡ï¼Œåªè¦å…¶éµå¾ª <code>UITableViewDataSource</code> åè®®å³å¯ã€‚</p><p>UITableViewDataSourceåè®®ä¸­æœ‰ä¸‰ä¸ªéœ€è¦å®ç°çš„å‡½æ•°</p><ol><li><p>tableview æœ‰å‡ ç»„ï¼ˆsectionï¼‰ï¼Ÿ</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">NSInteger</span>) numberOfSectionInTableView: (<span class="built_in">UITableView</span>*) tableView;</div></pre></td></tr></table></figure></li><li><p>æ¯ç»„ï¼ˆsectionï¼‰å‡ è¡Œï¼Ÿ</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">NSInteger</span>) tableView:(<span class="built_in">UITableView</span>*)tableView numberOfRowsInSection:(<span class="built_in">NSInteger</span>)section;</div></pre></td></tr></table></figure></li><li><p>æ¯ç»„æ¯è¡Œåˆ†åˆ«æ˜¾ç¤ºä»€ä¹ˆå†…å®¹ï¼ˆcellï¼‰ï¼Ÿ</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">UITableViewCell</span>*) tableView:(<span class="built_in">UITableView</span>*)tableView cellForRowAtIndexPath:(<span class="built_in">NSIndexPath</span>*)indexPath;</div></pre></td></tr></table></figure></li><li><p>æ¯ç»„çš„ titleForHeader å’Œ titleForFooterã€‚è¿™ä¸¤ä¸ªå­—ä½“ä¸å¯æ›´æ”¹ï¼Œå¦‚æœæœ‰éœ€è¦ï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„ UILabelã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">NSString</span>*)tableView:(<span class="built_in">UITableView</span>*)tableView titleForHeaderInSection:(<span class="built_in">NSInteger</span>)section;</div><div class="line">- (<span class="built_in">NSString</span>*)tableView:(<span class="built_in">UITableView</span>*)tableView titleForFooterInSection:(<span class="built_in">NSInteger</span>)section;</div></pre></td></tr></table></figure></li></ol><h3 id="æ€ä¹ˆåˆ¤æ–­æ˜¯å“ªä¸€ç»„å“ªä¸€è¡Œå‘¢ï¼Ÿ"><a href="#æ€ä¹ˆåˆ¤æ–­æ˜¯å“ªä¸€ç»„å“ªä¸€è¡Œå‘¢ï¼Ÿ" class="headerlink" title="æ€ä¹ˆåˆ¤æ–­æ˜¯å“ªä¸€ç»„å“ªä¸€è¡Œå‘¢ï¼Ÿ"></a>æ€ä¹ˆåˆ¤æ–­æ˜¯å“ªä¸€ç»„å“ªä¸€è¡Œå‘¢ï¼Ÿ</h3><p>çœ‹åˆ°ä¸Šé¢çš„å‚æ•°indexPathäº†å—ï¼Ÿè¿™æ ·åˆ¤æ–­ç»„ï¼š</p><ul><li><code>if(0 == indexPath.section){}</code></li></ul><p>è¿™æ ·åˆ¤æ–­è¡Œï¼š</p><ul><li><code>if(0 == indexPath.row){}</code></li></ul><h3 id="å…³äºUITableViewCell"><a href="#å…³äºUITableViewCell" class="headerlink" title="å…³äºUITableViewCell"></a>å…³äºUITableViewCell</h3><p>åˆå§‹åŒ–æ–¹æ³•ï¼š<br><code>UITableViewCell* cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];</code></p><h4 id="contentViewæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#contentViewæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="contentViewæ˜¯ä»€ä¹ˆï¼Ÿ"></a>contentViewæ˜¯ä»€ä¹ˆï¼Ÿ</h4><p><code>UITableViewCell</code>ä¸­æœ‰ä¸ªé»˜è®¤çš„å­è§†å›¾<code>contentView</code>ï¼Œ <code>contentView</code>æ˜¯æ‰€æœ‰å…¶ä»–å†…å®¹çš„çˆ¶è§†å›¾ã€‚<br>å¯ä»¥é€šè¿‡å…¶ä¸‹çš„<code>accessoryType</code>æ¥æ˜¾ç¤ºè¾…åŠ©æŒ‡ç¤ºè§†å›¾ã€‚</p><h4 id="UITableViewCellStyle-ç±»å‹"><a href="#UITableViewCellStyle-ç±»å‹" class="headerlink" title="UITableViewCellStyle ç±»å‹"></a>UITableViewCellStyle ç±»å‹</h4><ul><li>UITableViewCellStyleDefault</li><li>UITableViewCellStyleSubtitle</li><li>UITableViewCellStyleValue1</li><li>UITableViewCellStyleValue2</li></ul><h3 id="UITableViewCell-çš„ç»“æ„"><a href="#UITableViewCell-çš„ç»“æ„" class="headerlink" title="UITableViewCell çš„ç»“æ„"></a>UITableViewCell çš„ç»“æ„</h3><ul><li><code>UITableViewCell</code></li><li>-&gt;<code>.imageView</code></li><li>-&gt;<code>.textLabel</code></li><li>-&gt;<code>.detailTextLabel</code></li><li>-&gt;<code>.contentView</code></li></ul><p>cell é‡Œé¢åŒ…å«é»˜è®¤ä¸€äº›å­æ§ä»¶ï¼Œä¸è¿‡ä¹Ÿå¯ä»¥è‡ªå·±ç”¨ xib å®šä¹‰ã€‚</p><h2 id="è®¾ç½®ä»£ç†-delegate"><a href="#è®¾ç½®ä»£ç†-delegate" class="headerlink" title="è®¾ç½®ä»£ç†(delegate)"></a>è®¾ç½®ä»£ç†(delegate)</h2><h3 id="ä¸ºä»€ä¹ˆè¦è®¾ç½®ä»£ç†ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦è®¾ç½®ä»£ç†ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦è®¾ç½®ä»£ç†ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦è®¾ç½®ä»£ç†ï¼Ÿ</h3><ul><li><code>å¯¹è±¡A</code>å†…éƒ¨å‘ç”Ÿäº†ä¸€äº›äº‹æƒ…ï¼Œæƒ³è¦é€šçŸ¥<code>å¯¹è±¡B</code></li><li><code>å¯¹è±¡B</code>æƒ³ç›‘å¬<code>å¯¹è±¡A</code>å†…éƒ¨å‘ç”Ÿçš„äº‹æƒ…</li><li><code>å¯¹è±¡A</code>æƒ³åœ¨è‡ªå·±å†…éƒ¨è°ƒç”¨<code>å¯¹è±¡B</code>çš„ä¸€äº›æ–¹æ³•ï¼Œè€Œåˆä¸æƒ³æœ‰äº’ç›¸çš„è€¦åˆä¾èµ–</li></ul><p>ä»¥ä¸Šæƒ…å†µä¸‹ï¼Œ<code>å¯¹è±¡B</code>éƒ½æ˜¯<code>å¯¹è±¡A</code>çš„ä»£ç†ã€‚</p><h3 id="å¦‚ä½•è®¾ç½®ä»£ç†å¯¹è±¡"><a href="#å¦‚ä½•è®¾ç½®ä»£ç†å¯¹è±¡" class="headerlink" title="å¦‚ä½•è®¾ç½®ä»£ç†å¯¹è±¡"></a>å¦‚ä½•è®¾ç½®ä»£ç†å¯¹è±¡</h3><ol><li>åœ¨<code>Stroyboard</code>çš„<code>UIScrollView</code>ä¸Šå³é”®å•å‡»ï¼Œæ‹–<code>delegate</code>åˆ°<code>UIViewController</code>ä¸Šã€‚</li><li>åœ¨æ–¹æ³•<code>viewDidLoad</code>ä¸­æ·»åŠ <code>self.tableView.delegate = self;</code><h3 id="å‘½åè§„èŒƒ"><a href="#å‘½åè§„èŒƒ" class="headerlink" title="å‘½åè§„èŒƒ"></a>å‘½åè§„èŒƒ</h3><code>ç±»å+Delegate</code><br><em>ä¾‹å¦‚<code>UITableViewDelegate</code>å°±æ˜¯<code>UITableView</code>+<code>Delegate</code></em></li></ol><h3 id="åè®®"><a href="#åè®®" class="headerlink" title="åè®®"></a>åè®®</h3><p>å¦‚æœæ˜¯ä¸ºä¸€ä¸ªç±»ç‰¹åˆ«å®šä¹‰çš„åè®®ï¼Œå¯ä»¥ç›´æ¥å†™åœ¨<code>.h</code>æ–‡ä»¶é‡Œï¼Œå¦‚æœå¤šä¸ªç±»ä½¿ç”¨åŒä¸€ä¸ªåè®®ï¼Œå»ºè®®å»ºç«‹ä¸€ä¸ª<code>protocol</code>æ–‡ä»¶ã€‚</p><ul><li>å…³äºå®šä¹‰æ ¼å¼ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">UITableView</span>&lt;<span class="title">NSObject</span>, <span class="title">UIScrollView</span>&gt;</span></div><div class="line"><span class="keyword">@required</span></div><div class="line">- (ReturnType) MethodName;</div><div class="line"><span class="keyword">@optional</span></div><div class="line">- (ReturnType) MethodName;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure><p>é»˜è®¤æ˜¯<code>@required</code>ï¼Œä½†æ˜¯è¿™åªèƒ½ä½œä¸ºç¼–è¯‘å™¨æ£€æŸ¥çš„æ ‡å‡†ï¼Œä½¿ç”¨æ—¶éœ€è¦è‡ªå·±éªŒè¯æ˜¯å¦å®ç°äº†å…·ä½“çš„æ–¹æ³•ï¼ŒéªŒè¯æ–¹æ³•å¦‚ä¸‹ï¼š<br></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>([<span class="keyword">self</span>.delegate respondsToSelector:<span class="keyword">@selector</span>(MethodName)])&#123;</div><div class="line">    MethodName</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><h3 id="ä¸€ä¸ªç®€å•çš„ä¾‹å­"><a href="#ä¸€ä¸ªç®€å•çš„ä¾‹å­" class="headerlink" title="ä¸€ä¸ªç®€å•çš„ä¾‹å­"></a>ä¸€ä¸ªç®€å•çš„ä¾‹å­</h3><h4 id="é¦–å…ˆå®šä¹‰ä¸€ä¸ª-protocol"><a href="#é¦–å…ˆå®šä¹‰ä¸€ä¸ª-protocol" class="headerlink" title="é¦–å…ˆå®šä¹‰ä¸€ä¸ª@protocol"></a>é¦–å…ˆå®šä¹‰ä¸€ä¸ª<code>@protocol</code></h4><p>å£°æ˜åè®®æ–¹æ³•</p><h4 id="å®šä¹‰ä¸€ä¸ªå§”æ‰˜-interface"><a href="#å®šä¹‰ä¸€ä¸ªå§”æ‰˜-interface" class="headerlink" title="å®šä¹‰ä¸€ä¸ªå§”æ‰˜@interface"></a>å®šä¹‰ä¸€ä¸ªå§”æ‰˜<code>@interface</code></h4><p>å¼•å…¥<code>protocol.h</code></p><h4 id="å®šä¹‰ä¸€ä¸ªä»£ç†-interface"><a href="#å®šä¹‰ä¸€ä¸ªä»£ç†-interface" class="headerlink" title="å®šä¹‰ä¸€ä¸ªä»£ç†@interface"></a>å®šä¹‰ä¸€ä¸ªä»£ç†<code>@interface</code></h4><p>åœ¨<code>@interface</code>å£°æ˜ä¸­å£°æ˜éµå®ˆ<code>@protocol</code>åè®®ã€‚ä¾‹å¦‚ï¼š<br></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">viewController</span> () &lt;<span class="title">protocolName</span>&gt;</span></div></pre></td></tr></table></figure><p></p><p>ç„¶ååœ¨<code>@implementation</code>ä¸­å®ç°å…·ä½“çš„åè®®æ–¹æ³•</p><h2 id="å•ç»„æ•°æ®å’Œå¤šç»„æ•°æ®"><a href="#å•ç»„æ•°æ®å’Œå¤šç»„æ•°æ®" class="headerlink" title="å•ç»„æ•°æ®å’Œå¤šç»„æ•°æ®"></a>å•ç»„æ•°æ®å’Œå¤šç»„æ•°æ®</h2><p>å…¶æœ¬è´¨éƒ½æ˜¯ <code>UITableVIew</code> ï¼Œå…·ä½“çš„å·®åˆ«å…¶å®å°±æ˜¯UITableViewçš„å±æ€§ <code>UITableViewStylePlain</code> å’Œ <code>UITableViewStyleGrouped</code>çš„è®¾ç½®ã€‚</p><h2 id="å¥½ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æ¢³ç†ä¸€ä¸‹ä¸€ä¸ª-UITableView-ä»åˆå§‹åŒ–åˆ°å±•ç¤ºçš„æµç¨‹ï¼š"><a href="#å¥½ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æ¢³ç†ä¸€ä¸‹ä¸€ä¸ª-UITableView-ä»åˆå§‹åŒ–åˆ°å±•ç¤ºçš„æµç¨‹ï¼š" class="headerlink" title="å¥½ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æ¢³ç†ä¸€ä¸‹ä¸€ä¸ª UITableView ä»åˆå§‹åŒ–åˆ°å±•ç¤ºçš„æµç¨‹ï¼š"></a>å¥½ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æ¢³ç†ä¸€ä¸‹ä¸€ä¸ª <code>UITableView</code> ä»åˆå§‹åŒ–åˆ°å±•ç¤ºçš„æµç¨‹ï¼š</h2><ol><li>åˆå§‹åŒ–ä¸€ä¸ª <code>UITableView</code> å¯¹è±¡</li></ol><ul><li>è®¾ç½®æ•°æ®æºï¼Œæ•°æ®æºéœ€è¦éµå¾ªåè®®è‡³å°‘å®ç°å¦‚ä¸‹ä¸‰ä¸ªæ–¹æ³• <code>numberOfSectionInTableView</code> <code>numberOfRowsInSection</code> <code>cellForRowAtIndexPath</code></li><li>å¦‚æœ‰éœ€è¦è‡ªè¡Œæ„é€ ä¸€ä¸ª <code>UITableViewCell</code> å¹¶ä½¿ç”¨ä¸Šé¢çš„ç¬¬ä¸‰ä¸ªæ–¹æ³•ï¼ˆ<code>cellForRowAtIndexPath</code>ï¼‰è¿”å›ã€‚</li></ul><h2 id="è‡ªå®šä¹‰cell"><a href="#è‡ªå®šä¹‰cell" class="headerlink" title="è‡ªå®šä¹‰cell"></a>è‡ªå®šä¹‰cell</h2><p>Coming soonâ€¦</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸ªäººå­¦ä¹ ä½¿ç”¨ UITableView çš„æ—¶å€™çš„æ€»ç»“&lt;br&gt;
    
    </summary>
    
    
      <category term="iOS" scheme="http://blog.superyoung.win/tags/iOS/"/>
    
      <category term="Programming" scheme="http://blog.superyoung.win/tags/Programming/"/>
    
      <category term="UITableView" scheme="http://blog.superyoung.win/tags/UITableView/"/>
    
      <category term="ObjC" scheme="http://blog.superyoung.win/tags/ObjC/"/>
    
      <category term="Delegate" scheme="http://blog.superyoung.win/tags/Delegate/"/>
    
      <category term="DataSource" scheme="http://blog.superyoung.win/tags/DataSource/"/>
    
  </entry>
  
  <entry>
    <title>iOS å…³é—­é”®ç›˜æ–¹å¼çš„å°ç»“</title>
    <link href="http://blog.superyoung.win/2017/01/04/learning_iOS/keyboard-dissmissing/"/>
    <id>http://blog.superyoung.win/2017/01/04/learning_iOS/keyboard-dissmissing/</id>
    <published>2017-01-03T17:04:40.000Z</published>
    <updated>2017-01-29T02:27:31.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚ä½•ä¼˜é›…çš„å…³é—­ iOS é”®ç›˜ï¼ŒObjective C è¯­è¨€ã€‚<br><a id="more"></a></p><h2 id="æ”¶èµ·é”®ç›˜æ–¹æ³•"><a href="#æ”¶èµ·é”®ç›˜æ–¹æ³•" class="headerlink" title="æ”¶èµ·é”®ç›˜æ–¹æ³•"></a>æ”¶èµ·é”®ç›˜æ–¹æ³•</h2><ol><li>ç‚¹å‡»<code>return</code>é”®æ”¶èµ·ï¼Œä½¿ç”¨<code>UITextFieldDelegate</code>ä¸­çš„æ–¹æ³•<br><code>- (BOOL)textFieldShouldReturn:(UITextField *)textField{return [textField resignFirstResponder]; return YES;}</code></li></ol><ul><li>ç‚¹å‡»<code>done</code>é”®æ”¶èµ·ï¼Œå…ˆå°†<code>UITextField</code>å¯¹è±¡çš„<code>Return Key</code>å±æ€§ä¿®æ”¹ä¸º<code>done</code>ï¼Œå†è‡ªå®šä¹‰ä¸€ä¸ªæ–¹æ³•å¹¶å°†å…¶å’Œ <code>done</code> çš„ <code>Did End On Exit</code> è¿æ¥èµ·æ¥ï¼š</li><li><p>(IBAction) textFieldDoneEditing:(id)sender{[sender resignFirstResponder];}</p></li><li><p>åœ¨é”®ç›˜å¤–ç‚¹å‡»å…³é—­é”®ç›˜<br>åœ¨<code>UITextField</code>å¯¹è±¡å¤–çš„è§†å›¾æ§åˆ¶å™¨ç±»çš„<code>viewDidLoad</code>æ–¹æ³•ä¸­å®šä¹‰ä¸€ä¸ª<code>UIGestureRecofnizer</code>å¯¹è±¡ï¼ˆä½¿ç”¨<code>[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissKb)]</code>æ–¹æ³•åˆå§‹åŒ–ï¼Œå¹¶ä¸”ä½¿ç”¨<code>[self.view addGestureRecognizer:tap];</code>åŠ å…¥è§†å›¾ã€‚</p></li></ul><p>ç„¶åè®°å¾—å®ç°<code>@selector()</code>ä¸­çš„æ–¹æ³•ï¼š<code>- (void)dismissKb</code></p><ul><li><p>ç‚¹å‡»èƒŒæ™¯ View æ”¶èµ·é”®ç›˜<br><code>[self.view endEditing:YES];</code></p></li><li><p>åœ¨ä»»ä½•åœ°æ–¹åŠ ä¸Šè¿™å¥è¯ï¼Œç»Ÿä¸€æ”¶èµ·é”®ç›˜<br><code>[[[UIApplication sharedApplication] keyWindow] endEditing:YES];</code></p></li><li><p>å‘é€ <code>resignFirstResponder</code> æ¶ˆæ¯<br><code>[[UIApplication sharedApplication] sendAction:@selector(resignFirstResponder) to:nil from:nil forEvent:nil];</code></p></li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol><li>å½“ä½ èƒ½è·å– <code>UITextField</code> å¯¹è±¡æ—¶ï¼Œæœ€å¥½ä½¿ç”¨ <code>[obj resignFirstResponder]</code> æ–¹æ³•</li></ol><ul><li>å¦‚æœæœ‰å¾ˆå¤š <code>UITextField</code> å¯¹è±¡ï¼Œè€Œä¸”å¯ä»¥è·å–åˆ° <code>viewController</code> çš„ <code>view</code> æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>[self.view endEditing:YES]</code> æ–¹æ³•</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¦‚ä½•ä¼˜é›…çš„å…³é—­ iOS é”®ç›˜ï¼ŒObjective C è¯­è¨€ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="iOS" scheme="http://blog.superyoung.win/tags/iOS/"/>
    
      <category term="Programming" scheme="http://blog.superyoung.win/tags/Programming/"/>
    
      <category term="Objective C" scheme="http://blog.superyoung.win/tags/Objective-C/"/>
    
      <category term="keyboard" scheme="http://blog.superyoung.win/tags/keyboard/"/>
    
  </entry>
  
</feed>
